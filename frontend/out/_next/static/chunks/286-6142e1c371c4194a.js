"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{8935:function(a,b,c){c.d(b,{u:function(){return k}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(2071),j=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getDepts=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){var e={limit:a,offset:b};try{var f=h.E.get("/department/?".concat((0,i.K)(e)));c(f)}catch(g){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.createDept=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.post("/department/create",{name:a});b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateDept=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/department/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteDepts=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/department/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),k=new j},1076:function(a,b,c){c.d(b,{Q:function(){return n}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(381),j=c.n(i),k=function(a,b){return j()(a).locale("en").format("YYYY-MM-DD")},l=c(2071),m=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getSessions=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=a.limit,e=a.offset,f=a.status,g=a.teacherId,i=a.studentId,j=a.departmentId,m=a.date,n={limit:d,offset:e,status:f,teacherId:g,studentId:i,departmentId:j,date:m&&null!==m.from&&""!==m.from&&null!==m.to&&""!==m.to&&"".concat(k(m.from,"from"),"to").concat(k(m.to),"&")},o=h.E.get("/sessions?".concat((0,l.K)(n)));b(o)}catch(p){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.getSessionById=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.get("/sessions/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.getSessionByStudentId=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.get("/sessions/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.getSessionTypes=function(){return(0,d.Z)(g().mark(function a(){return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a,b){try{var c=h.E.get("/sessions/types");a(c)}catch(d){b(Error("Internal server error"))}}));case 1:case"end":return a.stop()}},a)}))()},b.deleteSession=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/sessions",{ids:a});b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.createSession=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.post("/sessions/create/",a);b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateSession=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/sessions/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.startMeeting=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.get("/sessions/oauth/callback",{code:a,sessionId:b});c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},a}(),n=new m},2455:function(a,b,c){c.d(b,{B:function(){return k}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(2071),j=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getUsers=function(a,b,c,e,f){return(0,d.Z)(g().mark(function d(){return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(d,g){var j="/user/",k={limit:a,offset:b*a,roleId:c};try{if(e&&c){j="/user/?".concat((0,i.K)(k),"&roleId=").concat(e,"&roleId=").concat(f);var l=h.E.get(j);d(l)}else{var m=h.E.get("/user/?".concat((0,i.K)(k)));d(m)}}catch(n){g(Error("Internal server error"))}}));case 1:case"end":return d.stop()}},d)}))()},b.getAllParents=function(){return(0,d.Z)(g().mark(function a(){return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a,b){try{var c=h.E.get("/user/all/parents");a(c)}catch(d){b(Error("Internal server error"))}}));case 1:case"end":return a.stop()}},a)}))()},b.getUserById=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.get("/user/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.deleteUser=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/user/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.createUser=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.post("/user/create",a);b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateUser=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/user/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},a}(),k=new j},6263:function(a,b,c){c.d(b,{Q:function(){return A}});var d=c(4727),e=c(4251),f=c(4051),g=c.n(f),h=c(5893),i=c(7294),j=c(8396),k=c(7357),l=c(7533),m=c(6501),n=c(5983),o=c(6993),p=c(1029),q=c(7292),r=c(9897),s=c(570),t=c(4455),u=c(1076),v=c(9103),w=c(7704),x=c(381),y=c.n(x),z=c(8496),A=[{value:"zoom",label:"zoom"}],B=function(){var a,b,c,f,x,A={date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null},B=(0,t.s)(),C=(0,w.a)().user,D=(0,i.useRef)(null),E=(0,i.useState)([]),F=(E[0],E[1]),G=(0,i.useState)([]),H=G[0],I=G[1],J=(0,i.useState)(!1),K=J[0],L=J[1],M=(0,i.useState)({}),N=M[0],O=M[1],P=(0,j.Z)(function(a){return a.breakpoints.up("md")},{noSsr:!1}),Q=(0,i.useState)(!0),R=(Q[0],Q[1]),S=(0,i.useRef)(null),T=(0,i.useState)(P),U=T[0],V=T[1],W=function(){L(!0)},X=(0,i.useCallback)((f=(0,d.Z)(g().mark(function a(b){var c;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.Q.getSessions((0,e.Z)({},b,N));case 3:c=a.sent,B()&&I(c.rows.map(function(a){return{title:a.title||"No name",start:"".concat(null==a?void 0:a.date.substr(0,11)).concat(y()("".concat(null==a?void 0:a.date.substr(0,11)).concat(a.startTime).concat(a.date.substr(19,24))).format("HH:mm")),end:"".concat(null==a?void 0:a.date.substr(0,11)).concat(y()("".concat(a.endTime).concat(a.date.substr(19,24))).format("HH:mm"))}})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a){return f.apply(this,arguments)}),[B]);(0,i.useEffect)(function(){X({limit:"ALL",offset:-1})},[]);var Y=(x=(0,d.Z)(g().mark(function a(b){var c,d;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=m.ZP.loading("create"),a.prev=1,a.next=4,u.Q.createSession(b);case 4:if(!(d=a.sent)){a.next=12;break}return m.ZP.dismiss(c),m.ZP.success("createSessionSuccess"),X({limit:"ALL",offset:-1}),a.abrupt("return",{success:!0});case 12:return m.ZP.dismiss(c),m.ZP.error("createSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),m.ZP.dismiss(c),m.ZP.error(a.t0.message||"createSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a){return x.apply(this,arguments)}),Z=function(a){},$=function(a){},_=function(a){F(a)},aa=function(a){O(a),X((0,e.Z)({limit:"ALL",offset:-1},a))},ab=function(){R(!0),aa(A)},ac=function(){V(function(a){return!a})},ad=function(){V(!1)};return(0,i.useEffect)(function(){console.log("Previous value:",N)},[N]),(0,h.jsxs)(k.Z,{sx:{margin:1,display:"flex",width:"100%"},children:[["super_admin","admin"].includes(null==C?void 0:null===(a=C.role)|| void 0===a?void 0:a.name)&&(0,h.jsx)(h.Fragment,{children:P?(0,h.jsx)(k.Z,{sx:{width:U?"20%":"0%"},children:(0,h.jsx)(v.H,{containerRef:S,onClose:ad,open:U,applyFilters:function(a){return aa(a)},clearFilters:ab,isCreatePage:!0})}):(0,h.jsx)(l.ZP,{open:U,PaperProps:{sx:{width:280}},onClose:function(){V(!1)},children:(0,h.jsx)(v.H,{containerRef:S,onClose:ad,open:U,applyFilters:function(a){return aa(a)},clearFilters:ab,isCreatePage:!0})})}),(0,h.jsx)(k.Z,{sx:{m:"auto",width:U?"80%":"120%","& .fc .fc-toolbar":{flexDirection:P?"row":"column"}},children:(0,h.jsx)(n.Z,{ref:D,expandRows:!0,contentHeight:750,headerToolbar:{start:"prev,next today filterButton",center:"title",end:"addEventButton,multiMonthYear,listWeek,dayGridMonth,timeGridWeek,timeGridDay"},initialView:"dayGridMonth",plugins:[o.Z,p.Z,r.ZP,q.Z,s.Z,],editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,slotLabelFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"},select:Z,eventClick:$,eventsSet:_,eventAdd:function(){},eventChange:function(){},eventRemove:function(){},events:H,customButtons:(0,e.Z)({},((null==C?void 0:null===(b=C.role)|| void 0===b?void 0:b.name)==="admin"||(null==C?void 0:null===(c=C.role)|| void 0===c?void 0:c.name)==="super_admin")&&{addEventButton:{text:"add event",click:function(a,b){W()}},filterButton:{text:"Filter",click:function(a,b){ac()}}})})}),(0,h.jsx)(z.Q,{open:K,setOpen:L,createSession:Y})]})};b.Z=B},8496:function(a,b,c){c.d(b,{Q:function(){return J}});var d=c(4727),e=c(4251),f=c(2875),g=c(4051),h=c.n(g),i=c(5893),j=c(7294),k=c(4666),l=c(7645),m=c(5861),n=c(7357),o=c(6580),p=c(6886),q=c(135),r=c(4054),s=c(8972),t=c(1425),u=c(3321),v=c(8987),w=c(6310),x=c(2175),y=c(3493),z=c(586),A=c(720),B=c(4455),C=c(2455),D=c(8935),E=c(1076),F=c(381),G=c.n(F),H=c(6263),I=[{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:7,label:"Sunday"},],J=function(a){var b,c=a.open,g=a.setOpen,F=a.session,J=a.createSession,K=(0,B.s)(),L=(0,j.useState)(null),M=L[0],N=L[1],O=(0,j.useState)([]),P=O[0],Q=O[1],R=(0,j.useState)([]),S=R[0],T=R[1],U=(0,j.useState)([]),V=U[0],W=U[1],X=(0,j.useState)([]),Y=X[0],Z=X[1],$=(0,j.useCallback)((b=(0,d.Z)(h().mark(function a(b,c){var d,e,f;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,C.B.getUsers(b,c,"teacher","student");case 3:d=a.sent,K()&&(e=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===4}),f=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===3}),Q(e),T(f)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,c){return b.apply(this,arguments)}),[K]),_=(0,j.useCallback)((0,d.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.u.getDepts("ALL",-1);case 3:b=a.sent,K()&&W(b.rows),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[K]),aa=(0,j.useCallback)((0,d.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,E.Q.getSessionTypes();case 3:b=a.sent,K()&&Z(b.resp),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[K]);(0,j.useEffect)(function(){$("ALL",-1),_(),aa()},[]),(0,j.useEffect)(function(){F&&(console.log(F),ad.setValues(F))},[F]);var ab,ac=function(){ad.resetForm(),g(!1)},ad=(0,x.TA)({initialValues:{departmentId:"",sessionTypeId:"",studentId:"",teacherId:"",toDate:"",dayOfWeek:[],endTime:"",title:"",sessionMethod:""},validationSchema:w.Ry({departmentId:w.Rx().required("subject is required"),sessionTypeId:w.Rx().required("session type is required"),studentId:w.Rx().required("student is required"),teacherId:w.Rx().required("teacher is required"),dayOfWeek:w.Rx().required("dayOfWeek is required"),toDate:w.hT().required("toDate is required"),endTime:w.Z_().required("endTime is required"),title:w.Z_().required("title is required"),sessionMethod:w.Z_().required("sessionMethod is required")}),onSubmit:(ab=(0,d.Z)(h().mark(function a(b){var c,d,g,i,j;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=(c=new Date(String(M))).getTime(),g=G()(d),i=G()(b.endTime,"HH:mm"),a.next=6,J((0,f.Z)((0,e.Z)({},b),{fromDate:M,startTime:g.utc().format("HH:mm"),endTime:i.utc().format("HH:mm")}));case 6:(j=a.sent.success)&&(ac(),ad.resetForm());case 8:case"end":return a.stop()}},a)})),function(a){return ab.apply(this,arguments)})});return(0,i.jsxs)(k.Z,{maxWidth:"md",open:c,children:[(0,i.jsx)(l.Z,{sx:{bgcolor:"primary.main",color:"white"},children:(0,i.jsx)(m.Z,{variant:"subtitle2",children:"Create patch of sessions"})}),(0,i.jsxs)(n.Z,{sx:{p:2,bgcolor:"white"},children:[(0,i.jsx)(o.Z,{sx:{mt:1},children:(0,i.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(p.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,i.jsx)(q.Z,{label:"Title",name:"title",type:"text",sx:{width:"100%"},onChange:ad.handleChange,value:ad.values.title,error:Boolean(ad.errors.title&&ad.touched.title),helperText:ad.touched.title&&ad.errors.title})}),(0,i.jsx)(p.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,i.jsx)(r.Z,{fullWidth:!0,children:(0,i.jsx)(q.Z,{label:"Session Method",name:"sessionMethod",value:ad.values.sessionMethod,error:Boolean(ad.errors.sessionMethod&&ad.touched.sessionMethod),helperText:ad.touched.sessionMethod&&ad.errors.sessionMethod,InputLabelProps:{shrink:!!ad.values.sessionMethod},fullWidth:!0,required:!0,select:!0,onChange:ad.handleChange,children:H.Q.map(function(a){return(0,i.jsx)(s.Z,{value:a.value,children:a.label},a.value)})})})}),(0,i.jsx)(p.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,i.jsx)(r.Z,{fullWidth:!0,children:(0,i.jsx)(q.Z,{label:"Subject",name:"departmentId",value:ad.values.departmentId,error:Boolean(ad.errors.departmentId&&ad.touched.departmentId),helperText:ad.touched.departmentId&&ad.errors.departmentId,InputLabelProps:{shrink:!!ad.values.departmentId},fullWidth:!0,required:!0,select:!0,onChange:ad.handleChange,children:V.map(function(a){return(0,i.jsx)(s.Z,{value:a.id,children:a.name},a.id)})})})}),(0,i.jsx)(p.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,i.jsx)(r.Z,{fullWidth:!0,children:(0,i.jsx)(q.Z,{label:"Teacher",name:"teacherId",value:ad.values.teacherId,error:Boolean(ad.errors.teacherId&&ad.touched.teacherId),helperText:ad.touched.teacherId&&ad.errors.teacherId,InputLabelProps:{shrink:!!ad.values.teacherId},fullWidth:!0,required:!0,select:!0,onChange:ad.handleChange,children:S.map(function(a){return(0,i.jsxs)(s.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})})}),(0,i.jsx)(p.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,i.jsx)(r.Z,{fullWidth:!0,children:(0,i.jsx)(q.Z,{label:"Student",name:"studentId",value:ad.values.studentId,error:Boolean(ad.errors.studentId&&ad.touched.studentId),fullWidth:!0,required:!0,select:!0,helperText:ad.touched.studentId&&ad.errors.studentId,InputLabelProps:{shrink:!!ad.values.studentId},onChange:ad.handleChange,children:P.map(function(a){return(0,i.jsxs)(s.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})})}),(0,i.jsx)(p.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,i.jsx)(A._,{dateAdapter:z.y,children:(0,i.jsx)(y.x,{name:"fromDate",sx:{width:"100%"},label:"From Date & Start Time",value:M,onChange:function(a){N(null==a?void 0:a.$d)}})})}),(0,i.jsx)(p.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,i.jsx)(q.Z,{label:"To Date",name:"toDate",type:"date",sx:{width:"100%"},onChange:ad.handleChange,value:ad.values.toDate,error:Boolean(ad.errors.toDate&&ad.touched.toDate),helperText:ad.touched.toDate&&ad.errors.toDate,InputLabelProps:{shrink:!0}})}),(0,i.jsx)(p.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,i.jsx)(q.Z,{label:"End Time",name:"endTime",type:"time",sx:{width:"100%"},onChange:ad.handleChange,value:ad.values.endTime,error:Boolean(ad.errors.endTime&&ad.touched.endTime),helperText:ad.touched.endTime&&ad.errors.endTime,InputLabelProps:{shrink:!0}})}),(0,i.jsx)(p.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,i.jsx)(r.Z,{fullWidth:!0,children:(0,i.jsx)(q.Z,{label:"Day of week",name:"dayOfWeek",value:Array.isArray(ad.values.dayOfWeek)?ad.values.dayOfWeek:[],error:Boolean(ad.errors.dayOfWeek&&ad.touched.dayOfWeek),helperText:ad.touched.dayOfWeek&&ad.errors.dayOfWeek,InputLabelProps:{shrink:!!ad.values.dayOfWeek},fullWidth:!0,required:!0,select:!0,onChange:ad.handleChange,SelectProps:{multiple:!0},children:I.map(function(a){return(0,i.jsx)(s.Z,{value:a.value,children:a.label},a.value)})})})}),(0,i.jsx)(p.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,i.jsx)(r.Z,{fullWidth:!0,children:(0,i.jsx)(q.Z,{label:"Session Type",name:"sessionTypeId",value:ad.values.sessionTypeId,error:Boolean(ad.errors.sessionTypeId&&ad.touched.sessionTypeId),helperText:ad.touched.sessionTypeId&&ad.errors.sessionTypeId,InputLabelProps:{shrink:!!ad.values.sessionTypeId},fullWidth:!0,required:!0,select:!0,onChange:ad.handleChange,children:Y.map(function(a){return(0,i.jsx)(s.Z,{value:a.id,children:a.name},a.id)})})})})]})}),(0,i.jsx)(t.Z,{sx:{p:3},children:(0,i.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,i.jsxs)(u.Z,{variant:"outlined",size:"small",onClick:ac,children:[" ","Cancel"]}),(0,i.jsx)(v.Z,{type:"submit",variant:"contained",onClick:function(){return ad.handleSubmit()},children:"Create"})]})})]})]})}},9103:function(a,b,c){c.d(b,{H:function(){return J}});var d=c(4727),e=c(4251),f=c(2875),g=c(4747),h=c(4051),i=c.n(h),j=c(5893),k=c(7294),l=c(5697),m=c.n(l),n=c(7533),o=c(8396),p=c(7357),q=c(135),r=c(7109),s=c(8972),t=c(5861),u=c(1233),v=c(3321),w=c(948),x=c(8987),y=c(8169),z=(0,y.Z)((0,j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,j.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),"Search"),A=c(720),B=c(2740),C=(0,y.Z)((0,j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,j.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),"ArrowRight"),D=c(6486),E=c(2455),F=c(4455),G=c(8935),H=(0,w.ZP)(n.ZP)({flexShrink:0,width:305,"& .MuiDrawer-paper":{position:"relative",width:305,backgroundColor:"white"}}),I=(0,w.ZP)(n.ZP)({maxWidth:"100%",width:305,"& .MuiDrawer-paper":{height:"calc(100% - 64px)",maxWidth:"100%",top:64,width:305}}),J=function(a){var b,c={date:{from:"",to:""},teacherId:null,departmentId:null,studentId:null},h=(0,F.s)(),l=(0,k.useState)([]),m=l[0],n=l[1],w=(0,k.useState)([]),y=w[0],J=w[1],K=(0,k.useState)([]),L=K[0],M=K[1],N=(0,k.useState)(c),O=N[0],P=N[1],Q=a.containerRef,R=a.onClose,S=a.open,T=a.applyFilters,U=a.clearFilters,V=a.loading,W=a.isCreatePage,X=(0,g.Z)(a,["containerRef","onClose","open","applyFilters","clearFilters","loading","isCreatePage"]),Y=function(a){P(a)},Z=(0,k.useRef)(null),$=(0,k.useRef)(null),_=(0,k.useRef)(null),aa=(0,k.useRef)({date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null}),ab=(0,o.Z)(function(a){return a.breakpoints.up("lg")}),ac=(0,k.useRef)((0,D.debounce)(function(a){var b;null==Y||Y((0,f.Z)((0,e.Z)({},O),{teacherId:(null===(b=Z.current)|| void 0===b?void 0:b.value)?+Z.current.value:null})),T((0,f.Z)((0,e.Z)({},O),{teacherId:a}))},2e3)).current,ad=(0,k.useRef)((0,D.debounce)(function(a){var b;null==Y||Y((0,f.Z)((0,e.Z)({},O),{studentId:(null===(b=$.current)|| void 0===b?void 0:b.value)?+$.current.value:null})),T((0,f.Z)((0,e.Z)({},O),{studentId:a}))},2e3)).current,ae=(0,k.useRef)((0,D.debounce)(function(a){var b;null==Y||Y((0,f.Z)((0,e.Z)({},O),{departmentId:(null===(b=_.current)|| void 0===b?void 0:b.value)?+_.current.value:null})),T((0,f.Z)((0,e.Z)({},O),{departmentId:a}))},2e3)).current,af=function(a){var b=(0,f.Z)((0,e.Z)({},O),{date:{from:a[0],to:a[1]}});null==Y||Y(b)},ag=function(){P(c),null==U||U()},ah=(0,k.useCallback)((b=(0,d.Z)(i().mark(function a(b,c){var d,e,f;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,E.B.getUsers(b,c,"teacher","student");case 3:d=a.sent,h()&&(e=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===4}),f=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===3}),J(e),n(f)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,c){return b.apply(this,arguments)}),[h]),ai=(0,k.useCallback)((0,d.Z)(i().mark(function a(){var b;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,G.u.getDepts("ALL",-1);case 3:b=a.sent,h()&&M(b.rows),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[h]);(0,k.useEffect)(function(){ah("ALL",-1),ai()},[]),(0,k.useEffect)(function(){aa.current=O},[O]);var aj=(0,j.jsxs)(p.Z,{sx:{pb:3,pt:{xs:3},px:3},children:[(0,j.jsx)(p.Z,{component:"form",children:(0,j.jsx)(q.Z,{label:"Teacher",name:"teacherId",value:O.teacherId,onKeyDown:function(a){"Enter"===a.key&&(a.preventDefault(),ac(a.target.value))},inputProps:{ref:Z},InputProps:{startAdornment:(0,j.jsx)(r.Z,{position:"start",children:(0,j.jsx)(z,{fontSize:"small"})})},fullWidth:!0,select:!0,onChange:function(a){null==Y||Y((0,f.Z)((0,e.Z)({},O),{teacherId:a.target.value}))},children:m.map(function(a){return(0,j.jsxs)(s.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})}),(0,j.jsx)(p.Z,{component:"form",children:(0,j.jsx)(q.Z,{sx:{mt:3},label:"Student",name:"studentId",value:O.studentId,onKeyDown:function(a){"Enter"===a.key&&(a.preventDefault(),ad(a.target.value))},inputProps:{ref:$},InputProps:{startAdornment:(0,j.jsx)(r.Z,{position:"start",children:(0,j.jsx)(z,{fontSize:"small"})})},fullWidth:!0,select:!0,onChange:function(a){null==Y||Y((0,f.Z)((0,e.Z)({},O),{studentId:a.target.value}))},children:y.map(function(a){return(0,j.jsxs)(s.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})}),(0,j.jsx)(p.Z,{component:"form",children:(0,j.jsx)(q.Z,{sx:{mt:3},label:"Subject",name:"departmentId",value:O.departmentId,onKeyDown:function(a){"Enter"===a.key&&(a.preventDefault(),ae(a.target.value))},inputProps:{ref:_},InputProps:{startAdornment:(0,j.jsx)(r.Z,{position:"start",children:(0,j.jsx)(z,{fontSize:"small"})})},fullWidth:!0,select:!0,onChange:function(a){null==Y||Y((0,f.Z)((0,e.Z)({},O),{departmentId:a.target.value}))},children:L.map(function(a){return(0,j.jsx)(s.Z,{value:a.id,children:a.name},a.id)})})}),(0,j.jsx)(t.Z,{color:"textSecondary",sx:{mt:4},variant:"subtitle2",children:"Date"}),(0,j.jsx)(u.Z,{spacing:2,sx:{mt:2},children:(0,j.jsx)(A._,{dateAdapter:B.H,children:(0,j.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,j.jsx)(q.Z,{label:"from",name:"from",type:"date",sx:{width:"50%"},onChange:function(a){af([a.target.value,O.date.to,])},value:O.date.from,InputLabelProps:{shrink:!0}}),(0,j.jsx)(C,{fontSize:"inherit"})," ",(0,j.jsx)(q.Z,{label:"to",name:"to",type:"date",sx:{width:"50%"},value:O.date.to,onChange:function(a){af([O.date.from,a.target.value,])},InputLabelProps:{shrink:!0}})]})})}),(0,j.jsx)(x.Z,{loading:V,sx:{mt:2},variant:"contained",onClick:function(){var a=aa.current;console.log({filters:O,previousFilters:a}),T(O)},children:"Apply Filters"}),(0,j.jsx)(v.Z,{sx:{mt:2},variant:"text",onClick:ag,children:"Clear"})]});return W?S?(0,j.jsx)(p.Z,{children:aj}):(0,j.jsx)(p.Z,{sx:{width:"0px"}}):ab?(0,j.jsx)(H,(0,f.Z)((0,e.Z)({anchor:"left",open:S,SlideProps:{container:null==Q?void 0:Q.current},variant:"persistent"},X),{children:aj})):(0,j.jsx)(I,(0,f.Z)((0,e.Z)({anchor:"left",ModalProps:{container:null==Q?void 0:Q.current},onClose:R,open:S,SlideProps:{container:null==Q?void 0:Q.current},variant:"temporary"},X),{children:aj}))};J.propTypes={containerRef:m().any,filters:m().object,onChange:m().func,onClose:m().func,open:m().bool}},2071:function(a,b,c){c.d(b,{K:function(){return e}});var d=c(6486),e=function(a){var b=Object.keys(a),c=[];return a?(b.forEach(function(b){((0,d.isEmpty)(a[b])||(0,d.isNil)(a[b]))&&"number"!=typeof a[b]||c.push("".concat(b,"=").concat(a[b])),("archived"===b||"exported"===b)&&c.push("".concat(b,"=").concat(a[b]))}),c.join("&")):""}}}])