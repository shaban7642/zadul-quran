(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{4587:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sessions",function(){return c(138)}])},4150:function(a,b,c){"use strict";c.d(b,{t:function(){return k}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(2071),j=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getDocuments=function(a,b,c,e){return(0,d.Z)(g().mark(function d(){return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(d,f){var g={limit:a,offset:b,documentType:c,pageName:e};try{var j=h.E.get("/documents/?".concat((0,i.K)(g)));d(j)}catch(k){f(Error("Internal server error"))}}));case 1:case"end":return d.stop()}},d)}))()},b.createDocument=function(a,b,c,e){return(0,d.Z)(g().mark(function f(){return g().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",new Promise(function(){var f=(0,d.Z)(g().mark(function d(f,i){var j;return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:try{j=h.E.post('/documents/upload?data={"documentType": '.concat(JSON.stringify(a),', "userId": ').concat(c,', "reportId": ').concat(e||0,"}"),b,{contentType:"multipart/form-data"}),f(j)}catch(g){i(Error("Internal server error"))}case 1:case"end":return d.stop()}},d)}));return function(a,b){return f.apply(this,arguments)}}()));case 1:case"end":return f.stop()}},f)}))()},b.updateDocument=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/documents/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteDocument=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/documents/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),k=new j},6469:function(a,b,c){"use strict";c.d(b,{Z:function(){return e}});var d=c(7294);function e(a,b){var c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:{},e=c.getCachedCallback,f=void 0===e?function(a){return a}:e,g=c.expirationDays,h=(0,d.useState)(function(){var c=localStorage.getItem(b);if(c){var d=JSON.parse(c);if(d.expiresAt>Date.now())return f(d.value);localStorage.removeItem(b)}return f(a)}),i=h[0],j=h[1];if(!function(a,b){var c=(0,d.useRef)(!0);(0,d.useEffect)(function(){if(c.current){c.current=!1;return}a()},b)}(function(){if(null==i){localStorage.removeItem(b);return}var a=Date.now()+864e5*(g||7);localStorage.setItem(b,JSON.stringify({value:i,expiresAt:a}))},[i]),null==b)throw Error("Please insert cacheKey");var k=(0,d.useCallback)(function(){localStorage.removeItem(b)},[b]);return[i,j,k,]}},138:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return aS}});var d=c(5893),e=c(7294),f=c(9633),g=c(7357),h=c(44),i=c(5670),j=c(6568),k=c(4769),l=c(6263),m=c(4727),n=c(7573),o=c(4251),p=c(2875),q=c(969),r=c(4051),s=c.n(r),t=c(1796),u=c(7906),v=c(295),w=c(2882),x=c(519),y=c(629),z=c(2734),A=c(3252),B=c(3184),C=c(3816),D=c(5071),E=c(5861),F=c(3946),G=c(6761),H=function(a){var b=a.headCells,c=a.numSelected,e=a.onSelectAllClick,f=a.deleteSession,g=a.rowCount;return(0,z.Z)(),(0,d.jsx)(B.Z,{sx:(0,o.Z)({width:"100%",mb:2},{bgcolor:function(a){return(0,t.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,d.jsxs)(C.Z,{children:[b.map(function(a,b){return(0,d.jsx)(A.Z,{padding:a.disablePadding?"none":"normal",sx:{color:function(a){return a.palette.info.main}},children:a.label},a.id)}),(0,d.jsx)(A.Z,{className:"no-print",children:(0,d.jsx)(E.Z,{color:"error",sx:{fontWeight:"bold"},children:c>0&&" ".concat(c," selected")})}),(0,d.jsx)(A.Z,{padding:"checkbox",className:"no-print",children:c>0&&(0,d.jsx)(F.Z,{onClick:function(){return f()},children:(0,d.jsx)(G.Z,{color:"error",fontSize:"medium"})})}),(0,d.jsx)(A.Z,{padding:"checkbox",className:"no-print",children:(0,d.jsx)(D.Z,{color:"primary",indeterminate:c>0&&c<g,checked:g>0&&c===g,onChange:e,inputProps:{"aria-label":"select all desserts"}})})]})})},I=c(948),J=c(6818),K=c(3321),L=c(6242),M=c(7023),N=c(7918),O=c(7720),P=c(4054),Q=c(135),R=c(8972),S=c(4666),T=c(8169),U=(0,T.Z)((0,d.jsx)("svg",{viewBox:"0 0 11 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M3.29008 6.6899L7.1472 6.70013M3.28371 9.08989L7.14084 9.10012M3.29644 4.28991L7.15357 4.30014M0.731381 1.8831C0.731802 1.72397 0.799936 1.57154 0.920793 1.45934C1.04165 1.34714 1.20533 1.28436 1.37583 1.28481L9.09008 1.30526C9.26058 1.30571 9.42393 1.36936 9.54419 1.4822C9.66445 1.59504 9.73177 1.74783 9.73135 1.90696L9.70113 13.3069L7.45511 11.801L5.20114 13.295L2.95513 11.789L0.701159 13.2831L0.731381 1.8831Z",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round"})}),"BillsIcon"),V=c(7922),W=c(2175),X=c(8987),Y=c(6310),Z=c(7361),$=c.n(Z),_=c(6968),aa=c.n(_),ab=c(4455),ac=c(7704),ad=c(9779),ae=c(6886),af=c(3841),ag=c(6703),ah=c(6501),ai=c(5815),aj=c(5485),ak=function(){function a(){(0,ai.Z)(this,a)}var b=a.prototype;return b.getReports=function(a,b){return(0,m.Z)(s().mark(function c(){return s().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=aj.E.get("/reports",{limit:a,page:++b});c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.createReport=function(a){return(0,m.Z)(s().mark(function b(){return s().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=aj.E.post("/reports/create",a);b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateReport=function(a,b){return(0,m.Z)(s().mark(function c(){return s().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=aj.E.put("/reports/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteReport=function(a){return(0,m.Z)(s().mark(function b(){return s().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=aj.E.delete("/reports/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),al=new ak,am=c(4150),an=c(4970),ao=c(888),ap=function(a){var b,c,f,h,i,j,k,l=a.sessionDeptName,n=a.sessionId,q=a.updateSession,r=a.handleCloseCreateReport,u=a.setReoprtFlag,v=a.reportFlag,w=(0,e.useState)([]),x=w[0],z=w[1],A=(0,e.useState)([]),B=A[0],C=A[1],D=(0,e.useState)(0),E=D[0],F=D[1],G=(0,ac.a)().user,H=(0,e.useState)(!1),J=(H[0],H[1]),L=["1","2","3","4","5","6","7","8","9","10"],M=(0,ab.s)(),S=(0,e.useCallback)((c=(0,m.Z)(s().mark(function a(b,c){var d;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,am.t.getDocuments(b,c,"books");case 3:d=a.sent,M()&&z(d.rows),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),ah.ZP.error(a.t0.message||"failed");case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return c.apply(this,arguments)}),[M]),T=(0,W.TA)({initialValues:{date:new Date,sessionId:n,notes:"",homework:"",bookId:null===(b=x[0])|| void 0===b?void 0:b.id,unit:"",topic:"",level:"",newWords:"",expressions:"",rules:"",memorization:"",revision:"",tajweed:"",recitation:"",reading:"",memorizationLevel:"",revisionLevel:"",readingLevel:""},onSubmit:(f=(0,m.Z)(s().mark(function a(b){var c,d,e;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,U(b);case 3:d=(c=a.sent).id,e=c.success,e&&F(d),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}},a,null,[[0,9]])})),function(a){return f.apply(this,arguments)})}),U=(h=(0,m.Z)(s().mark(function a(b){var c,d;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=ah.ZP.loading("createReports"),a.prev=1,a.next=4,al.createReport(b);case 4:return d=a.sent.id,ah.ZP.dismiss(c),ah.ZP.success("createReports "),a.abrupt("return",{id:d,success:!0});case 10:return a.prev=10,a.t0=a.catch(1),ah.ZP.dismiss(c),ah.ZP.error(a.t0.message||"createReportsFailed"),a.abrupt("return",{id:0,success:!1});case 15:case"end":return a.stop()}},a,null,[[1,10]])})),function(a){return h.apply(this,arguments)}),V=(i=(0,m.Z)(s().mark(function a(){var b;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=ah.ZP.loading("updateReports"),a.prev=1,!(0!==E)){a.next=12;break}return ah.ZP.dismiss(b),ah.ZP.success("update Report"),T.resetForm(),r(n),q(n,{status:"done",endedAt:new Date(Date.now())}),u(!v),a.abrupt("return",{success:!0});case 12:return a.abrupt("return",{success:!1});case 13:a.next=20;break;case 15:return a.prev=15,a.t0=a.catch(1),ah.ZP.dismiss(b),ah.ZP.error(a.t0.message||"updateReportsFailed"),a.abrupt("return",{success:!1});case 20:case"end":return a.stop()}},a,null,[[1,15]])})),function(){return i.apply(this,arguments)}),Y=(j=(0,m.Z)(s().mark(function a(b,c,d){var e;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,am.t.createDocument({name:"reports",id:2},b,c,d);case 3:return e=a.sent,C((0,ad.Z)(B).concat([e.id])),a.abrupt("return",{success:!0});case 8:return a.prev=8,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",{success:!1});case 12:case"end":return a.stop()}},a,null,[[0,8]])})),function(a,b,c){return j.apply(this,arguments)}),Z=(k=(0,m.Z)(s().mark(function a(b){var c,d,e;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.preventDefault(),c=ah.ZP.loading("Upload file"),a.prev=2,J(!0),(d=new FormData).append("userId",G.id),d.append("file",b.target.files[0],b.target.files[0].name),a.next=9,Y(d,G.id,E);case 9:e=a.sent,ah.ZP.dismiss(c),e.success?ah.ZP.success("File uploaded"):ah.ZP.error("Upload file failed"),a.next=19;break;case 14:a.prev=14,a.t0=a.catch(2),ah.ZP.dismiss(c),ah.ZP.error(a.t0.message||"Upload file failed"),J(!1);case 19:case"end":return a.stop()}},a,null,[[2,14]])})),function(a){return k.apply(this,arguments)}),$=(0,I.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});return(0,e.useEffect)(function(){S(1e3,0)},[]),(0,d.jsx)(g.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",bgcolor:"#FFF",overflowX:"hidden"},children:(0,d.jsxs)(y.Z,{elevation:9,sx:{display:"flex",alignItems:"center",flexDirection:"column",p:"15px 15px",mr:1,width:"95%",bgcolor:"#FFF"},children:[" ",(0,d.jsx)(ae.ZP,{container:!0,children:E?(0,d.jsxs)(ae.ZP,{item:!0,xs:12,children:[" ",(0,d.jsxs)("div",{style:{textAlign:"center"},children:[(0,d.jsxs)(K.Z,{component:"label",variant:"contained",startIcon:(0,d.jsx)(an.Z,{}),children:["Upload file",(0,d.jsx)($,{type:"file",onChange:function(a){Z(a)}})]}),B.map(function(a){return(0,d.jsx)(ao.Z,{color:"success",sx:{position:"relative",top:10,ml:1}},a)})]}),(0,d.jsx)(O.Z,{sx:{mb:1,mt:2,mr:1}}),(0,d.jsx)("div",{style:{textAlign:"center"},children:(0,d.jsx)(X.Z,{type:"submit",onClick:function(){return V()},sx:{"& .MuiInputBase-root":{height:40},m:.5,p:1},variant:"contained",children:"Submit"})})]}):(0,d.jsx)(ae.ZP,{item:!0,xs:12,children:(0,d.jsxs)("form",{onSubmit:T.handleSubmit,children:[(0,d.jsx)(O.Z,{textAlign:"left",sx:{mb:1},children:(0,d.jsx)(N.Z,{label:"Feedback Report",sx:{fontWeight:"600"}})}),"Quran"!=l&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(P.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-level",children:"Grade"}),(0,d.jsx)(ag.Z,{name:"level",id:"outlined-level",labelId:"outlined-level",value:T.values.level,onChange:function(a){T.setFieldValue("level",a.target.value)},children:L.map(function(a){return(0,d.jsxs)(R.Z,{sx:(0,p.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,t.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:[a," / 10"]},a)})})]}),(0,d.jsxs)(P.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-adornment-bookId",children:"Book"}),(0,d.jsx)(ag.Z,{name:"bookId",id:"outlined-adornment-bookId",labelId:"outlined-adornment-bookId",value:T.values.bookId,onChange:function(a){T.setFieldValue("bookId",a.target.value)},children:null==x?void 0:x.map(function(a){return(0,d.jsx)(R.Z,{sx:(0,p.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,t.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:null==a?void 0:a.id,children:null==a?void 0:a.fileName},null==a?void 0:a.id)})})]}),(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(T.touched.unit&&T.errors.unit),helperText:T.touched.unit&&T.errors.unit,label:"Unit",margin:"normal",id:"unit",name:"unit",type:"text",onChange:T.handleChange,value:T.values.unit,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(T.touched.topic&&T.errors.topic),helperText:T.touched.topic&&T.errors.topic,label:"Topic",margin:"normal",id:"topic",name:"topic",type:"text",onChange:T.handleChange,value:T.values.topic,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}})]}),"Arabic"===l&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)(Q.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(T.touched.newWords&&T.errors.newWords),helperText:T.touched.newWords&&T.errors.newWords,label:"New Words",margin:"normal",id:"newWords",name:"newWords",type:"text",onChange:T.handleChange,value:T.values.newWords,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(Q.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(T.touched.expressions&&T.errors.expressions),helperText:T.touched.expressions&&T.errors.expressions,label:"Expressions",margin:"normal",id:"expressions",name:"expressions",type:"text",onChange:T.handleChange,value:T.values.expressions,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(Q.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(T.touched.rules&&T.errors.rules),helperText:T.touched.rules&&T.errors.rules,label:"Rules",margin:"normal",id:"rules",name:"rules",type:"text",onChange:T.handleChange,value:T.values.rules,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}})]}),"Quran"===l&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(T.touched.memorization&&T.errors.memorization),helperText:T.touched.memorization&&T.errors.memorization,label:"Memorization",margin:"normal",id:"memorization",name:"memorization",type:"text",onChange:T.handleChange,value:T.values.memorization,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(T.touched.revision&&T.errors.revision),helperText:T.touched.revision&&T.errors.revision,label:"Revision",margin:"normal",id:"revision",name:"revision",type:"text",onChange:T.handleChange,value:T.values.revision,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(T.touched.tajweed&&T.errors.tajweed),helperText:T.touched.tajweed&&T.errors.tajweed,label:"Tajweed",margin:"normal",id:"tajweed",name:"tajweed",type:"text",onChange:T.handleChange,value:T.values.tajweed,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(T.touched.recitation&&T.errors.recitation),helperText:T.touched.recitation&&T.errors.recitation,label:"Recitation",margin:"normal",id:"recitation",name:"recitation",type:"text",onChange:T.handleChange,value:T.values.recitation,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(T.touched.reading&&T.errors.reading),helperText:T.touched.reading&&T.errors.reading,label:"Reading",margin:"normal",id:"reading",name:"reading",type:"text",onChange:T.handleChange,value:T.values.reading,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsxs)(P.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-memorizationLevel",children:"Memorization Grade"}),(0,d.jsx)(ag.Z,{name:"memorizationLevel",id:"outlined-memorizationLevel",labelId:"outlined-memorizationLevel",value:T.values.memorizationLevel,onChange:function(a){T.setFieldValue("memorizationLevel",a.target.value)},children:L.map(function(a){return(0,d.jsx)(R.Z,{sx:(0,p.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,t.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]}),(0,d.jsxs)(P.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-revisionLevel",children:"Revision Grade"}),(0,d.jsx)(ag.Z,{name:"revisionLevel",id:"outlined-revisionLevel",labelId:"outlined-revisionLevel",value:T.values.revisionLevel,onChange:function(a){T.setFieldValue("revisionLevel",a.target.value)},children:L.map(function(a){return(0,d.jsx)(R.Z,{sx:(0,p.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,t.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]}),(0,d.jsxs)(P.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-readingLevel",children:"Reading Grade"}),(0,d.jsx)(ag.Z,{name:"readingLevel",id:"outlined-readingLevel",labelId:"outlined-readingLevel",value:T.values.readingLevel,onChange:function(a){T.setFieldValue("readingLevel",a.target.value)},children:L.map(function(a){return(0,d.jsx)(R.Z,{sx:(0,p.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,t.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]})]}),(0,d.jsx)(Q.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},required:!0,error:Boolean(T.touched.homework&&T.errors.homework),helperText:T.touched.homework&&T.errors.homework,label:"H.W",margin:"normal",id:"homework",name:"homework",type:"text",onChange:T.handleChange,value:T.values.homework,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(Q.Z,{multiline:!0,minRows:2,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:80},mr:1},error:Boolean(T.touched.notes&&T.errors.notes),helperText:T.touched.notes&&T.errors.notes,label:"Notes",margin:"normal",id:"notes",name:"notes",type:"text",onChange:T.handleChange,value:T.values.notes,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(O.Z,{sx:{mb:1,mt:2}}),(0,d.jsx)("div",{style:{textAlign:"right"},children:(0,d.jsx)(X.Z,{type:"submit",sx:{"& .MuiInputBase-root":{height:40},m:.5,p:1},variant:"contained",children:"Submit"})})]})})})," "]})})},aq=ap,ar=c(8462),as=c(891),at=c(1134),au=c(381),av=c.n(au),aw=c(594),ax=c(6023),ay=c(7116),az=c(660),aA=function(a){var b,c,f,g,h,i,j,k,l,m,n,o,p,q,r=a.session,s=a.handleCloseReport,t=a.setReoprtFlag,u=(0,e.useRef)(null),v=(0,ay.useReactToPrint)({contentRef:u,ignoreGlobalStyles:!1}),w=(0,ac.a)().user,x=(0,e.useState)(!0),z=x[0],A=x[1];return(0,d.jsxs)(y.Z,{ref:u,elevation:12,className:"page",sx:{position:"relative",padding:"20px",margin:"20px auto",maxWidth:{xs:"100%",lg:"800px"},borderRadius:"16px",backgroundColor:"#FFF",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,d.jsx)("style",{children:"\n                    @media print {\n                        body {\n                            -webkit-print-color-adjust: exact;\n                        }\n                        .no-print {\n                            display: none !important;\n                        }\n                        .page {\n                            box-shadow: none !important;\n                        }\n                    }\n                "}),(0,d.jsx)(F.Z,{className:"no-print",onClick:s,sx:{position:"absolute",top:"16px",right:"16px",color:"primary.main"},children:(0,d.jsx)(aw.Z,{})}),(0,d.jsx)(K.Z,{className:"no-print",variant:"outlined",endIcon:(0,d.jsx)(ax.Z,{}),onClick:function(){return v()},sx:{marginBottom:"16px"},children:"Print as pdf"}),(0,d.jsx)(E.Z,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"Session Information"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(O.Z,{sx:{marginBottom:"16px"},children:(0,d.jsx)(N.Z,{label:"Primary Details",color:"primary"})}),(0,d.jsxs)(ae.ZP,{container:!0,spacing:2,component:ar.Z,children:[(0,d.jsx)(ae.ZP,{item:!0,xs:12,sm:6,children:[{label:"Teacher",value:"".concat(null==r?void 0:null===(b=r.patch)|| void 0===b?void 0:null===(c=b.teacher)|| void 0===c?void 0:c.firstName," ").concat(null==r?void 0:null===(f=r.patch)|| void 0===f?void 0:null===(g=f.teacher)|| void 0===g?void 0:g.lastName)},{label:"Subject",value:null==r?void 0:null===(h=r.patch)|| void 0===h?void 0:null===(i=h.department)|| void 0===i?void 0:i.name},{label:"Date",value:av()(null==r?void 0:r.date).format("YYYY-MM-DD")},{label:"Start Time",value:(null==r?void 0:r.startTime)?av()("".concat(null==r?void 0:r.date.substr(0,11)).concat(r.startTime).concat(r.date.substr(19,24))).format("hh:mm A"):"no data"},{label:"Teacher Joined At",value:(null==r?void 0:r.startedAt)?av()(null==r?void 0:r.startedAt).format("hh:mm A"):"no data"},{label:"Student Joined At",value:(null==r?void 0:r.joinedAt)?av()(null==r?void 0:r.joinedAt).format("hh:mm A"):"no data"},].map(function(a,b){return(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsxs)(E.Z,{variant:"subtitle1",fontWeight:"bold",children:[a.label,":"]}),(0,d.jsx)(E.Z,{variant:"body1",sx:{marginLeft:"8px",color:"text.secondary"},children:a.value||"No data"})]},b)})}),(0,d.jsx)(ae.ZP,{item:!0,xs:12,sm:6,children:[{label:"Student",value:"".concat(null==r?void 0:null===(j=r.patch)|| void 0===j?void 0:null===(k=j.student)|| void 0===k?void 0:k.firstName," ").concat(null==r?void 0:null===(l=r.patch)|| void 0===l?void 0:null===(m=l.student)|| void 0===m?void 0:m.lastName)},{label:"Session Type",value:null==r?void 0:null===(n=r.sessionType)|| void 0===n?void 0:n.name},{label:"Status",value:null==r?void 0:r.status},{label:"End Time",value:(null==r?void 0:r.endTime)?av()("".concat(null==r?void 0:r.date.substr(0,11)).concat(r.endTime).concat(r.date.substr(19,24))).format("hh:mm A"):"no data"},{label:"Ended At",value:(null==r?void 0:r.endedAt)?av()(null==r?void 0:r.endedAt).format("YYYY-MM-DD hh:mm A"):"no data"},{label:"Ended Day",value:(null==r?void 0:r.endedAt)?av()(null==r?void 0:r.endedAt).format("dddd"):"no data"},].map(function(a,b){return(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsxs)(E.Z,{variant:"subtitle1",fontWeight:"bold",children:[a.label,":"]}),(0,d.jsx)(E.Z,{variant:"body1",sx:{marginLeft:"8px",color:"text.secondary"},children:a.value||"No data"})]},b)})})]}),(null==r?void 0:r.report)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(O.Z,{sx:{marginBottom:"16px"},children:[(0,d.jsx)(N.Z,{label:"Feedback",color:"primary"}),((null==w?void 0:null===(o=w.role)|| void 0===o?void 0:o.name)=="super_admin"||(null==w?void 0:null===(p=w.role)|| void 0===p?void 0:p.name)=="admin"||(null==w?void 0:null===(q=w.role)|| void 0===q?void 0:q.name)=="teacher")&&(0,d.jsx)(N.Z,{className:"no-print",onClick:function(){return A(!z)},label:"Edit",color:"success"})]}),z?(0,d.jsx)(aB,{session:r}):(0,d.jsx)(aC,{session:r,setReoprtFlag:t,setView:A})]})]})]})},aB=function(a){var b,c,e,f,g,h,i,j,k,l,m,n=a.session,o=(0,at.ZP)(),p=o.download,q=o.error;return(0,d.jsxs)(ae.ZP,{container:!0,component:ar.Z,children:[(null==n?void 0:n.report.date)&&(0,d.jsx)(ae.ZP,{item:!0,xs:12,children:(0,d.jsxs)(as.ZP,{children:["Submition Date:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:av()(null==n?void 0:n.report.date).format("MMM-D-YYYY")})]})}),(null==n?void 0:n.report.document)&&(null==n?void 0:n.report.document.length)>0&&(0,d.jsx)(ae.ZP,{className:"no-print",item:!0,xs:12,children:(0,d.jsx)(ae.ZP,{container:!0,sx:{p:0},children:null==n?void 0:n.report.document.map(function(a,b){return(0,d.jsx)(ae.ZP,{item:!0,xs:12,sm:6,children:(0,d.jsxs)(as.ZP,{children:["File: ",b+1,(0,d.jsxs)(F.Z,{onClick:function(){return p("https://login-api.zadulquran.com/".concat(a.fileStoragePath),a.fileName)},sx:{p:.5,ml:1,color:"black",border:"1px solid black",fontSize:"16px"},children:["Download",(0,d.jsx)(az.Z,{fontSize:"medium"})]}),q&&(0,d.jsxs)(E.Z,{color:"error",sx:{fontSize:"12px"},children:["Error:"," ",JSON.stringify(q)]})]})},b)})})}),(null===(b=n.patch)|| void 0===b?void 0:null===(c=b.department)|| void 0===c?void 0:c.name)!=="Quran"&&(0,d.jsxs)(ae.ZP,{container:!0,component:ar.Z,children:[(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,children:[(null==n?void 0:n.report.level)&&(0,d.jsxs)(as.ZP,{children:["Grade:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==n?void 0:n.report.level," / 10")})]}),(null==n?void 0:n.report.book)&&(0,d.jsxs)(as.ZP,{children:["Book:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null===(e=null==n?void 0:n.report.book)|| void 0===e?void 0:e.fileName)||"No data"})]})]}),(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,children:[(null==n?void 0:n.report.unit)&&(0,d.jsxs)(as.ZP,{children:["Unit:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:n.report.unit)||"No data"})]}),(null==n?void 0:n.report.topic)&&(0,d.jsxs)(as.ZP,{children:["Topic:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:n.report.topic)||"No data"})]})]})]}),(null===(f=n.patch)|| void 0===f?void 0:null===(g=f.department)|| void 0===g?void 0:g.name)==="Arabic"&&(0,d.jsxs)(d.Fragment,{children:[(null==n?void 0:n.report.newWords)&&(0,d.jsxs)(as.ZP,{children:["New Words:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:n.report.newWords)||"No data"})]}),(null==n?void 0:n.report.expressions)&&(0,d.jsxs)(as.ZP,{children:["Expressions:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:n.report.expressions)||"No data"})]}),(null==n?void 0:n.report.rules)&&(0,d.jsxs)(as.ZP,{children:["Rules:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:n.report.rules)||"No data"})]})]}),(null===(h=n.patch)|| void 0===h?void 0:null===(i=h.department)|| void 0===i?void 0:i.name)==="Quran"&&(0,d.jsxs)(ae.ZP,{container:!0,component:ar.Z,children:[(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,children:[(null==n?void 0:n.report.memorization)&&(0,d.jsxs)(as.ZP,{children:["Memorization:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:n.report.memorization)||"No data"})]}),(null==n?void 0:n.report.revision)&&(0,d.jsxs)(as.ZP,{children:["Revision:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:n.report.revision)||"No data"})]}),(null==n?void 0:n.report.recitation)&&(0,d.jsxs)(as.ZP,{children:["Recitation:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:n.report.recitation)||"No data"})]}),(null==n?void 0:n.report.reading)&&(0,d.jsxs)(as.ZP,{children:["Reading:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:n.report.reading)||"No data"})]})]}),(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,children:[(null==n?void 0:n.report.memorizationLevel)&&(0,d.jsxs)(as.ZP,{children:["Memorization Grade:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==n?void 0:n.report.memorizationLevel," / 10")})]}),(null==n?void 0:n.report.revisionLevel)&&(0,d.jsxs)(as.ZP,{children:["Revision Grade:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==n?void 0:n.report.revisionLevel," / 10")})]}),(null==n?void 0:n.report.tajweed)&&(0,d.jsxs)(as.ZP,{children:["Tajweed:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:n.report.tajweed)||"No data"})]}),(null==n?void 0:n.report.readingLevel)&&(0,d.jsxs)(as.ZP,{children:["Reading Grade:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==n?void 0:n.report.readingLevel," / 10")})]})]})]}),(null==n?void 0:null===(j=n.report)|| void 0===j?void 0:j.homework)&&(0,d.jsxs)(as.ZP,{children:["H.W:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:null===(k=n.report)|| void 0===k?void 0:k.homework)||"No data"})]}),(null==n?void 0:null===(l=n.report)|| void 0===l?void 0:l.notes)&&(0,d.jsxs)(as.ZP,{children:["Notes:",(0,d.jsx)(E.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==n?void 0:null===(m=n.report)|| void 0===m?void 0:m.notes)||"No data"})]})]})},aC=function(a){var b,c,f,g=a.session,h=a.setReoprtFlag,i=a.setView,j=(0,e.useState)(g),k=j[0],l=j[1],q=null==g?void 0:null===(b=g.patch)|| void 0===b?void 0:null===(c=b.department)|| void 0===c?void 0:c.name,r=(0,e.useState)([]),t=r[0],u=r[1],v=[{id:"1",name:"1"},{id:"2",name:"2"},{id:"3",name:"3"},{id:"4",name:"4"},{id:"5",name:"5"},{id:"6",name:"6"},{id:"7",name:"7"},{id:"8",name:"8"},{id:"9",name:"9"},{id:"10",name:"10"},],w=(0,ab.s)(),x=(0,e.useCallback)((f=(0,m.Z)(s().mark(function a(b,c){var d;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,am.t.getDocuments(b,c,"books");case 3:d=a.sent,w()&&u(d.rows.map(function(a){return(0,p.Z)((0,o.Z)({},a),{name:a.fileName})})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),ah.ZP.error(a.t0.message||"failed");case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return f.apply(this,arguments)}),[w]);(0,e.useEffect)(function(){x(100,0)},[x]);var y,z=function(a,b){l(function(c){return(0,p.Z)((0,o.Z)({},c),{report:(0,p.Z)((0,o.Z)({},c.report),(0,n.Z)({},a,b))})})},A=(0,e.useState)(!1),B=A[0],C=A[1],D=(y=(0,m.Z)(s().mark(function a(){var b,c;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return C(!0),a.prev=1,a.next=5,al.updateReport(null===(b=k.report)|| void 0===b?void 0:b.id,k.report);case 5:c=a.sent,ah.ZP.success("Updated successfully"),h(function(a){return!a}),setTimeout(function(){i(!0)},500),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),ah.ZP.error(a.t0.message||"updateReportsFailed");case 14:return a.prev=14,setTimeout(function(){C(!1)},500),a.finish(14);case 17:case"end":return a.stop()}},a,null,[[1,11,14,17]])})),function(){return y.apply(this,arguments)}),E=function(){l(g),i(!0)};return(0,d.jsxs)(ae.ZP,{container:!0,spacing:2,component:ar.Z,children:["Quran"!=q?(0,d.jsx)(d.Fragment,{children:[{label:"Grade",field:"level",type:"select",options:v},{label:"Book",field:"bookId",type:"select",options:t},{label:"Unit",field:"unit",type:"text"},{label:"Topic",field:"topic",type:"text"},].map(function(a){var b=a.label,c=a.field,e=a.type,f=a.options,g=void 0===f?[]:f;return(0,d.jsx)(ae.ZP,{item:!0,xs:6,children:(0,d.jsx)(as.ZP,{children:"text"===e?(0,d.jsx)(Q.Z,{label:b,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return z(c,a.target.value)},sx:{ml:2}}):(0,d.jsxs)(P.Z,{fullWidth:!0,children:[(0,d.jsx)(af.Z,{sx:{top:-6,ml:2},id:c,children:b}),(0,d.jsxs)(ag.Z,{labelId:c,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return z(c,a.target.value)},sx:{ml:2},children:[(0,d.jsx)(R.Z,{value:"",children:"None"}),g.map(function(a){return(0,d.jsx)(R.Z,{value:a.id,children:a.name},a.id)})]})]})})},c)})}):(0,d.jsx)(d.Fragment,{children:[{label:"Memorization",field:"memorization",type:"text"},{label:"Revision",field:"revision",type:"text"},{label:"Tajweed",field:"tajweed",type:"text"},{label:"Recitation",field:"recitation",type:"text"},{label:"Reading",field:"reading",type:"text"},{label:"Memorization Grade",field:"memorizationLevel",type:"select",options:v},{label:"Revision Grade",field:"revisionLevel",type:"select",options:v},{label:"Reading Grade",field:"readingLevel",type:"select",options:v},].map(function(a){var b=a.label,c=a.field,e=a.type,f=a.options,g=void 0===f?[]:f;return(0,d.jsx)(ae.ZP,{item:!0,xs:6,children:(0,d.jsx)(as.ZP,{children:"text"===e?(0,d.jsx)(Q.Z,{label:b,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return z(c,a.target.value)},sx:{ml:2}}):(0,d.jsxs)(P.Z,{fullWidth:!0,children:[(0,d.jsx)(af.Z,{sx:{top:-6,ml:2},id:c,children:b}),(0,d.jsxs)(ag.Z,{labelId:c,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return z(c,a.target.value)},sx:{ml:2},children:[(0,d.jsx)(R.Z,{value:"",children:"None"}),g.map(function(a){return(0,d.jsx)(R.Z,{value:a.id,children:a.name},a.id)})]})]})})},c)})}),"Arabic"==q&&(0,d.jsx)(d.Fragment,{children:[{label:"New Words",field:"newWords",type:"text"},{label:"Expressions",field:"expressions",type:"text"},{label:"Rules",field:"rules",type:"text"},].map(function(a){var b=a.label,c=a.field;return a.type,(0,d.jsx)(ae.ZP,{item:!0,xs:6,children:(0,d.jsx)(as.ZP,{children:(0,d.jsx)(Q.Z,{label:b,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return z(c,a.target.value)},sx:{ml:2}})})},c)})}),[{label:"H.W",field:"homework"},{label:"Notes",field:"notes"},].map(function(a){var b=a.label,c=a.field;return(0,d.jsx)(ae.ZP,{item:!0,xs:6,children:(0,d.jsx)(as.ZP,{children:(0,d.jsx)(Q.Z,{label:b,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return z(c,a.target.value)},sx:{ml:2}})})},c)}),(0,d.jsxs)(ae.ZP,{item:!0,xs:12,container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:[(0,d.jsx)(ae.ZP,{item:!0,children:(0,d.jsx)(K.Z,{variant:"contained",color:"primary",disabled:B,onClick:D,children:B?"Loading...":"Save"})}),(0,d.jsx)(ae.ZP,{item:!0,children:(0,d.jsx)(K.Z,{onClick:E,children:"Cancel"})})]})]})},aD=function(a){var b,c,f,h,i,j,k,n,o,p,r,t,u,v,w,x,y,B,G,H,I,J,L,M,O,T,Z,_,ad=a.row,ae=a.isItemSelected,af=a.labelId,ag=a.handleClick,ah=a.updateSession,ai=a.statuses,aj=a.setReoprtFlag,ak=a.reportFlag;(0,ab.s)();var al=(0,ac.a)().user,am=(0,e.useState)(!1),an=am[0],ao=am[1],ap=(0,e.useState)(!1),ar=ap[0],as=ap[1],at=(0,e.useState)(!1),au=at[0],aw=at[1];(0,z.Z)();var ax,ay=(null==ad?void 0:ad.status)==="done"?"success":(null==ad?void 0:ad.status)==="cancelled"||(null==ad?void 0:ad.status)==="expired"?"error":(null==ad?void 0:ad.status)==="waiting"?"warning":(null==ad?void 0:ad.status)==="rescheduled"?"info":"primary",az=["".concat(null==ad?void 0:null===(b=ad.patch)|| void 0===b?void 0:null===(c=b.teacher)|| void 0===c?void 0:c.firstName," ").concat(null==ad?void 0:null===(f=ad.patch)|| void 0===f?void 0:null===(h=f.teacher)|| void 0===h?void 0:h.lastName)||"no data","".concat(null==ad?void 0:null===(i=ad.patch)|| void 0===i?void 0:null===(j=i.student)|| void 0===j?void 0:j.firstName," ").concat(null==ad?void 0:null===(k=ad.patch)|| void 0===k?void 0:null===(n=k.student)|| void 0===n?void 0:n.lastName)||"no data",(null==ad?void 0:ad.status)?(0,d.jsx)(N.Z,{label:null==ad?void 0:ad.status,color:ay}):"no data","".concat(av()(null==ad?void 0:ad.startedAt).format("YYYY-MM-DD hh:mm A"))||"no data","".concat(av()(null==ad?void 0:ad.endedAt).format("YYYY-MM-DD hh:mm A"))||"no data",(null==ad?void 0:null===(o=ad.patch)|| void 0===o?void 0:null===(p=o.department)|| void 0===p?void 0:p.name)||"no data","".concat(av()(null==ad?void 0:ad.date).format("YYYY-MM-DD"))||"no data","".concat(av()("".concat(null==ad?void 0:ad.date.substr(0,11)).concat(ad.startTime).concat(ad.date.substr(19,24))).format("hh:mm A"))||"no data","".concat(av()("".concat(null==ad?void 0:ad.date.substr(0,11)).concat(ad.endTime).concat(ad.date.substr(19,24))).format("hh:mm A"))||"no data",],aB=function(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){if("object"==typeof a[c]&&null!==a[c]){var d=aB(a[c]);for(var e in d)d.hasOwnProperty(e)&&(b[c+"."+e]=d[e])}else b[c]=a[c]}return b},aC=(0,W.TA)({initialValues:{sessionMethod:null==ad?void 0:ad.sessionMethod,title:null==ad?void 0:ad.title,status:null==ad?void 0:ad.status,date:null==ad?void 0:ad.date,startTime:null==ad?void 0:ad.startTime,endTime:null==ad?void 0:ad.endTime},enableReinitialize:!0,validationSchema:Y.Ry({sessionMethod:Y.Z_().required("sessionMethod is required"),title:Y.Z_().max(255).required("title is required"),status:Y.Z_().max(255).required("status is required"),date:Y.hT().required("date is required"),startTime:Y.Z_().required("startTime is required"),endTime:Y.Z_().required("endTime is required")}),onSubmit:(ax=(0,m.Z)(s().mark(function a(b){var c,d,e,f;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=aB(aC.initialValues),e={},null===(c=Object.entries(d))|| void 0===c||c.map(function(a){var c=(0,q.Z)(a,2),d=c[0],f=c[1],g=$()(b,d);g!==f&&aa()(e,d,g)}),a.next=6,ah(ad.id,e);case 6:(f=a.sent.success)&&ao(!1);case 8:case"end":return a.stop()}},a)})),function(a){return ax.apply(this,arguments)})}),aD=function(){as(!0)},aE=function(){as(!1)},aF=function(){aw(!0)},aG=function(){aw(!1)},aH=function(){var a,b,c=null==ad?void 0:null===(a=ad.patch)|| void 0===a?void 0:null===(b=a.student)|| void 0===b?void 0:b.zoomLink,d=new URL("https://zoom.us/"),e=new URL(c,d);window.open(e.toString(),"new")};return(0,e.useEffect)(function(){if(ad){var a;aC.setValues({sessionMethod:null==ad?void 0:ad.sessionMethod,title:null==ad?void 0:ad.title,status:null==ad?void 0:ad.status,date:null==ad?void 0:null===(a=ad.date)|| void 0===a?void 0:a.substr(0,10),startTime:null==ad?void 0:ad.startTime,endTime:null==ad?void 0:ad.endTime})}},[ad]),(0,d.jsxs)(e.Fragment,{children:[(0,d.jsxs)(C.Z,{sx:{"& > *":{borderBottom:0,cursor:"pointer"}},children:[null==az?void 0:az.map(function(a,b){return(0,d.jsx)(A.Z,{scope:"row",onClick:function(){return ao(!an)},sx:{color:"black"},children:a},b)}),(0,d.jsx)(A.Z,{scope:"row",className:"no-print",sx:{color:"black"},children:(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(null==ad?void 0:ad.status)==="running"&&(null==ad?void 0:ad.startedAt)===null&&(null==ad?void 0:null===(r=ad.zoomSessionMeetings)|| void 0===r?void 0:r.length)<1&&(null==al?void 0:null===(t=al.role)|| void 0===t?void 0:t.name)!=="student"&&(null==al?void 0:null===(u=al.role)|| void 0===u?void 0:u.name)!=="parent"&&(0,d.jsx)(K.Z,{variant:"contained",onClick:function(){ah(ad.id,{startedAt:new Date}),aH()},sx:{fontSize:12,mr:1},size:"small",children:"Start"}),(null==ad?void 0:ad.status)==="running"&&(0,d.jsxs)(d.Fragment,{children:[(null==ad?void 0:ad.startedAt)!=null&&(null==ad?void 0:null===(v=ad.zoomSessionMeetings)|| void 0===v?void 0:v.length)<1&&(0,d.jsx)(K.Z,{variant:"contained",color:"success",onClick:function(){var a;(null==al?void 0:null===(a=al.role)|| void 0===a?void 0:a.name)==="student"&&(null==ad?void 0:ad.joinedAt)===null&&ah(ad.id,{joinedAt:new Date}),aH()},sx:{fontSize:12,mr:1,backgroundColor:"green"},size:"small",children:"Join"}),(null==al?void 0:null===(w=al.role)|| void 0===w?void 0:w.name)!=="student"&&(null==al?void 0:null===(x=al.role)|| void 0===x?void 0:x.name)!=="parent"&&(null==ad?void 0:ad.startedAt)!==null&&(0,d.jsx)(K.Z,{variant:"contained",color:"error",onClick:function(){aD()},sx:{fontSize:12,mr:1},size:"small",children:"End"})]}),(null==ad?void 0:ad.status)!=="done"&&(null==ad?void 0:ad.status)!=="cancelled"&&(null==ad?void 0:ad.status)!=="running"&&((null==al?void 0:null===(y=al.role)|| void 0===y?void 0:y.name)==="admin"||(null==al?void 0:null===(B=al.role)|| void 0===B?void 0:B.name)==="super_admin")&&(0,d.jsx)(K.Z,{variant:"contained",color:"error",onClick:function(){return ah(ad.id,{status:"cancelled"})},sx:{fontSize:12},size:"small",children:"Cancel"})]})}),(0,d.jsx)(A.Z,{scope:"row",className:"no-print",sx:{color:"black"},children:(0,d.jsx)(F.Z,{onClick:function(){return aF()},sx:{p:0,ml:1,mb:1.5},children:(0,d.jsx)(U,{color:"primary"})})}),(0,d.jsx)(A.Z,{className:"no-print",onClick:function(a){return ag(a,ad.id)},role:"checkbox","aria-checked":ae,padding:"checkbox",children:(0,d.jsx)(D.Z,{color:"primary",checked:ae,inputProps:{"aria-labelledby":af}})})]}),(0,d.jsx)(C.Z,{sx:{border:0},children:(0,d.jsxs)(A.Z,{style:{paddingBottom:0,paddingTop:0,border:0},colSpan:12,children:[" ",((null==al?void 0:null===(G=al.role)|| void 0===G?void 0:G.name)==="admin"||(null==al?void 0:null===(H=al.role)|| void 0===H?void 0:H.name)==="super_admin")&&(0,d.jsx)(V.Z,{in:an,timeout:"auto",unmountOnExit:!0,children:(0,d.jsxs)(g.Z,{sx:{margin:1},children:[(0,d.jsx)(E.Z,{variant:"h6",gutterBottom:!0,component:"div",sx:{margin:0},children:"edit"}),(0,d.jsxs)("form",{onSubmit:aC.handleSubmit,children:[(0,d.jsx)(P.Z,{children:(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Session Method",name:"sessionMethod",value:aC.values.sessionMethod,error:Boolean(aC.errors.sessionMethod&&aC.touched.sessionMethod),helperText:aC.touched.sessionMethod&&(null===(I=aC.errors.sessionMethod)|| void 0===I?void 0:I.toString()),InputLabelProps:{shrink:!!aC.values.sessionMethod},fullWidth:!0,required:!0,select:!0,onChange:aC.handleChange,children:l.Q.map(function(a){return(0,d.jsx)(R.Z,{value:a.value,children:a.label},a.value)})})}),(0,d.jsx)(Q.Z,{label:"Title",name:"title",type:"text",onChange:aC.handleChange,value:aC.values.title,error:Boolean(aC.errors.title&&aC.touched.title),helperText:aC.touched.title&&(null===(J=aC.errors.title)|| void 0===J?void 0:J.toString()),size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1}}),(0,d.jsx)(P.Z,{children:(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Status",name:"status",value:aC.values.status,error:Boolean(aC.errors.status&&aC.touched.status),helperText:aC.touched.status&&(null===(L=aC.errors.status)|| void 0===L?void 0:L.toString()),InputLabelProps:{shrink:!!aC.values.status},fullWidth:!0,required:!0,select:!0,onChange:aC.handleChange,children:ai.map(function(a){return(0,d.jsx)(R.Z,{value:a,children:a},a)})})}),(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Date",name:"date",type:"date",onChange:aC.handleChange,value:aC.values.date,error:Boolean(aC.errors.date&&aC.touched.date),helperText:aC.touched.date&&(null===(M=aC.errors.date)|| void 0===M?void 0:M.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Start Time(UTC)",name:"startTime",type:"time",onChange:aC.handleChange,value:aC.values.startTime,error:Boolean(aC.errors.startTime&&aC.touched.startTime),helperText:aC.touched.startTime&&(null===(O=aC.errors.startTime)|| void 0===O?void 0:O.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(Q.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"End Time(UTC)",name:"endTime",type:"time",onChange:aC.handleChange,value:aC.values.endTime,error:Boolean(aC.errors.endTime&&aC.touched.endTime),helperText:aC.touched.endTime&&(null===(T=aC.errors.endTime)|| void 0===T?void 0:T.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(X.Z,{type:"submit",sx:{width:{xs:15,sm:20,md:30,lg:40,xl:50},"& .MuiInputBase-root":{height:40}},variant:"contained",children:"submit"})]})]})})]})}),(0,d.jsx)(S.Z,{maxWidth:"md",open:ar,children:(0,d.jsx)(aq,{setReoprtFlag:aj,reportFlag:ak,sessionDeptName:null===(Z=ad.patch)|| void 0===Z?void 0:null===(_=Z.department)|| void 0===_?void 0:_.name,sessionId:ad.id,updateSession:ah,handleCloseCreateReport:aE})}),(0,d.jsx)(S.Z,{maxWidth:"md",open:au,onClose:aG,className:"bg-none",children:(0,d.jsx)(aA,{session:ad,handleCloseReport:aG,setReoprtFlag:aj})})]})},aE=c(1076),aF=c(1163),aG=c(9103),aH=(0,T.Z)((0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),"Filter"),aI=c(6469),aJ=(0,I.ZP)("div",{shouldForwardProp:function(a){return"open"!==a}})(function(a){var b,c,d=a.theme,e=a.open;return(0,o.Z)((b={flexGrow:1,overflow:"hidden",zIndex:1},(0,n.Z)(b,d.breakpoints.up("lg"),{marginLeft:-380}),(0,n.Z)(b,"transition",d.transitions.create("margin",{easing:d.transitions.easing.sharp,duration:d.transitions.duration.leavingScreen})),b),e&&(c={},(0,n.Z)(c,d.breakpoints.up("lg"),{marginLeft:0}),(0,n.Z)(c,"transition",d.transitions.create("margin",{easing:d.transitions.easing.easeOut,duration:d.transitions.duration.enteringScreen})),c))}),aK=function(a){var b,c,f,i,j,k,l,n,r,z,A,B=(0,ab.s)(),C=(0,aF.useRouter)(),D=(0,ac.a)().user,E=(0,e.useState)([]),F=E[0],G=E[1],I={date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null},P=(0,e.useState)({}),Q=P[0],R=P[1],S=(0,e.useState)([]),T=S[0],U=S[1],V=(0,e.useState)(0),W=V[0],X=V[1],Y=(0,e.useState)(0),Z=Y[0],$=Y[1],_=(0,e.useState)([]),aa=_[0],ad=_[1],ae=(0,e.useState)([]),af=ae[0],ag=ae[1],ai=(0,e.useState)(0),aj=ai[0],ak=ai[1],al=(0,e.useState)(100),am=al[0],an=al[1],ao=(0,e.useState)([]),ap=ao[0],aq=ao[1],ar=(0,q.Z)((0,aI.Z)("waiting","sessions-selected-tab"),2),as=ar[0],at=ar[1],au=(0,e.useRef)(null),av=(0,e.useState)(!1),aw=av[0],ax=av[1],az=(0,e.useState)(!1),aA=az[0],aB=az[1],aC=["waiting","expired","running","done","cancelled","absent","rescheduled",],aK=[{label:"all",value:"",count:aj},{label:"waiting",value:"waiting",count:null===(b=aa.find(function(a){return a.status.match("waiting")}))|| void 0===b?void 0:b.count},{label:"running",value:"running",count:null===(c=aa.find(function(a){return a.status.match("running")}))|| void 0===c?void 0:c.count},{label:"done",value:"done",count:null===(f=aa.find(function(a){return a.status.match("done")}))|| void 0===f?void 0:f.count},{label:"cancelled",value:"cancelled",count:null===(i=aa.find(function(a){return a.status.match("cancelled")}))|| void 0===i?void 0:i.count},{label:"expired",value:"expired",count:null===(j=aa.find(function(a){return a.status.match("expired")}))|| void 0===j?void 0:j.count},{label:"absent",value:"absent",count:null===(k=aa.find(function(a){return a.status.match("absent")}))|| void 0===k?void 0:k.count},{label:"rescheduled",value:"rescheduled",count:null===(l=aa.find(function(a){return a.status.match("rescheduled")}))|| void 0===l?void 0:l.count},],aL=null==ap?void 0:ap.map(function(a){var b;return{label:a.name,value:a.duration,count:null===(b=af.find(function(b){return(null==b?void 0:b.sessionTypeId)===a.id}))|| void 0===b?void 0:b.count}}),aM=function(a){if(a.target.checked){G(T.map(function(a){return a.id}));return}G([])},aN=function(a,b){var c=F.indexOf(b),d=[];-1===c?d=d.concat(F,b):0===c?d=d.concat(F.slice(1)):c===F.length-1?d=d.concat(F.slice(0,-1)):c>0&&(d=d.concat(F.slice(0,c),F.slice(c+1))),G(d)},aO=function(a,b){at(b),aP({limit:am,offset:0,status:b})},aP=(0,e.useCallback)((r=(0,m.Z)(s().mark(function a(b){var c,d;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=4,aE.Q.getSessions((0,p.Z)((0,o.Z)({},b),{studentId:b.studentId||(null==Q?void 0:Q.studentId)||(null==C?void 0:null===(c=C.query)|| void 0===c?void 0:c.student)||null}));case 4:d=a.sent,B()&&(U(d.rows),$(d.count),ad(d.statusCount),ag(d.typesCount),ak(d.totalCount)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(a){return r.apply(this,arguments)}),[B,Q]),aQ=(z=(0,m.Z)(s().mark(function a(){var b,c;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=ah.ZP.loading("delete"),a.prev=1,a.next=4,aE.Q.deleteSession(F);case 4:if(!(c=a.sent)){a.next=13;break}return ah.ZP.dismiss(b),ah.ZP.success("deleteSessionSuccess"),aP({limit:am,offset:W,status:as}),G([]),a.abrupt("return",{success:!0});case 13:return ah.ZP.dismiss(b),ah.ZP.error("deleteSessionFailed"),a.abrupt("return",{success:!1});case 16:a.next=23;break;case 18:return a.prev=18,a.t0=a.catch(1),ah.ZP.dismiss(b),ah.ZP.error(a.t0.message||"deleteSessionsFailed"),a.abrupt("return",{success:!1});case 23:case"end":return a.stop()}},a,null,[[1,18]])})),function(){return z.apply(this,arguments)}),aR=(A=(0,m.Z)(s().mark(function a(b,c){var d,e;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=ah.ZP.loading("update"),a.prev=1,a.next=4,aE.Q.updateSession(b,c);case 4:if(!(e=a.sent)){a.next=12;break}return ah.ZP.dismiss(d),ah.ZP.success("updateSessionSuccess"),aP({limit:am,offset:W,status:as}),a.abrupt("return",{success:!0});case 12:return ah.ZP.dismiss(d),ah.ZP.error("updateSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),ah.ZP.dismiss(d),ah.ZP.error(a.t0.message||"updateSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a,b){return A.apply(this,arguments)}),aS=(0,e.useCallback)((0,m.Z)(s().mark(function a(){var b;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aE.Q.getSessionTypes();case 3:b=a.sent,B()&&aq(b.resp),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[B]);(0,e.useEffect)(function(){aS()},[]),(0,e.useEffect)(function(){var a;aP({limit:am,offset:W,status:as,studentId:(null==C?void 0:null===(a=C.query)|| void 0===a?void 0:a.student)||null})},[aA]),(0,e.useEffect)(function(){var a;(null==C?void 0:null===(a=C.query)|| void 0===a?void 0:a.code)&&aW(C.query.code,C.query.sessionId)},[C.query]);var aT,aU=function(a,b){X(b),aP({limit:am,offset:b*am,status:as})},aV=function(a){an(parseInt(a.target.value,10)),X(0),aP({limit:parseInt(a.target.value,10),offset:0,status:as})},aW=(0,e.useCallback)((aT=(0,m.Z)(s().mark(function a(b,c){var d;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aE.Q.startMeeting(b,c);case 3:(d=a.sent).success&&(window.history.replaceState(null,"","/sessions"),window.open(d.meetingUrl,"_blank"),aP({limit:am,offset:W,status:as})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),window.history.replaceState(null,"","/sessions"),ah.ZP.error((null===a.t0|| void 0===a.t0?void 0:a.t0.message)||"failed to start session");case 11:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return aT.apply(this,arguments)}),[B]),aX=function(a){R(a),aP((0,o.Z)({status:as,limit:am,offset:0},a))},aY=function(){aX(I)},aZ=function(){ax(function(a){return!a})},a$=function(){ax(!1)},a_=(0,e.useRef)(null),a0=(0,ay.useReactToPrint)({contentRef:a_,ignoreGlobalStyles:!1});return(0,d.jsxs)(g.Z,{sx:{width:"100%",scrollBehavior:"auto"},children:[["super_admin","admin"].includes(null==D?void 0:null===(n=D.role)|| void 0===n?void 0:n.name)&&(0,d.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)(K.Z,{endIcon:(0,d.jsx)(aH,{fontSize:"small"}),onClick:aZ,sx:{ml:1,mt:1},variant:"outlined",children:"Filters"}),(0,d.jsx)(K.Z,{endIcon:(0,d.jsx)(J.Z,{fontSize:"small"}),onClick:function(){return a0()},sx:{ml:1,mt:1},variant:"outlined",children:"Save as pdf"})]}),(0,d.jsx)(y.Z,{elevation:12,sx:(0,o.Z)({mt:.5},{bgcolor:function(a){return(0,t.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,d.jsxs)(L.Z,{sx:{backgroundColor:"white"},children:[(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(M.Z,{TabIndicatorProps:{style:{display:"none"}},onChange:aO,scrollButtons:"auto",sx:{px:2},textColor:"primary",value:as,variant:"scrollable",children:aK.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"50px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},icon:(0,d.jsx)(N.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"neutral.600"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(O.Z,{}),(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(M.Z,{TabIndicatorProps:{style:{display:"none"}},scrollButtons:"auto",sx:{px:2},textColor:"primary",value:as,variant:"scrollable",children:null==aL?void 0:aL.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"60px",mt:"auto",mb:"auto",cursor:"unset",color:"primary.dark"},icon:(0,d.jsx)(N.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"text.primary"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(O.Z,{}),(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(0,d.jsx)(aG.H,{containerRef:au,onClose:a$,open:aw,applyFilters:function(a){return aX(a)},clearFilters:aY}),(0,d.jsx)(aJ,{open:aw}),(0,d.jsx)(g.Z,{sx:{width:"100%"},children:(0,d.jsx)(w.Z,{children:(0,d.jsxs)(u.Z,{ref:a_,"aria-labelledby":"tableTitle",size:"small",children:[(0,d.jsx)("style",{children:"\n                                            @media print {\n                                                body {\n                                                    -webkit-print-color-adjust: exact;\n                                                }\n                                                table {\n                                                    padding:10px\n                                                }\n                                                .no-print {\n                                                    display: none !important;\n                                                }\n                                            }\n                                        "}),(0,d.jsx)(H,{headCells:[{id:"teacher",numeric:!1,disablePadding:!0,label:"Teacher"},{id:"student",numeric:!1,disablePadding:!0,label:"Student"},{id:"status",numeric:!1,disablePadding:!0,label:"Status"},{id:"startedAt",numeric:!1,disablePadding:!0,label:"Started At"},{id:"endedAt",numeric:!1,disablePadding:!0,label:"Ended At"},{id:"subject",numeric:!0,disablePadding:!1,label:"Subject"},{id:"date",numeric:!0,disablePadding:!1,label:"Date"},{id:"startTime",numeric:!0,disablePadding:!1,label:"Start Time"},{id:"endTime",numeric:!0,disablePadding:!1,label:"End Time"},],numSelected:F.length,onSelectAllClick:aM,deleteSession:aQ,rowCount:T.length}),(0,d.jsx)(v.Z,{children:T.map(function(a,b){var c=F.includes(a.id),e="enhanced-table-checkbox-".concat(b);return(0,d.jsx)(aD,{row:a,handleClick:aN,isItemSelected:c,labelId:e,updateSession:aR,statuses:aC,setReoprtFlag:aB,reportFlag:aA},null==a?void 0:a.id)})})]})})})]}),(0,d.jsx)(x.Z,{component:"div",count:Z,rowsPerPageOptions:[10,50,100,200,500],page:W,rowsPerPage:am,onPageChange:aU,onRowsPerPageChange:aV})]})})]})},aL=c(4669),aM=function(a){var b,c,f=a.sessions,h=a.contentRef,i=a.handleGetSessions,j=a.reportFlag,k=a.setReoprtFlag,l=(0,e.useState)(""),n=l[0],o=l[1],p=null==f?void 0:f.reduce(function(a,b){var c=av()(b.date).format("YYYY-MM");return a[c]=a[c]||[],a[c].push(b),a},{}),q=(0,e.useState)([]),r=q[0],t=q[1],x=["waiting","expired","running","done","cancelled","absent","rescheduled",],z=function(a){if(a.target.checked){t(f.map(function(a){return a.id}));return}t([])},A=function(a,b){var c=r.indexOf(b),d=[];-1===c?d=d.concat(r,b):0===c?d=d.concat(r.slice(1)):c===r.length-1?d=d.concat(r.slice(0,-1)):c>0&&(d=d.concat(r.slice(0,c),r.slice(c+1))),t(d)},B=(b=(0,m.Z)(s().mark(function a(){var b,c;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=ah.ZP.loading("delete"),a.prev=1,a.next=4,aE.Q.deleteSession(r);case 4:if(!(c=a.sent)){a.next=13;break}return ah.ZP.dismiss(b),ah.ZP.success("deleteSessionSuccess"),i(),t([]),a.abrupt("return",{success:!0});case 13:return ah.ZP.dismiss(b),ah.ZP.error("deleteSessionFailed"),a.abrupt("return",{success:!1});case 16:a.next=23;break;case 18:return a.prev=18,a.t0=a.catch(1),ah.ZP.dismiss(b),ah.ZP.error(a.t0.message||"deleteSessionsFailed"),a.abrupt("return",{success:!1});case 23:case"end":return a.stop()}},a,null,[[1,18]])})),function(){return b.apply(this,arguments)}),C=(c=(0,m.Z)(s().mark(function a(b,c){var d,e;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=ah.ZP.loading("update"),a.prev=1,a.next=4,aE.Q.updateSession(b,c);case 4:if(!(e=a.sent)){a.next=12;break}return ah.ZP.dismiss(d),ah.ZP.success("updateSessionSuccess"),i(),a.abrupt("return",{success:!0});case 12:return ah.ZP.dismiss(d),ah.ZP.error("updateSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),ah.ZP.dismiss(d),ah.ZP.error(a.t0.message||"updateSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a,b){return c.apply(this,arguments)}),D=p[n];return(0,d.jsx)(g.Z,{sx:{p:2},children:n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.Z,{sx:{display:"flex",justifyContent:"flex-end",width:"100%"},children:(0,d.jsxs)(K.Z,{onClick:function(){return o("")},sx:{m:2,gap:1},variant:"outlined",children:[(0,d.jsx)(aL.Z,{fontSize:"small",className:"no-print"}),"Back"]})}),(0,d.jsx)(w.Z,{children:(0,d.jsxs)(u.Z,{ref:h,"aria-labelledby":"tableTitle",size:"small",children:[(0,d.jsx)("style",{children:"\n													@media print {\n															body {\n																	-webkit-print-color-adjust: exact;\n															}\n															table {\n																	padding:10px;\n															}\n															.no-print {\n																	display: none !important;\n															}\n													}\n											"}),(0,d.jsx)(H,{headCells:[{id:"teacher",numeric:!1,disablePadding:!0,label:"Teacher"},{id:"student",numeric:!1,disablePadding:!0,label:"Student"},{id:"status",numeric:!1,disablePadding:!0,label:"Status"},{id:"startedAt",numeric:!1,disablePadding:!0,label:"Started At"},{id:"endedAt",numeric:!1,disablePadding:!0,label:"Ended At"},{id:"subject",numeric:!0,disablePadding:!1,label:"Subject"},{id:"date",numeric:!0,disablePadding:!1,label:"Date"},{id:"startTime",numeric:!0,disablePadding:!1,label:"Start Time"},{id:"endTime",numeric:!0,disablePadding:!1,label:"End Time"},],numSelected:r.length,onSelectAllClick:z,deleteSession:B,rowCount:null==D?void 0:D.length}),(0,d.jsx)(v.Z,{children:null==D?void 0:D.map(function(a,b){var c=r.includes(a.id);return(0,d.jsx)(aD,{row:a,handleClick:A,isItemSelected:c,labelId:"enhanced-table-checkbox-".concat(b),updateSession:C,statuses:x,setReoprtFlag:k,reportFlag:j},a.id)})})]})})]}):(0,d.jsx)(ae.ZP,{container:!0,spacing:3,children:Object.keys(p).map(function(a){var b;return(0,d.jsx)(ae.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,d.jsxs)(y.Z,{onClick:function(){return o(a)},elevation:3,sx:{backgroundColor:"primary.main",color:"white",fontWeight:"bold",fontSize:"20px",textAlign:"center",padding:"16px",borderRadius:"8px",cursor:"pointer",transition:"0.3s","&:hover":{backgroundColor:"primary.dark"}},children:[av()(a,"YYYY-MM").format("MMMM YYYY")," (",(null===(b=p[a])|| void 0===b?void 0:b.length)||0,")"]})},a)})})})},aN=aM,aO=(0,I.ZP)("div",{shouldForwardProp:function(a){return"open"!==a}})(function(a){var b,c,d=a.theme,e=a.open;return(0,o.Z)((b={flexGrow:1,overflow:"hidden",zIndex:1},(0,n.Z)(b,d.breakpoints.up("lg"),{marginLeft:-380}),(0,n.Z)(b,"transition",d.transitions.create("margin",{easing:d.transitions.easing.sharp,duration:d.transitions.duration.leavingScreen})),b),e&&(c={},(0,n.Z)(c,d.breakpoints.up("lg"),{marginLeft:0}),(0,n.Z)(c,"transition",d.transitions.create("margin",{easing:d.transitions.easing.easeOut,duration:d.transitions.duration.enteringScreen})),c))}),aP=function(){var a,b,c,f,i,j,k,l,n,r=(0,ab.s)(),u=(0,aF.useRouter)(),v=(0,ac.a)().user,w={date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null},z=(0,e.useState)({}),A=z[0],B=z[1],C=(0,e.useState)([]),D=C[0],E=C[1],F=(0,e.useState)(0),G=F[0],H=F[1],I=(0,e.useState)(0),P=I[0],Q=I[1],R=(0,e.useState)([]),S=R[0],T=R[1],U=(0,e.useState)([]),V=U[0],W=U[1],X=(0,e.useState)(0),Y=X[0],Z=X[1],$=(0,e.useState)(100),_=$[0],aa=$[1],ad=(0,e.useState)([]),ae=ad[0],af=ad[1],ag=(0,q.Z)((0,aI.Z)("waiting","sessions-selected-tab"),2),ai=ag[0],aj=ag[1],ak=(0,e.useRef)(null),al=(0,e.useState)(!1),am=al[0],an=al[1],ao=(0,e.useState)(!1),ap=ao[0],aq=ao[1],ar=[{label:"all",value:"",count:Y},{label:"waiting",value:"waiting",count:null===(a=S.find(function(a){return a.status.match("waiting")}))|| void 0===a?void 0:a.count},{label:"running",value:"running",count:null===(b=S.find(function(a){return a.status.match("running")}))|| void 0===b?void 0:b.count},{label:"done",value:"done",count:null===(c=S.find(function(a){return a.status.match("done")}))|| void 0===c?void 0:c.count},{label:"cancelled",value:"cancelled",count:null===(f=S.find(function(a){return a.status.match("cancelled")}))|| void 0===f?void 0:f.count},{label:"expired",value:"expired",count:null===(i=S.find(function(a){return a.status.match("expired")}))|| void 0===i?void 0:i.count},{label:"absent",value:"absent",count:null===(j=S.find(function(a){return a.status.match("absent")}))|| void 0===j?void 0:j.count},{label:"rescheduled",value:"rescheduled",count:null===(k=S.find(function(a){return a.status.match("rescheduled")}))|| void 0===k?void 0:k.count},],as=null==ae?void 0:ae.map(function(a){var b;return{label:a.name,value:a.duration,count:null===(b=V.find(function(b){return(null==b?void 0:b.sessionTypeId)===a.id}))|| void 0===b?void 0:b.count}}),at=function(a,b){aj(b),av({limit:_,offset:0,status:b})},au=function(){av({limit:_,offset:G,status:ai})},av=(0,e.useCallback)((n=(0,m.Z)(s().mark(function a(b){var c,d;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=4,aE.Q.getSessions((0,p.Z)((0,o.Z)({},b),{studentId:b.studentId||(null==A?void 0:A.studentId)||(null==u?void 0:null===(c=u.query)|| void 0===c?void 0:c.student)||null}));case 4:d=a.sent,r()&&(E(d.rows),Q(d.count),T(d.statusCount),W(d.typesCount),Z(d.totalCount)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(a){return n.apply(this,arguments)}),[r,A]),aw=(0,e.useCallback)((0,m.Z)(s().mark(function a(){var b;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aE.Q.getSessionTypes();case 3:b=a.sent,r()&&af(b.resp),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[r]);(0,e.useEffect)(function(){aw()},[]),(0,e.useEffect)(function(){var a;av({limit:_,offset:G,status:ai,studentId:(null==u?void 0:null===(a=u.query)|| void 0===a?void 0:a.student)||null})},[ap]),(0,e.useEffect)(function(){var a;(null==u?void 0:null===(a=u.query)|| void 0===a?void 0:a.code)&&aB(u.query.code,u.query.sessionId)},[u.query]);var ax,az=function(a,b){H(b),av({limit:_,offset:b*_,status:ai})},aA=function(a){aa(parseInt(a.target.value,10)),H(0),av({limit:parseInt(a.target.value,10),offset:0,status:ai})},aB=(0,e.useCallback)((ax=(0,m.Z)(s().mark(function a(b,c){var d;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aE.Q.startMeeting(b,c);case 3:(d=a.sent).success&&(window.history.replaceState(null,"","/sessions"),window.open(d.meetingUrl,"_blank"),av({limit:_,offset:G,status:ai})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),window.history.replaceState(null,"","/sessions"),ah.ZP.error((null===a.t0|| void 0===a.t0?void 0:a.t0.message)||"failed to start session");case 11:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return ax.apply(this,arguments)}),[r]),aC=function(a){B(a),av((0,o.Z)({status:ai,limit:_,offset:0},a))},aD=function(){aC(w)},aJ=function(){an(function(a){return!a})},aK=function(){an(!1)},aL=(0,e.useRef)(null),aM=(0,ay.useReactToPrint)({contentRef:aL,ignoreGlobalStyles:!1});return(0,d.jsxs)(g.Z,{sx:{width:"100%",scrollBehavior:"auto"},children:[["super_admin","admin"].includes(null==v?void 0:null===(l=v.role)|| void 0===l?void 0:l.name)&&(0,d.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)(K.Z,{endIcon:(0,d.jsx)(aH,{fontSize:"small"}),onClick:aJ,sx:{ml:1,mt:1},variant:"outlined",children:"Filters"}),(0,d.jsx)(K.Z,{endIcon:(0,d.jsx)(J.Z,{fontSize:"small"}),onClick:function(){return aM()},sx:{ml:1,mt:1},variant:"outlined",children:"Save as pdf"})]}),(0,d.jsx)(y.Z,{elevation:12,sx:(0,o.Z)({mt:.5},{bgcolor:function(a){return(0,t.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,d.jsxs)(L.Z,{sx:{backgroundColor:"white"},children:[(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(M.Z,{TabIndicatorProps:{style:{display:"none"}},onChange:at,scrollButtons:"auto",sx:{px:2},textColor:"primary",value:ai,variant:"scrollable",children:ar.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"50px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},icon:(0,d.jsx)(N.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"neutral.600"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(O.Z,{}),(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(M.Z,{TabIndicatorProps:{style:{display:"none"}},scrollButtons:"auto",sx:{px:2},textColor:"primary",value:ai,variant:"scrollable",children:null==as?void 0:as.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"60px",mt:"auto",mb:"auto",cursor:"unset",color:"primary.dark"},icon:(0,d.jsx)(N.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"text.primary"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(O.Z,{}),(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(0,d.jsx)(aG.H,{containerRef:ak,onClose:aK,open:am,applyFilters:function(a){return aC(a)},clearFilters:aD}),(0,d.jsx)(aO,{open:am}),(0,d.jsx)(g.Z,{sx:{width:"100%"},children:(0,d.jsx)(aN,{sessions:D,contentRef:aL,handleGetSessions:au,reportFlag:ap,setReoprtFlag:aq})})]}),(0,d.jsx)(x.Z,{component:"div",count:P,rowsPerPageOptions:[10,50,100,200,500],page:G,rowsPerPage:_,onPageChange:az,onRowsPerPageChange:aA})]})})]})},aQ=c(1132),aR=function(){var a=(0,e.useState)("1"),b=a[0],c=a[1],f=function(a,b){c(b)};return(0,d.jsx)(g.Z,{sx:{width:"100%",typography:"body1",zoom:"77%"},children:(0,d.jsxs)(i.ZP,{value:b,children:[(0,d.jsx)(g.Z,{sx:{borderBottom:1,borderColor:"divider",p:"10px 30px"},children:(0,d.jsxs)(j.Z,{TabIndicatorProps:{style:{display:"none"}},variant:"scrollable",scrollButtons:"auto",onChange:f,"aria-label":"Session options",children:[(0,d.jsx)(h.Z,{sx:{minHeight:"45px",fontSize:"16px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},label:"List Session",value:"1"}),(0,d.jsx)(h.Z,{sx:{minHeight:"45px",fontSize:"16px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},label:"Group Session",value:"2"}),(0,d.jsx)(h.Z,{sx:{minHeight:"45px",fontSize:"16px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},label:"Add Session",value:"3"})]})}),(0,d.jsx)(k.Z,{value:"1",sx:{p:.5},children:(0,d.jsx)(aK,{roleId:4})}),(0,d.jsx)(k.Z,{value:"2",sx:{p:.5},children:(0,d.jsx)(aP,{})}),(0,d.jsx)(k.Z,{value:"3",children:(0,d.jsx)(l.Z,{})})]})})};aR.getLayout=function(a){return(0,d.jsx)(aQ.a,{children:(0,d.jsx)(f.c,{children:a})})};var aS=aR}},function(a){a.O(0,[69,805,326,307,659,661,266,886,918,764,564,349,472,723,286,774,888,179],function(){var b;return a(a.s=4587)}),_N_E=a.O()}])