(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{4587:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sessions",function(){return c(4324)}])},8935:function(a,b,c){"use strict";c.d(b,{u:function(){return k}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(2071),j=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getDepts=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){var e={limit:a,offset:b};try{var f=h.E.get("/department/?".concat((0,i.K)(e)));c(f)}catch(g){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.createDept=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.post("/department/create",{name:a});b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateDept=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/department/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteDepts=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/department/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),k=new j},4150:function(a,b,c){"use strict";c.d(b,{t:function(){return k}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(2071),j=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getDocuments=function(a,b,c){return(0,d.Z)(g().mark(function d(){return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(d,e){var f={limit:a,offset:b,documentType:c};try{var g=h.E.get("/documents/?".concat((0,i.K)(f)));d(g)}catch(j){e(Error("Internal server error"))}}));case 1:case"end":return d.stop()}},d)}))()},b.createDocument=function(a,b,c){return(0,d.Z)(g().mark(function e(){return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,d.Z)(g().mark(function d(e,f){var i;return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:try{i=h.E.post('/documents/upload?data={"documentType": '.concat(JSON.stringify(a),', "userId": ').concat(c,"}"),b,{contentType:"multipart/form-data"}),e(i)}catch(g){f(Error("Internal server error"))}case 1:case"end":return d.stop()}},d)}));return function(a,b){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}))()},b.updateDocument=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/documents/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteDocument=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/documents/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),k=new j},2455:function(a,b,c){"use strict";c.d(b,{B:function(){return k}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(2071),j=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getUsers=function(a,b,c,e,f){return(0,d.Z)(g().mark(function d(){return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(d,g){var j="/user/",k={limit:a,offset:b*a,roleId:c};try{if(e&&c){j="/user/?".concat((0,i.K)(k),"&roleId=").concat(e,"&roleId=").concat(f);var l=h.E.get(j);d(l)}else{var m=h.E.get("/user/?".concat((0,i.K)(k)));d(m)}}catch(n){g(Error("Internal server error"))}}));case 1:case"end":return d.stop()}},d)}))()},b.getAllParents=function(){return(0,d.Z)(g().mark(function a(){return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a,b){try{var c=h.E.get("/user/all/parents");a(c)}catch(d){b(Error("Internal server error"))}}));case 1:case"end":return a.stop()}},a)}))()},b.getUserById=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.get("/user/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.deleteUser=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/user/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.createUser=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.post("/user/create",a);b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateUser=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/user/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},a}(),k=new j},6915:function(a,b,c){"use strict";c.d(b,{"_":function(){return k}});var d=c(4251),e=c(5893),f=c(2734),g=c(1796),h=c(3252),i=c(3184),j=c(3816),k=function(a){var b=a.headCells;return(0,f.Z)(),(0,e.jsx)(i.Z,{sx:(0,d.Z)({width:"100%",mb:2},{bgcolor:function(a){return(0,g.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,e.jsx)(j.Z,{children:b.map(function(a,b){return(0,e.jsx)(h.Z,{padding:a.disablePadding?"none":"normal",sx:{color:function(a){return a.palette.info.main}},children:a.label},a.id)})})})}},4324:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return a8}});var d=c(5893),e=c(7294),f=c(9633),g=c(7357),h=c(44),i=c(5670),j=c(6568),k=c(4769),l=c(4727),m=c(4251),n=c(2875),o=c(4051),p=c.n(o),q=c(5861),r=c(2175),s=c(8396),t=c(7533),u=c(4666),v=c(7645),w=c(6580),x=c(6886),y=c(135),z=c(4054),A=c(8972),B=c(1425),C=c(3321),D=c(8987),E=c(6310),F=c(6501),G=c(2455),H=c(5983),I=c(6993),J=c(1029),K=c(7292),L=c(9897),M=c(570),N=c(4455),O=c(8935),P=c(5815),Q=c(5485),R=c(381),S=c.n(R),T=function(a,b){return S()(a).locale("en").format("YYYY-MM-DD")},U=c(2071),V=function(){function a(){(0,P.Z)(this,a)}var b=a.prototype;return b.getSessions=function(a){return(0,l.Z)(p().mark(function b(){return p().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=a.limit,e=a.offset,f=a.status,g=a.teacherId,h=a.studentId,i=a.departmentId,j=a.date,k={limit:d,offset:e,status:f,teacherId:g,studentId:h,departmentId:i,date:j&&null!==j.from&&""!==j.from&&null!==j.to&&""!==j.to&&"".concat(T(j.from,"from"),"to").concat(T(j.to),"&")},l=Q.E.get("/sessions?".concat((0,U.K)(k)));b(l)}catch(m){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.getSessionById=function(a){return(0,l.Z)(p().mark(function b(){return p().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=Q.E.get("/sessions/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.getSessionTypes=function(){return(0,l.Z)(p().mark(function a(){return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a,b){try{var c=Q.E.get("/sessions/types");a(c)}catch(d){b(Error("Internal server error"))}}));case 1:case"end":return a.stop()}},a)}))()},b.deleteSession=function(a){return(0,l.Z)(p().mark(function b(){return p().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=Q.E.delete("/sessions/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.createSession=function(a){return(0,l.Z)(p().mark(function b(){return p().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=Q.E.post("/sessions/create/",a);b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateSession=function(a,b){return(0,l.Z)(p().mark(function c(){return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=Q.E.put("/sessions/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.startMeeting=function(a,b){return(0,l.Z)(p().mark(function c(){return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=Q.E.get("/sessions/oauth/callback",{code:a,sessionId:b});c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},a}(),W=new V,X=c(4747),Y=c(5697),Z=c.n(Y),$=c(7109),_=c(1233),aa=c(948),ab=c(8169),ac=(0,ab.Z)((0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),"Search"),ad=c(720),ae=c(2740),af=(0,ab.Z)((0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),"ArrowRight"),ag=c(6486),ah=(0,aa.ZP)(t.ZP)({flexShrink:0,width:305,"& .MuiDrawer-paper":{position:"relative",width:305,backgroundColor:"white"}}),ai=(0,aa.ZP)(t.ZP)({maxWidth:"100%",width:305,"& .MuiDrawer-paper":{height:"calc(100% - 64px)",maxWidth:"100%",top:64,width:305}}),aj=function(a){var b,c={date:{from:"",to:""},teacherId:null,departmentId:null,studentId:null},f=(0,N.s)(),h=(0,e.useState)([]),i=h[0],j=h[1],k=(0,e.useState)([]),o=k[0],r=k[1],t=(0,e.useState)([]),u=t[0],v=t[1],w=(0,e.useState)(c),x=w[0],z=w[1],B=a.containerRef,E=a.onClose,F=a.open,H=a.applyFilters,I=a.clearFilters,J=a.loading,K=a.isCreatePage,L=(0,X.Z)(a,["containerRef","onClose","open","applyFilters","clearFilters","loading","isCreatePage"]),M=function(a){z(a)},P=(0,e.useRef)(null),Q=(0,e.useRef)(null),R=(0,e.useRef)(null),S=(0,e.useRef)({date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null}),T=(0,s.Z)(function(a){return a.breakpoints.up("lg")}),U=(0,e.useRef)((0,ag.debounce)(function(a){var b;null==M||M((0,n.Z)((0,m.Z)({},x),{teacherId:(null===(b=P.current)|| void 0===b?void 0:b.value)?+P.current.value:null})),H((0,n.Z)((0,m.Z)({},x),{teacherId:a}))},2e3)).current,V=(0,e.useRef)((0,ag.debounce)(function(a){var b;null==M||M((0,n.Z)((0,m.Z)({},x),{studentId:(null===(b=Q.current)|| void 0===b?void 0:b.value)?+Q.current.value:null})),H((0,n.Z)((0,m.Z)({},x),{studentId:a}))},2e3)).current,W=(0,e.useRef)((0,ag.debounce)(function(a){var b;null==M||M((0,n.Z)((0,m.Z)({},x),{departmentId:(null===(b=R.current)|| void 0===b?void 0:b.value)?+R.current.value:null})),H((0,n.Z)((0,m.Z)({},x),{departmentId:a}))},2e3)).current,Y=function(a){var b=(0,n.Z)((0,m.Z)({},x),{date:{from:a[0],to:a[1]}});null==M||M(b)},Z=function(){z(c),null==I||I()},aa=(0,e.useCallback)((b=(0,l.Z)(p().mark(function a(b,c){var d,e,g;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,G.B.getUsers(b,c,"teacher","student");case 3:d=a.sent,f()&&(e=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===4}),g=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===3}),r(e),j(g)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,c){return b.apply(this,arguments)}),[f]),ab=(0,e.useCallback)((0,l.Z)(p().mark(function a(){var b;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,O.u.getDepts("ALL",-1);case 3:b=a.sent,f()&&v(b.rows),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[f]);(0,e.useEffect)(function(){aa("ALL",-1),ab()},[]),(0,e.useEffect)(function(){S.current=x},[x]);var aj=(0,d.jsxs)(g.Z,{sx:{pb:3,pt:{xs:3},px:3},children:[(0,d.jsx)(g.Z,{component:"form",children:(0,d.jsx)(y.Z,{label:"Teacher",name:"teacherId",value:x.teacherId,onKeyDown:function(a){"Enter"===a.key&&(a.preventDefault(),U(a.target.value))},inputProps:{ref:P},InputProps:{startAdornment:(0,d.jsx)($.Z,{position:"start",children:(0,d.jsx)(ac,{fontSize:"small"})})},fullWidth:!0,select:!0,onChange:function(a){null==M||M((0,n.Z)((0,m.Z)({},x),{teacherId:a.target.value}))},children:i.map(function(a){return(0,d.jsxs)(A.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})}),(0,d.jsx)(g.Z,{component:"form",children:(0,d.jsx)(y.Z,{sx:{mt:3},label:"Student",name:"studentId",value:x.studentId,onKeyDown:function(a){"Enter"===a.key&&(a.preventDefault(),V(a.target.value))},inputProps:{ref:Q},InputProps:{startAdornment:(0,d.jsx)($.Z,{position:"start",children:(0,d.jsx)(ac,{fontSize:"small"})})},fullWidth:!0,select:!0,onChange:function(a){null==M||M((0,n.Z)((0,m.Z)({},x),{studentId:a.target.value}))},children:o.map(function(a){return(0,d.jsxs)(A.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})}),(0,d.jsx)(g.Z,{component:"form",children:(0,d.jsx)(y.Z,{sx:{mt:3},label:"Subject",name:"departmentId",value:x.departmentId,onKeyDown:function(a){"Enter"===a.key&&(a.preventDefault(),W(a.target.value))},inputProps:{ref:R},InputProps:{startAdornment:(0,d.jsx)($.Z,{position:"start",children:(0,d.jsx)(ac,{fontSize:"small"})})},fullWidth:!0,select:!0,onChange:function(a){null==M||M((0,n.Z)((0,m.Z)({},x),{departmentId:a.target.value}))},children:u.map(function(a){return(0,d.jsx)(A.Z,{value:a.id,children:a.name},a.id)})})}),(0,d.jsx)(q.Z,{color:"textSecondary",sx:{mt:4},variant:"subtitle2",children:"Date"}),(0,d.jsx)(_.Z,{spacing:2,sx:{mt:2},children:(0,d.jsx)(ad._,{dateAdapter:ae.H,children:(0,d.jsxs)(g.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,d.jsx)(y.Z,{label:"from",name:"from",type:"date",sx:{width:"50%"},onChange:function(a){Y([a.target.value,x.date.to,])},value:x.date.from,InputLabelProps:{shrink:!0}}),(0,d.jsx)(af,{fontSize:"inherit"})," ",(0,d.jsx)(y.Z,{label:"to",name:"to",type:"date",sx:{width:"50%"},value:x.date.to,onChange:function(a){Y([x.date.from,a.target.value,])},InputLabelProps:{shrink:!0}})]})})}),(0,d.jsx)(D.Z,{loading:J,sx:{mt:2},variant:"contained",onClick:function(){var a=S.current;console.log({filters:x,previousFilters:a}),H(x)},children:"Apply Filters"}),(0,d.jsx)(C.Z,{sx:{mt:2},variant:"text",onClick:Z,children:"Clear"})]});return K?F?(0,d.jsx)(g.Z,{children:aj}):(0,d.jsx)(g.Z,{sx:{width:"0px"}}):T?(0,d.jsx)(ah,(0,n.Z)((0,m.Z)({anchor:"left",open:F,SlideProps:{container:null==B?void 0:B.current},variant:"persistent"},L),{children:aj})):(0,d.jsx)(ai,(0,n.Z)((0,m.Z)({anchor:"left",ModalProps:{container:null==B?void 0:B.current},onClose:E,open:F,SlideProps:{container:null==B?void 0:B.current},variant:"temporary"},L),{children:aj}))};aj.propTypes={containerRef:Z().any,filters:Z().object,onChange:Z().func,onClose:Z().func,open:Z().bool};var ak=c(7704),al=c(3493),am=c(586),an=[{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:7,label:"Sunday"},],ao=[{value:"zoom",label:"zoom"}],ap=function(){var a,b,c,f,h,i,j={date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null},k=(0,N.s)(),o=(0,ak.a)().user,P=(0,e.useRef)(null),Q=(0,e.useState)(null),R=Q[0],T=Q[1],U=(0,e.useState)([]),V=(U[0],U[1]),X=(0,e.useState)([]),Y=X[0],Z=X[1],$=(0,e.useState)([]),_=$[0],aa=$[1],ab=(0,e.useState)([]),ac=ab[0],ae=ab[1],af=(0,e.useState)([]),ag=af[0],ah=af[1],ai=(0,e.useState)([]),ap=ai[0],aq=ai[1],ar=(0,e.useState)(!1),as=ar[0],at=ar[1],au=(0,e.useState)({}),av=au[0],aw=au[1],ax=(0,s.Z)(function(a){return a.breakpoints.up("md")},{noSsr:!1}),ay=(0,e.useState)(!0),az=(ay[0],ay[1]),aA=(0,e.useRef)(null),aB=(0,e.useState)(ax),aC=aB[0],aD=aB[1],aE=function(){aM.resetForm(),at(!1)},aF=function(){at(!0)},aG=(0,e.useCallback)((f=(0,l.Z)(p().mark(function a(b,c){var d,e,f;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,G.B.getUsers(b,c,"teacher","student");case 3:d=a.sent,k()&&(e=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===4}),f=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===3}),Z(e),aa(f)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return f.apply(this,arguments)}),[k]),aH=(0,e.useCallback)((0,l.Z)(p().mark(function a(){var b;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,O.u.getDepts("ALL",-1);case 3:b=a.sent,k()&&ae(b.rows),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[k]),aI=(0,e.useCallback)((0,l.Z)(p().mark(function a(){var b;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,W.getSessionTypes();case 3:b=a.sent,k()&&ah(b.resp),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[k]),aJ=(0,e.useCallback)((h=(0,l.Z)(p().mark(function a(b){var c;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,W.getSessions((0,m.Z)({},b,av));case 3:c=a.sent,k()&&aq(c.rows.map(function(a){return{title:a.title||"No name",start:"".concat(null==a?void 0:a.date.substr(0,11)).concat(S()("".concat(null==a?void 0:a.date.substr(0,11)).concat(a.startTime).concat(a.date.substr(19,24))).format("hh:mm")),end:"".concat(null==a?void 0:a.date.substr(0,11)).concat(S()("".concat(null==a?void 0:a.date.substr(0,11)).concat(a.endTime).concat(a.date.substr(19,24))).format("hh:mm"))}})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a){return h.apply(this,arguments)}),[k]);(0,e.useEffect)(function(){aG("ALL",-1),aH(),aI(),aJ({limit:"ALL",offset:-1})},[]);var aK,aL=(i=(0,l.Z)(p().mark(function a(b){var c,d;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=F.ZP.loading("create"),a.prev=1,a.next=4,W.createSession(b);case 4:if(!(d=a.sent)){a.next=12;break}return F.ZP.dismiss(c),F.ZP.success("createSessionSuccess"),aJ({limit:"ALL",offset:-1}),a.abrupt("return",{success:!0});case 12:return F.ZP.dismiss(c),F.ZP.error("createSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),F.ZP.dismiss(c),F.ZP.error(a.t0.message||"createSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a){return i.apply(this,arguments)}),aM=(0,r.TA)({initialValues:{departmentId:"",sessionTypeId:"",studentId:"",teacherId:"",toDate:"",dayOfWeek:[],startTime:"",endTime:"",title:"",sessionMethod:""},enableReinitialize:!0,validationSchema:E.Ry({departmentId:E.Rx().required("subject is required"),sessionTypeId:E.Rx().required("session type is required"),studentId:E.Rx().required("student is required"),teacherId:E.Rx().required("teacher is required"),dayOfWeek:E.Rx().required("dayOfWeek is required"),toDate:E.hT().required("toDate is required"),endTime:E.Z_().required("endTime is required"),title:E.Z_().required("title is required"),sessionMethod:E.Z_().required("sessionMethod is required")}),onSubmit:(aK=(0,l.Z)(p().mark(function a(b){var c,d,e,f,g;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=(c=new Date(String(R))).getTime(),e=S()(d),f=S()(b.endTime,"HH:mm"),a.next=6,aL((0,n.Z)((0,m.Z)({},b),{fromDate:R,startTime:e.utc().format("HH:mm"),endTime:f.utc().format("HH:mm")}));case 6:(g=a.sent.success)&&(aE(),aM.resetForm());case 8:case"end":return a.stop()}},a)})),function(a){return aK.apply(this,arguments)})}),aN=function(a){},aO=function(a){},aP=function(a){V(a)},aQ=function(a){aw(a),aJ((0,m.Z)({limit:"ALL",offset:-1},a))},aR=function(){az(!0),aQ(j)},aS=function(){aD(function(a){return!a})},aT=function(){aD(!1)};return(0,e.useEffect)(function(){console.log("Previous value:",av)},[av]),(0,d.jsxs)(g.Z,{sx:{margin:1,display:"flex",width:"100%"},children:[["super_admin","admin"].includes(null==o?void 0:null===(a=o.role)|| void 0===a?void 0:a.name)&&(0,d.jsx)(d.Fragment,{children:ax?(0,d.jsx)(g.Z,{sx:{width:aC?"20%":"0%"},children:(0,d.jsx)(aj,{containerRef:aA,onClose:aT,open:aC,applyFilters:function(a){return aQ(a)},clearFilters:aR,isCreatePage:!0})}):(0,d.jsx)(t.ZP,{open:aC,PaperProps:{sx:{width:280}},onClose:function(){aD(!1)},children:(0,d.jsx)(aj,{containerRef:aA,onClose:aT,open:aC,applyFilters:function(a){return aQ(a)},clearFilters:aR,isCreatePage:!0})})}),(0,d.jsx)(g.Z,{sx:{m:"auto",width:aC?"80%":"120%","& .fc .fc-toolbar":{flexDirection:ax?"row":"column"}},children:(0,d.jsx)(H.Z,{ref:P,expandRows:!0,contentHeight:750,headerToolbar:{start:"prev,next today filterButton",center:"title",end:"addEventButton,multiMonthYear,listWeek,dayGridMonth,timeGridWeek,timeGridDay"},initialView:"dayGridMonth",plugins:[I.Z,J.Z,L.ZP,K.Z,M.Z,],editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,select:aN,eventClick:aO,eventsSet:aP,eventAdd:function(){},eventChange:function(){},eventRemove:function(){},events:ap,customButtons:(0,m.Z)({},((null==o?void 0:null===(b=o.role)|| void 0===b?void 0:b.name)==="admin"||(null==o?void 0:null===(c=o.role)|| void 0===c?void 0:c.name)==="super_admin")&&{addEventButton:{text:"add event",click:function(a,b){aF()}},filterButton:{text:"Filter",click:function(a,b){aS()}}})})}),(0,d.jsxs)(u.Z,{maxWidth:"md",open:as,children:[(0,d.jsx)(v.Z,{sx:{bgcolor:"primary.main",color:"white"},children:(0,d.jsx)(q.Z,{variant:"subtitle2",children:"Create patch of sessions"})}),(0,d.jsxs)(g.Z,{sx:{p:2,bgcolor:"white"},children:[(0,d.jsx)(w.Z,{sx:{mt:1},children:(0,d.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(x.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(y.Z,{label:"Title",name:"title",type:"text",sx:{width:"100%"},onChange:aM.handleChange,value:aM.values.title,error:Boolean(aM.errors.title&&aM.touched.title),helperText:aM.touched.title&&aM.errors.title})}),(0,d.jsx)(x.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(z.Z,{fullWidth:!0,children:(0,d.jsx)(y.Z,{label:"Session Method",name:"sessionMethod",value:aM.values.sessionMethod,error:Boolean(aM.errors.sessionMethod&&aM.touched.sessionMethod),helperText:aM.touched.sessionMethod&&aM.errors.sessionMethod,InputLabelProps:{shrink:!!aM.values.sessionMethod},fullWidth:!0,required:!0,select:!0,onChange:aM.handleChange,children:ao.map(function(a){return(0,d.jsx)(A.Z,{value:a.value,children:a.label},a.value)})})})}),(0,d.jsx)(x.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(z.Z,{fullWidth:!0,children:(0,d.jsx)(y.Z,{label:"Subject",name:"departmentId",value:aM.values.departmentId,error:Boolean(aM.errors.departmentId&&aM.touched.departmentId),helperText:aM.touched.departmentId&&aM.errors.departmentId,InputLabelProps:{shrink:!!aM.values.departmentId},fullWidth:!0,required:!0,select:!0,onChange:aM.handleChange,children:ac.map(function(a){return(0,d.jsx)(A.Z,{value:a.id,children:a.name},a.id)})})})}),(0,d.jsx)(x.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(z.Z,{fullWidth:!0,children:(0,d.jsx)(y.Z,{label:"Teacher",name:"teacherId",value:aM.values.teacherId,error:Boolean(aM.errors.teacherId&&aM.touched.teacherId),helperText:aM.touched.teacherId&&aM.errors.teacherId,InputLabelProps:{shrink:!!aM.values.teacherId},fullWidth:!0,required:!0,select:!0,onChange:aM.handleChange,children:_.map(function(a){return(0,d.jsxs)(A.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})})}),(0,d.jsx)(x.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(z.Z,{fullWidth:!0,children:(0,d.jsx)(y.Z,{label:"Student",name:"studentId",value:aM.values.studentId,error:Boolean(aM.errors.studentId&&aM.touched.studentId),fullWidth:!0,required:!0,select:!0,helperText:aM.touched.studentId&&aM.errors.studentId,InputLabelProps:{shrink:!!aM.values.studentId},onChange:aM.handleChange,children:Y.map(function(a){return(0,d.jsxs)(A.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})})}),(0,d.jsx)(x.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(ad._,{dateAdapter:am.y,children:(0,d.jsx)(al.x,{name:"fromDate",sx:{width:"100%"},label:"From Date",value:R,onChange:function(a){T(null==a?void 0:a.$d)}})})}),(0,d.jsx)(x.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(y.Z,{label:"To Date",name:"toDate",type:"date",sx:{width:"100%"},onChange:aM.handleChange,value:aM.values.toDate,error:Boolean(aM.errors.toDate&&aM.touched.toDate),helperText:aM.touched.toDate&&aM.errors.toDate,InputLabelProps:{shrink:!0}})}),(0,d.jsx)(x.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(y.Z,{label:"End Time",name:"endTime",type:"time",sx:{width:"100%"},onChange:aM.handleChange,value:aM.values.endTime,error:Boolean(aM.errors.endTime&&aM.touched.endTime),helperText:aM.touched.endTime&&aM.errors.endTime,InputLabelProps:{shrink:!0}})}),(0,d.jsx)(x.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(z.Z,{fullWidth:!0,children:(0,d.jsx)(y.Z,{label:"Day of week",name:"dayOfWeek",value:aM.values.dayOfWeek,error:Boolean(aM.errors.dayOfWeek&&aM.touched.dayOfWeek),helperText:aM.touched.dayOfWeek&&aM.errors.dayOfWeek,InputLabelProps:{shrink:!!aM.values.dayOfWeek},fullWidth:!0,required:!0,select:!0,onChange:aM.handleChange,SelectProps:{multiple:!0},children:an.map(function(a){return(0,d.jsx)(A.Z,{value:a.value,children:a.label},a.value)})})})}),(0,d.jsx)(x.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(z.Z,{fullWidth:!0,children:(0,d.jsx)(y.Z,{label:"Session Type",name:"sessionTypeId",value:aM.values.sessionTypeId,error:Boolean(aM.errors.sessionTypeId&&aM.touched.sessionTypeId),helperText:aM.touched.sessionTypeId&&aM.errors.sessionTypeId,InputLabelProps:{shrink:!!aM.values.sessionTypeId},fullWidth:!0,required:!0,select:!0,onChange:aM.handleChange,children:ag.map(function(a){return(0,d.jsx)(A.Z,{value:a.id,children:a.name},a.id)})})})})]})}),(0,d.jsx)(B.Z,{sx:{p:3},children:(0,d.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,d.jsxs)(C.Z,{variant:"outlined",size:"small",onClick:aE,children:[" ","Cancel"]}),(0,d.jsx)(D.Z,{type:"submit",variant:"contained",onClick:function(){return aM.handleSubmit()},children:"Create"})]})})]})]})]})},aq=ap,ar=c(7573),as=c(1796),at=c(7906),au=c(295),av=c(2882),aw=c(519),ax=c(629),ay=c(6915),az=c(6242),aA=c(7023),aB=c(7918),aC=c(7720),aD=c(969),aE=c(3252),aF=c(3946),aG=c(3816),aH=(0,ab.Z)((0,d.jsx)("svg",{viewBox:"0 0 11 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M3.29008 6.6899L7.1472 6.70013M3.28371 9.08989L7.14084 9.10012M3.29644 4.28991L7.15357 4.30014M0.731381 1.8831C0.731802 1.72397 0.799936 1.57154 0.920793 1.45934C1.04165 1.34714 1.20533 1.28436 1.37583 1.28481L9.09008 1.30526C9.26058 1.30571 9.42393 1.36936 9.54419 1.4822C9.66445 1.59504 9.73177 1.74783 9.73135 1.90696L9.70113 13.3069L7.45511 11.801L5.20114 13.295L2.95513 11.789L0.701159 13.2831L0.731381 1.8831Z",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round"})}),"BillsIcon"),aI=c(7922),aJ=c(2734),aK=c(7361),aL=c.n(aK),aM=c(6968),aN=c.n(aM),aO=c(1733),aP=c(3841),aQ=c(6703),aR=function(){function a(){(0,P.Z)(this,a)}var b=a.prototype;return b.getReports=function(a,b){return(0,l.Z)(p().mark(function c(){return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=Q.E.get("/reports",{limit:a,page:++b});c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.createReport=function(a){return(0,l.Z)(p().mark(function b(){return p().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=Q.E.post("/reports/create",a);b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateReport=function(a,b){return(0,l.Z)(p().mark(function c(){return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=Q.E.put("/reports/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteReport=function(a){return(0,l.Z)(p().mark(function b(){return p().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=Q.E.delete("/reports/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),aS=new aR,aT=c(4150),aU=c(4970),aV=c(888),aW=function(a){var b,c,f,h,i,j,k=a.sessionDeptName,o=a.sessionId,q=a.updateSession,s=a.handleCloseCreateReport,t=a.setReoprtFlag,u=a.reportFlag,v=(0,e.useState)([]),w=v[0],B=v[1],E=(0,ak.a)().user,G=(0,e.useState)(!1),H=(G[0],G[1]),I=["1","2","3","4","5","6","7","8","9","10"],J=(0,N.s)(),K=(0,e.useCallback)((c=(0,l.Z)(p().mark(function a(b,c){var d;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aT.t.getDocuments(b,c,"books");case 3:d=a.sent,J()&&B(d.rows),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),F.ZP.error(a.t0.message||"failed");case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return c.apply(this,arguments)}),[J]),L=(0,r.TA)({initialValues:{date:new Date,documentId:null,sessionId:o,notes:"",homework:"",bookId:null===(b=w[0])|| void 0===b?void 0:b.id,unit:"",topic:"",level:"",newWords:"",expressions:"",rules:"",memorization:"",revision:"",tajweed:"",recitation:"",reading:"",memorizationLevel:"",revisionLevel:"",readingLevel:""},onSubmit:(f=(0,l.Z)(p().mark(function a(b){var c;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log(b),a.next=4,M(b);case 4:(c=a.sent.success)&&(L.resetForm(),s(o),q(o,{status:"done",endedAt:new Date(Date.now())}),t(!u)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(a){return f.apply(this,arguments)})}),M=(h=(0,l.Z)(p().mark(function a(b){var c;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=F.ZP.loading("createReports"),a.prev=1,a.next=4,aS.createReport(b);case 4:return F.ZP.dismiss(c),F.ZP.success("createReports "),a.abrupt("return",{success:!0});case 9:return a.prev=9,a.t0=a.catch(1),F.ZP.dismiss(c),F.ZP.error(a.t0.message||"createReportsFailed"),a.abrupt("return",{success:!1});case 14:case"end":return a.stop()}},a,null,[[1,9]])})),function(a){return h.apply(this,arguments)}),O=(i=(0,l.Z)(p().mark(function a(b,c){var d;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aT.t.createDocument({name:"reports",id:2},b,c);case 3:return d=a.sent,L.setFieldValue("documentId",d.data.id),a.abrupt("return",{success:!0});case 8:return a.prev=8,a.t0=a.catch(0),a.abrupt("return",{success:!1});case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(a,b){return i.apply(this,arguments)}),P=(j=(0,l.Z)(p().mark(function a(b){var c,d;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.preventDefault(),a.prev=1,console.log("file",b.target.files[0]),H(!0),(c=new FormData).append("userId",E.id),c.append("file",b.target.files[0]),a.next=9,O(c,E.id);case 9:d=a.sent,a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0),H(!1);case 16:case"end":return a.stop()}},a,null,[[1,12]])})),function(a){return j.apply(this,arguments)}),Q=(0,aa.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});return(0,e.useEffect)(function(){K(1e3,0)},[]),(0,d.jsx)(g.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",bgcolor:"#CAF0F8"},children:(0,d.jsxs)(ax.Z,{elevation:9,sx:{display:"flex",flexDirection:"column",p:"20px 20px",width:"95%",bgcolor:"#CAF0F8"},children:[" ",(0,d.jsx)(x.ZP,{container:!0,children:(0,d.jsx)(x.ZP,{item:!0,xs:12,children:(0,d.jsxs)("form",{onSubmit:L.handleSubmit,children:[(0,d.jsx)(aC.Z,{textAlign:"left",sx:{mb:1},children:(0,d.jsx)(aB.Z,{label:"Feedback Report",sx:{fontWeight:"600"}})}),"Quran"!=k&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(z.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(aP.Z,{sx:{top:-6},id:"outlined-level",children:"Grade"}),(0,d.jsx)(aQ.Z,{name:"level",id:"outlined-level",labelId:"outlined-level",value:L.values.level,onChange:function(a){L.setFieldValue("level",a.target.value)},children:I.map(function(a){return(0,d.jsxs)(A.Z,{sx:(0,n.Z)((0,m.Z)({color:"black"},{bgcolor:function(a){return(0,as.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:[a," / 10"]},a)})})]}),(0,d.jsxs)(z.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(aP.Z,{sx:{top:-6},id:"outlined-adornment-bookId",children:"Book"}),(0,d.jsx)(aQ.Z,{name:"bookId",id:"outlined-adornment-bookId",labelId:"outlined-adornment-bookId",value:L.values.bookId,onChange:function(a){L.setFieldValue("bookId",a.target.value),console.log(a.target.value)},children:null==w?void 0:w.map(function(a){return(0,d.jsx)(A.Z,{sx:(0,n.Z)((0,m.Z)({color:"black"},{bgcolor:function(a){return(0,as.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:null==a?void 0:a.id,children:null==a?void 0:a.fileName},null==a?void 0:a.id)})})]}),(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(L.touched.unit&&L.errors.unit),helperText:L.touched.unit&&L.errors.unit,label:"Unit",margin:"normal",id:"unit",name:"unit",type:"text",onChange:L.handleChange,value:L.values.unit,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(L.touched.topic&&L.errors.topic),helperText:L.touched.topic&&L.errors.topic,label:"Topic",margin:"normal",id:"topic",name:"topic",type:"text",onChange:L.handleChange,value:L.values.topic,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}})]}),"Arabic"===k&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)(y.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(L.touched.newWords&&L.errors.newWords),helperText:L.touched.newWords&&L.errors.newWords,label:"New Words",margin:"normal",id:"newWords",name:"newWords",type:"text",onChange:L.handleChange,value:L.values.newWords,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(y.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(L.touched.expressions&&L.errors.expressions),helperText:L.touched.expressions&&L.errors.expressions,label:"Expressions",margin:"normal",id:"expressions",name:"expressions",type:"text",onChange:L.handleChange,value:L.values.expressions,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(y.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(L.touched.rules&&L.errors.rules),helperText:L.touched.rules&&L.errors.rules,label:"Rules",margin:"normal",id:"rules",name:"rules",type:"text",onChange:L.handleChange,value:L.values.rules,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}})]}),"Quran"===k&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(L.touched.memorization&&L.errors.memorization),helperText:L.touched.memorization&&L.errors.memorization,label:"Memorization",margin:"normal",id:"memorization",name:"memorization",type:"text",onChange:L.handleChange,value:L.values.memorization,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(L.touched.revision&&L.errors.revision),helperText:L.touched.revision&&L.errors.revision,label:"Revision",margin:"normal",id:"revision",name:"revision",type:"text",onChange:L.handleChange,value:L.values.revision,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(L.touched.tajweed&&L.errors.tajweed),helperText:L.touched.tajweed&&L.errors.tajweed,label:"Tajweed",margin:"normal",id:"tajweed",name:"tajweed",type:"text",onChange:L.handleChange,value:L.values.tajweed,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(L.touched.recitation&&L.errors.recitation),helperText:L.touched.recitation&&L.errors.recitation,label:"Recitation",margin:"normal",id:"recitation",name:"recitation",type:"text",onChange:L.handleChange,value:L.values.recitation,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(L.touched.reading&&L.errors.reading),helperText:L.touched.reading&&L.errors.reading,label:"Reading",margin:"normal",id:"reading",name:"reading",type:"text",onChange:L.handleChange,value:L.values.reading,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsxs)(z.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(aP.Z,{sx:{top:-6},id:"outlined-memorizationLevel",children:"Memorization Grade"}),(0,d.jsx)(aQ.Z,{name:"memorizationLevel",id:"outlined-memorizationLevel",labelId:"outlined-memorizationLevel",value:L.values.memorizationLevel,onChange:function(a){L.setFieldValue("memorizationLevel",a.target.value)},children:I.map(function(a){return(0,d.jsx)(A.Z,{sx:(0,n.Z)((0,m.Z)({color:"black"},{bgcolor:function(a){return(0,as.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]}),(0,d.jsxs)(z.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(aP.Z,{sx:{top:-6},id:"outlined-revisionLevel",children:"Revision Grade"}),(0,d.jsx)(aQ.Z,{name:"revisionLevel",id:"outlined-revisionLevel",labelId:"outlined-revisionLevel",value:L.values.revisionLevel,onChange:function(a){L.setFieldValue("revisionLevel",a.target.value)},children:I.map(function(a){return(0,d.jsx)(A.Z,{sx:(0,n.Z)((0,m.Z)({color:"black"},{bgcolor:function(a){return(0,as.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]}),(0,d.jsxs)(z.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(aP.Z,{sx:{top:-6},id:"outlined-readingLevel",children:"Reading Grade"}),(0,d.jsx)(aQ.Z,{name:"readingLevel",id:"outlined-readingLevel",labelId:"outlined-readingLevel",value:L.values.readingLevel,onChange:function(a){L.setFieldValue("readingLevel",a.target.value)},children:I.map(function(a){return(0,d.jsx)(A.Z,{sx:(0,n.Z)((0,m.Z)({color:"black"},{bgcolor:function(a){return(0,as.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]})]}),(0,d.jsx)(y.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(L.touched.homework&&L.errors.homework),helperText:L.touched.homework&&L.errors.homework,label:"H.W",margin:"normal",id:"homework",name:"homework",type:"text",onChange:L.handleChange,value:L.values.homework,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(y.Z,{multiline:!0,minRows:2,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:80},mr:1},error:Boolean(L.touched.notes&&L.errors.notes),helperText:L.touched.notes&&L.errors.notes,label:"Notes",margin:"normal",id:"notes",name:"notes",type:"text",onChange:L.handleChange,value:L.values.notes,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsxs)("div",{style:{textAlign:"center"},children:[(0,d.jsxs)(C.Z,{component:"label",variant:"contained",startIcon:(0,d.jsx)(aU.Z,{}),children:["Upload file",(0,d.jsx)(Q,{type:"file",onChange:function(a){P(a)}})]}),L.values.documentId&&(0,d.jsx)(aV.Z,{color:"success",sx:{position:"relative",top:10,ml:1}})]}),(0,d.jsx)(aC.Z,{sx:{mb:1,mt:2}}),(0,d.jsx)("div",{style:{textAlign:"right"},children:(0,d.jsx)(D.Z,{type:"submit",sx:{"& .MuiInputBase-root":{height:40},m:.5,p:1},variant:"contained",children:"Submit"})})]})})})," "]})})},aX=aW,aY=c(8462),aZ=c(891),a$=c(1134),a_=c(660),a0=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,r,s,t,u,v,w,y,z,A,B=a.session;a.handleCloseReport;var C=(0,a$.ZP)(),D=(C.size,C.elapsed,C.percentage,C.download),E=(C.cancel,C.error);return C.isInProgress,(0,d.jsxs)(ax.Z,{elevation:12,sx:{display:"flex",flexDirection:"column",padding:"20px 25px",minHeight:"fit-content",m:1,bgcolor:"#CAF0F8"},children:[(0,d.jsx)(q.Z,{color:"inherit",variant:"h6",children:"Session information"}),(0,d.jsx)(aC.Z,{textAlign:"left",sx:{m:1},children:(0,d.jsx)(aB.Z,{label:"Primary Details",sx:{fontWeight:"600"}})}),(0,d.jsxs)(x.ZP,{container:!0,component:aY.Z,children:[(0,d.jsxs)(x.ZP,{item:!0,xs:12,sm:6,children:[(0,d.jsxs)(aZ.ZP,{children:["Teacher:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==B?void 0:null===(b=B.patch)|| void 0===b?void 0:null===(c=b.teacher)|| void 0===c?void 0:c.firstName," ").concat(null==B?void 0:null===(e=B.patch)|| void 0===e?void 0:null===(f=e.teacher)|| void 0===f?void 0:f.lastName)||"no data"})," "]}),(0,d.jsxs)(aZ.ZP,{children:["Subject:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:null===(g=B.patch)|| void 0===g?void 0:null===(h=g.department)|| void 0===h?void 0:h.name)||"No data"})," "]}),(0,d.jsxs)(aZ.ZP,{children:["Date:",(0,d.jsxs)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",S()(null==B?void 0:B.date).format("YYYY-MM-DD")||"no data"]})," "]})," ",(0,d.jsxs)(aZ.ZP,{children:["Start Time:",(0,d.jsxs)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",(null==B?void 0:B.startTime)?"".concat(S()("".concat(null==B?void 0:B.date.substr(0,11)).concat(B.startTime).concat(B.date.substr(19,24))).format("hh:mm A")):"no data"]})," "]}),(0,d.jsxs)(aZ.ZP,{children:["Started At:",(0,d.jsxs)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",S()(null==B?void 0:B.startedAt).format("YYYY-MM-DD hh:mm A")||"no data"]})," "]})]}),(0,d.jsxs)(x.ZP,{item:!0,xs:12,sm:6,children:[(0,d.jsxs)(aZ.ZP,{children:["Student:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"120px"},children:"".concat(null==B?void 0:null===(i=B.patch)|| void 0===i?void 0:null===(j=i.student)|| void 0===j?void 0:j.firstName," ").concat(null==B?void 0:null===(k=B.patch)|| void 0===k?void 0:null===(l=k.student)|| void 0===l?void 0:l.lastName)||"no data"})," "]}),(0,d.jsxs)(aZ.ZP,{children:["Session Type:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:null===(m=B.sessionType)|| void 0===m?void 0:m.name)||"No data"})," "]}),(0,d.jsxs)(aZ.ZP,{children:["Status:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:B.status)||"no data"})]}),(0,d.jsxs)(aZ.ZP,{children:["End Time:",(0,d.jsxs)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",(null==B?void 0:B.endTime)?S()("".concat(null==B?void 0:B.date.substr(0,11)).concat(B.endTime).concat(B.date.substr(19,24))).format("hh:mm A"):"no data"]})," "]}),(0,d.jsxs)(aZ.ZP,{children:["Ended At:",(0,d.jsxs)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",S()(null==B?void 0:B.endedAt).format("YYYY-MM-DD hh:mm A")||"no data"]})," "]})]})]}),(null==B?void 0:B.reports[0])&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aC.Z,{textAlign:"left",sx:{m:1},children:(0,d.jsx)(aB.Z,{label:"Feedback ",sx:{fontWeight:"600"}})}),(0,d.jsxs)(x.ZP,{container:!0,component:aY.Z,children:[(0,d.jsxs)(x.ZP,{item:!0,xs:12,children:[" ",(0,d.jsxs)(x.ZP,{container:!0,component:aY.Z,sx:{p:0},children:[(0,d.jsxs)(x.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[" ",(null==B?void 0:B.reports[0].date)&&(0,d.jsxs)(aZ.ZP,{children:["Submition Date:",(0,d.jsxs)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",S()((null==B?void 0:B.reports[0].date)||"No data").format("MMM-D-YYYY")]})," "]})]}),(0,d.jsxs)(x.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[" ",(null==B?void 0:B.reports[0].document)&&(0,d.jsxs)(aZ.ZP,{children:["File:"," ",(0,d.jsxs)(aF.Z,{onClick:function(){var a,b;return D("http://localhost:4000/".concat(null===(a=null==B?void 0:B.reports[0].document)|| void 0===a?void 0:a.fileStoragePath),null===(b=null==B?void 0:B.reports[0].document)|| void 0===b?void 0:b.fileName)},sx:{p:.5,ml:.5,color:"black",border:"1px solid black",fontSize:"16px"},children:["Download "," ",(0,d.jsx)(a_.Z,{fontSize:"medium"})]}),E&&(0,d.jsxs)("p",{style:{color:"red"},children:["possible error ",JSON.stringify(E)]})]})]})]}),(null===(n=B.patch)|| void 0===n?void 0:null===(o=n.department)|| void 0===o?void 0:o.name)!="Quran"&&(0,d.jsxs)(x.ZP,{container:!0,component:aY.Z,children:[(0,d.jsxs)(x.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[(null==B?void 0:B.reports[0].level)&&(0,d.jsxs)(aZ.ZP,{children:["Grade:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==B?void 0:B.reports[0].level," / 10")||0})," "]}),(null==B?void 0:B.reports[0].book)&&(0,d.jsxs)(aZ.ZP,{children:["Book:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null===(p=null==B?void 0:B.reports[0].book)|| void 0===p?void 0:p.fileName)||"No data"})," "]})]}),(0,d.jsxs)(x.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[(null==B?void 0:B.reports[0].unit)&&(0,d.jsxs)(aZ.ZP,{children:["Unit:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:B.reports[0].unit)||"No data"})," "]}),(null==B?void 0:B.reports[0].topic)&&(0,d.jsxs)(aZ.ZP,{children:["Topic:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:B.reports[0].topic)||"No data"})," "]})]})," "]}),(null===(r=B.patch)|| void 0===r?void 0:null===(s=r.department)|| void 0===s?void 0:s.name)=="Arabic"&&(0,d.jsxs)(d.Fragment,{children:[(null==B?void 0:B.reports[0].newWords)&&(0,d.jsxs)(aZ.ZP,{children:["New Words:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:B.reports[0].newWords)||"No data"})," "]}),(null==B?void 0:B.reports[0].expressions)&&(0,d.jsxs)(aZ.ZP,{children:["Expressions:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:B.reports[0].expressions)||"No data"})," "]}),(null==B?void 0:B.reports[0].rules)&&(0,d.jsxs)(aZ.ZP,{children:["Rules:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:B.reports[0].rules)||"No data"})," "]})]}),(null===(t=B.patch)|| void 0===t?void 0:null===(u=t.department)|| void 0===u?void 0:u.name)=="Quran"&&(0,d.jsxs)(x.ZP,{container:!0,component:aY.Z,children:[(0,d.jsxs)(x.ZP,{item:!0,xs:12,sm:6,children:[" ",(null==B?void 0:B.reports[0].memorization)&&(0,d.jsxs)(aZ.ZP,{children:["Memorization:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:B.reports[0].memorization)||"No data"})," "]}),(null==B?void 0:B.reports[0].revision)&&(0,d.jsxs)(aZ.ZP,{children:["Revision:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:B.reports[0].revision)||"No data"})," "]}),(null==B?void 0:B.reports[0].recitation)&&(0,d.jsxs)(aZ.ZP,{children:["Recitation:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:B.reports[0].recitation)||"No data"})," "]}),(null==B?void 0:B.reports[0].reading)&&(0,d.jsxs)(aZ.ZP,{children:["Reading:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:B.reports[0].reading)||"No data"})," "]})]}),(0,d.jsxs)(x.ZP,{item:!0,xs:12,sm:6,children:[(null==B?void 0:B.reports[0].memorizationLevel)&&(0,d.jsxs)(aZ.ZP,{children:["Memorization Grade:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==B?void 0:B.reports[0].memorizationLevel,"  / 10")||0})," "]}),(null==B?void 0:B.reports[0].revisionLevel)&&(0,d.jsxs)(aZ.ZP,{children:["Revision Grade:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==B?void 0:B.reports[0].revisionLevel,"  / 10")||0})," "]}),(null==B?void 0:B.reports[0].tajweed)&&(0,d.jsxs)(aZ.ZP,{children:["Tajweed:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==B?void 0:B.reports[0].tajweed)||"No data"})," "]}),(null==B?void 0:B.reports[0].readingLevel)&&(0,d.jsxs)(aZ.ZP,{children:["Reading Grade:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null===(v=null==B?void 0:B.reports[0])|| void 0===v?void 0:v.readingLevel,"  / 10")||0})," "]})]})]})]}),(null===(w=null==B?void 0:B.reports[0])|| void 0===w?void 0:w.homework)&&(0,d.jsxs)(aZ.ZP,{children:["H.W:",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null===(y=null==B?void 0:B.reports[0])|| void 0===y?void 0:y.homework)||"No data"})," "]}),(null===(z=null==B?void 0:B.reports[0])|| void 0===z?void 0:z.notes)&&(0,d.jsxs)(aZ.ZP,{children:["Notes:"," ",(0,d.jsx)(q.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null===(A=null==B?void 0:B.reports[0])|| void 0===A?void 0:A.notes)||"No data"})," "]})]})]})]})},a1=function(a){var b,c,f,h,i,j,k,m,n,o,s,t,v,w,x,B,F,G,H,I,J,K,L,M,O,P,Q=a.row,R=(a.labelId,a.updateSession),T=a.deleteSession,U=a.statuses,V=a.setReoprtFlag,W=a.reportFlag;(0,N.s)();var X=(0,ak.a)().user,Y=(0,e.useState)(!1),Z=Y[0],$=Y[1],_=(0,e.useState)(!1),aa=_[0],ab=_[1],ac=(0,e.useState)(!1),ad=ac[0],ae=ac[1];(0,aJ.Z)();var af,ag=(null==Q?void 0:Q.status)==="done"?"success":(null==Q?void 0:Q.status)==="cancelled"||(null==Q?void 0:Q.status)==="expired"?"error":(null==Q?void 0:Q.status)==="waiting"?"warning":(null==Q?void 0:Q.status)==="rescheduled"?"info":"primary",ah=["".concat(null==Q?void 0:null===(b=Q.patch)|| void 0===b?void 0:null===(c=b.teacher)|| void 0===c?void 0:c.firstName," ").concat(null==Q?void 0:null===(f=Q.patch)|| void 0===f?void 0:null===(h=f.teacher)|| void 0===h?void 0:h.lastName)||"no data","".concat(null==Q?void 0:null===(i=Q.patch)|| void 0===i?void 0:null===(j=i.student)|| void 0===j?void 0:j.firstName," ").concat(null==Q?void 0:null===(k=Q.patch)|| void 0===k?void 0:null===(m=k.student)|| void 0===m?void 0:m.lastName)||"no data",(0,d.jsx)(aB.Z,{label:null==Q?void 0:Q.status,color:ag})||"no data","".concat(S()(null==Q?void 0:Q.startedAt).format("YYYY-MM-DD hh:mm A"))||"no data","".concat(S()(null==Q?void 0:Q.endedAt).format("YYYY-MM-DD hh:mm A"))||"no data",(null==Q?void 0:null===(n=Q.patch)|| void 0===n?void 0:null===(o=n.department)|| void 0===o?void 0:o.name)||"no data","".concat(S()(null==Q?void 0:Q.date).format("YYYY-MM-DD"))||"no data","".concat(S()("".concat(null==Q?void 0:Q.date.substr(0,11)).concat(Q.startTime).concat(Q.date.substr(19,24))).format("hh:mm A"))||"no data","".concat(S()("".concat(null==Q?void 0:Q.date.substr(0,11)).concat(Q.endTime).concat(Q.date.substr(19,24))).format("hh:mm A"))||"no data",],ai=function(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){if("object"==typeof a[c]&&null!==a[c]){var d=ai(a[c]);for(var e in d)d.hasOwnProperty(e)&&(b[c+"."+e]=d[e])}else b[c]=a[c]}return b},aj=(0,r.TA)({initialValues:{sessionMethod:null==Q?void 0:Q.sessionMethod,title:null==Q?void 0:Q.title,status:null==Q?void 0:Q.status,date:null==Q?void 0:Q.date,startTime:null==Q?void 0:Q.startTime,endTime:null==Q?void 0:Q.endTime},enableReinitialize:!0,validationSchema:E.Ry({sessionMethod:E.Z_().required("sessionMethod is required"),title:E.Z_().max(255).required("title is required"),status:E.Z_().max(255).required("status is required"),date:E.hT().required("date is required"),startTime:E.Z_().required("startTime is required"),endTime:E.Z_().required("endTime is required")}),onSubmit:(af=(0,l.Z)(p().mark(function a(b){var c,d,e,f;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=ai(aj.initialValues),e={},null===(c=Object.entries(d))|| void 0===c||c.map(function(a){var c=(0,aD.Z)(a,2),d=c[0],f=c[1],g=aL()(b,d);g!==f&&aN()(e,d,g)}),a.next=6,R(Q.id,e);case 6:(f=a.sent.success)&&$(!1);case 8:case"end":return a.stop()}},a)})),function(a){return af.apply(this,arguments)})}),al=function(){ab(!0)},am=function(){console.log("close"),ab(!1)},an=function(){ae(!0)},ap=function(){ae(!1)},aq=function(){var a,b,c=null==Q?void 0:null===(a=Q.patch)|| void 0===a?void 0:null===(b=a.student)|| void 0===b?void 0:b.zoomLink,d=new URL("https://zoom.us/"),e=new URL(c,d);window.open(e.toString(),"new")};return(0,e.useEffect)(function(){if(Q){var a;aj.setValues({sessionMethod:null==Q?void 0:Q.sessionMethod,title:null==Q?void 0:Q.title,status:null==Q?void 0:Q.status,date:null==Q?void 0:null===(a=Q.date)|| void 0===a?void 0:a.substr(0,10),startTime:null==Q?void 0:Q.startTime,endTime:null==Q?void 0:Q.endTime})}},[Q]),(0,d.jsxs)(e.Fragment,{children:[(0,d.jsxs)(aG.Z,{sx:{"& > *":{borderBottom:0,cursor:"pointer"}},children:[null==ah?void 0:ah.map(function(a,b){return(0,d.jsx)(aE.Z,{scope:"row",onClick:function(){return $(!Z)},sx:{color:"black"},children:a},b)}),(0,d.jsx)(aE.Z,{scope:"row",sx:{color:"black"},children:(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(null==Q?void 0:Q.status)==="waiting"&&S()("".concat(null==Q?void 0:Q.date.substr(0,11)).concat(Q.startTime).concat(Q.date.substr(19,24))).subtract(5,"minutes").isBefore(S()())&&(null==Q?void 0:null===(s=Q.zoomSessionMeetings)|| void 0===s?void 0:s.length)<1&&(null==X?void 0:null===(t=X.role)|| void 0===t?void 0:t.name)!=="student"&&(null==X?void 0:null===(v=X.role)|| void 0===v?void 0:v.name)!=="parent"&&(0,d.jsx)(C.Z,{variant:"contained",onClick:function(){R(Q.id,{status:"running",startedAt:new Date}),aq()},sx:{fontSize:12,mr:1},size:"small",children:"Start"}),(null==Q?void 0:Q.status)==="running"&&(0,d.jsxs)(d.Fragment,{children:[(null==Q?void 0:null===(w=Q.zoomSessionMeetings)|| void 0===w?void 0:w.length)<1&&(0,d.jsx)(C.Z,{variant:"contained",color:"primary",onClick:function(){return aq()},sx:{fontSize:12,mr:1},size:"small",children:"Join"}),(null==X?void 0:null===(x=X.role)|| void 0===x?void 0:x.name)!=="student"&&(null==X?void 0:null===(B=X.role)|| void 0===B?void 0:B.name)!=="parent"&&(0,d.jsx)(C.Z,{variant:"contained",color:"success",onClick:function(){al()},sx:{fontSize:12,mr:1,backgroundColor:"green"},size:"small",children:"End"})]}),(null==Q?void 0:Q.status)!=="done"&&(null==Q?void 0:Q.status)!=="cancelled"&&(null==Q?void 0:Q.status)!=="running"&&((null==X?void 0:null===(F=X.role)|| void 0===F?void 0:F.name)==="admin"||(null==X?void 0:null===(G=X.role)|| void 0===G?void 0:G.name)==="super_admin")&&(0,d.jsx)(C.Z,{variant:"contained",color:"error",onClick:function(){return R(Q.id,{status:"cancelled"})},sx:{fontSize:12},size:"small",children:"Cancel"})]})}),(0,d.jsx)(aE.Z,{scope:"row",sx:{color:"black"},children:(0,d.jsx)(aF.Z,{onClick:function(){return an()},sx:{p:0,ml:1,mb:1.5},children:(0,d.jsx)(aH,{color:"primary"})})}),(0,d.jsx)(aE.Z,{scope:"row",sx:{color:"black"},children:(0,d.jsx)(aF.Z,{onClick:function(){return T(Q.id)},sx:{p:0,ml:1,mb:1.5},children:(0,d.jsx)(aO.Z,{color:"error"})})})]}),(0,d.jsx)(aG.Z,{sx:{border:0},children:(0,d.jsx)(aE.Z,{style:{paddingBottom:0,paddingTop:0,border:0},colSpan:12,children:(0,d.jsx)(aI.Z,{in:Z,timeout:"auto",unmountOnExit:!0,children:(0,d.jsxs)(g.Z,{sx:{margin:1},children:[(0,d.jsx)(q.Z,{variant:"h6",gutterBottom:!0,component:"div",sx:{margin:0},children:"edit"}),(0,d.jsxs)("form",{onSubmit:aj.handleSubmit,children:[(0,d.jsx)(z.Z,{children:(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Session Method",name:"sessionMethod",value:aj.values.sessionMethod,error:Boolean(aj.errors.sessionMethod&&aj.touched.sessionMethod),helperText:aj.touched.sessionMethod&&(null===(H=aj.errors.sessionMethod)|| void 0===H?void 0:H.toString()),InputLabelProps:{shrink:!!aj.values.sessionMethod},fullWidth:!0,required:!0,select:!0,onChange:aj.handleChange,children:ao.map(function(a){return(0,d.jsx)(A.Z,{value:a.value,children:a.label},a.value)})})}),(0,d.jsx)(y.Z,{label:"Title",name:"title",type:"text",onChange:aj.handleChange,value:aj.values.title,error:Boolean(aj.errors.title&&aj.touched.title),helperText:aj.touched.title&&(null===(I=aj.errors.title)|| void 0===I?void 0:I.toString()),size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1}}),(0,d.jsx)(z.Z,{children:(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Status",name:"status",value:aj.values.status,error:Boolean(aj.errors.status&&aj.touched.status),helperText:aj.touched.status&&(null===(J=aj.errors.status)|| void 0===J?void 0:J.toString()),InputLabelProps:{shrink:!!aj.values.status},fullWidth:!0,required:!0,select:!0,onChange:aj.handleChange,children:U.map(function(a){return(0,d.jsx)(A.Z,{value:a,children:a},a)})})}),(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Date",name:"date",type:"date",onChange:aj.handleChange,value:aj.values.date,error:Boolean(aj.errors.date&&aj.touched.date),helperText:aj.touched.date&&(null===(K=aj.errors.date)|| void 0===K?void 0:K.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Start Time(UTC)",name:"startTime",type:"time",onChange:aj.handleChange,value:aj.values.startTime,error:Boolean(aj.errors.startTime&&aj.touched.startTime),helperText:aj.touched.startTime&&(null===(L=aj.errors.startTime)|| void 0===L?void 0:L.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(y.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"End Time(UTC)",name:"endTime",type:"time",onChange:aj.handleChange,value:aj.values.endTime,error:Boolean(aj.errors.endTime&&aj.touched.endTime),helperText:aj.touched.endTime&&(null===(M=aj.errors.endTime)|| void 0===M?void 0:M.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(D.Z,{type:"submit",sx:{width:{xs:15,sm:20,md:30,lg:40,xl:50},"& .MuiInputBase-root":{height:40}},variant:"contained",children:"submit"})]})]})})})}),(0,d.jsx)(u.Z,{maxWidth:"md",open:aa,children:(0,d.jsx)(aX,{setReoprtFlag:V,reportFlag:W,sessionDeptName:null===(O=Q.patch)|| void 0===O?void 0:null===(P=O.department)|| void 0===P?void 0:P.name,sessionId:Q.id,updateSession:R,handleCloseCreateReport:am})}),(0,d.jsx)(u.Z,{maxWidth:"md",open:ad,onClose:ap,children:(0,d.jsx)(a0,{session:Q,handleCloseReport:ap})})]})},a2=c(1163),a3=(0,ab.Z)((0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),"Filter"),a4=(0,aa.ZP)("div",{shouldForwardProp:function(a){return"open"!==a}})(function(a){var b,c,d=a.theme,e=a.open;return(0,m.Z)((b={flexGrow:1,overflow:"hidden",zIndex:1},(0,ar.Z)(b,d.breakpoints.up("lg"),{marginLeft:-380}),(0,ar.Z)(b,"transition",d.transitions.create("margin",{easing:d.transitions.easing.sharp,duration:d.transitions.duration.leavingScreen})),b),e&&(c={},(0,ar.Z)(c,d.breakpoints.up("lg"),{marginLeft:0}),(0,ar.Z)(c,"transition",d.transitions.create("margin",{easing:d.transitions.easing.easeOut,duration:d.transitions.duration.enteringScreen})),c))}),a5=function(a){var b,c,f,i,j,k,n,o,q=(0,N.s)(),r=(0,a2.useRouter)(),t=(0,ak.a)().user,u={date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null},v=(0,e.useState)({}),w=v[0],x=v[1],y=(0,e.useState)([]),z=y[0],A=y[1],B=(0,e.useState)(0),D=B[0],E=B[1],G=(0,e.useState)(0),H=G[0],I=G[1],J=(0,e.useState)([]),K=J[0],L=J[1],M=(0,e.useState)([]),O=M[0],P=M[1],Q=(0,e.useState)(0),R=Q[0],S=Q[1],T=(0,e.useState)(25),U=T[0],V=T[1],X=(0,e.useState)([]),Y=X[0],Z=X[1],$=(0,e.useState)("waiting"),_=$[0],aa=$[1];(0,s.Z)(function(a){return a.breakpoints.up("md")},{noSsr:!1});var ab,ac,ad,ae=(0,e.useState)(!0),af=(ae[0],ae[1]),ag=(0,e.useRef)(null),ah=(0,e.useState)(!1),ai=ah[0],al=ah[1],am=(0,e.useState)(!1),an=am[0],ao=am[1],ap=["waiting","expired","running","done","cancelled","absent","rescheduled",],aq=[{label:"all",value:"",count:R},{label:"waiting",value:"waiting",count:null===(b=K.find(function(a){return a.status.match("waiting")}))|| void 0===b?void 0:b.count},{label:"running",value:"running",count:null===(c=K.find(function(a){return a.status.match("running")}))|| void 0===c?void 0:c.count},{label:"done",value:"done",count:null===(f=K.find(function(a){return a.status.match("done")}))|| void 0===f?void 0:f.count},{label:"cancelled",value:"cancelled",count:null===(i=K.find(function(a){return a.status.match("cancelled")}))|| void 0===i?void 0:i.count},{label:"expired",value:"expired",count:null===(j=K.find(function(a){return a.status.match("expired")}))|| void 0===j?void 0:j.count},{label:"absent",value:"absent",count:null===(k=K.find(function(a){return a.status.match("absent")}))|| void 0===k?void 0:k.count},{label:"rescheduled",value:"rescheduled",count:null===(n=K.find(function(a){return a.status.match("rescheduled")}))|| void 0===n?void 0:n.count},],ar=null==Y?void 0:Y.map(function(a){var b;return{label:a.name,value:a.duration,count:null===(b=O.find(function(b){return(null==b?void 0:b.sessionTypeId)===a.id}))|| void 0===b?void 0:b.count}}),aD=function(a,b){aa(b),aE({limit:U,offset:0,status:b})},aE=(0,e.useCallback)((ab=(0,l.Z)(p().mark(function a(b){var c;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log((0,m.Z)({},b)),a.prev=1,a.next=4,W.getSessions((0,m.Z)({},b));case 4:c=a.sent,q()&&(A(c.rows),I(c.count),L(c.statusCount),P(c.typesCount),S(c.totalCount)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[1,8]])})),function(a){return ab.apply(this,arguments)}),[q,w]),aF=(ac=(0,l.Z)(p().mark(function a(b){var c,d;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=F.ZP.loading("delete"),a.prev=1,a.next=4,W.deleteSession(b);case 4:if(!(d=a.sent)){a.next=12;break}return F.ZP.dismiss(c),F.ZP.success("deleteSessionSuccess"),aE({limit:U,offset:D,status:_}),a.abrupt("return",{success:!0});case 12:return F.ZP.dismiss(c),F.ZP.error("deleteSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),F.ZP.dismiss(c),F.ZP.error(a.t0.message||"deleteSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a){return ac.apply(this,arguments)}),aG=(ad=(0,l.Z)(p().mark(function a(b,c){var d,e;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=F.ZP.loading("update"),a.prev=1,a.next=4,W.updateSession(b,c);case 4:if(!(e=a.sent)){a.next=12;break}return F.ZP.dismiss(d),F.ZP.success("updateSessionSuccess"),aE({limit:U,offset:D,status:_}),a.abrupt("return",{success:!0});case 12:return F.ZP.dismiss(d),F.ZP.error("updateSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),F.ZP.dismiss(d),F.ZP.error(a.t0.message||"updateSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a,b){return ad.apply(this,arguments)}),aH=(0,e.useCallback)((0,l.Z)(p().mark(function a(){var b;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,W.getSessionTypes();case 3:b=a.sent,q()&&Z(b.resp),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[q]);(0,e.useEffect)(function(){aH()},[]),(0,e.useEffect)(function(){aE({limit:U,offset:D,status:_})},[]),(0,e.useEffect)(function(){aE({limit:U,offset:D,status:_})},[an]),(0,e.useEffect)(function(){var a;(null==r?void 0:null===(a=r.query)|| void 0===a?void 0:a.code)&&aM(r.query.code,r.query.sessionId)},[r.query]);var aI,aJ=function(a,b){E(b),aE({limit:U,offset:b*U,status:_})},aK=function(a){V(parseInt(a.target.value,10)),E(0),aE({limit:parseInt(a.target.value,10),offset:0,status:_})},aL=(0,e.useState)(!1),aM=(aL[0],aL[1],(0,e.useCallback)((aI=(0,l.Z)(p().mark(function a(b,c){var d;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,W.startMeeting(b,c);case 3:(d=a.sent).success&&(window.history.replaceState(null,"","/sessions"),window.open(d.meetingUrl,"_blank"),aE({limit:U,offset:D,status:_})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),window.history.replaceState(null,"","/sessions"),F.ZP.error((null===a.t0|| void 0===a.t0?void 0:a.t0.message)||"failed to start session");case 11:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return aI.apply(this,arguments)}),[q])),aN=function(a){console.log({object:a}),x(a),aE((0,m.Z)({status:_,limit:U,offset:0},a))},aO=function(){af(!0),aN(u)},aP=function(){al(function(a){return!a})},aQ=function(){al(!1)};return(0,e.useEffect)(function(){console.log("Previous value:",w)},[w]),(0,d.jsxs)(g.Z,{sx:{width:"100%",scrollBehavior:"auto"},children:[["super_admin","admin"].includes(null==t?void 0:null===(o=t.role)|| void 0===o?void 0:o.name)&&(0,d.jsx)(C.Z,{endIcon:(0,d.jsx)(a3,{fontSize:"small"}),onClick:aP,sx:{ml:1,mt:1},variant:"outlined",children:"Filters"}),(0,d.jsx)(ax.Z,{elevation:12,sx:(0,m.Z)({mt:.5},{bgcolor:function(a){return(0,as.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,d.jsxs)(az.Z,{sx:{backgroundColor:"white"},children:[(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(aA.Z,{indicatorColor:"primary",onChange:aD,scrollButtons:"auto",sx:{px:2},textColor:"primary",value:_,variant:"scrollable",children:aq.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"60px",mt:"auto",mb:"auto"},icon:(0,d.jsx)(aB.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"neutral.600"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(aC.Z,{}),(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(aA.Z,{indicatorColor:"secondary",scrollButtons:"auto",sx:{px:2},textColor:"primary",value:_,variant:"scrollable",children:null==ar?void 0:ar.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"60px",mt:"auto",mb:"auto",cursor:"unset",color:"primary.dark"},icon:(0,d.jsx)(aB.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"text.primary"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(aC.Z,{}),(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(0,d.jsx)(aj,{containerRef:ag,onClose:aQ,open:ai,applyFilters:function(a){return aN(a)},clearFilters:aO}),(0,d.jsx)(a4,{open:ai}),(0,d.jsx)(g.Z,{sx:{width:"100%"},children:(0,d.jsx)(av.Z,{children:(0,d.jsxs)(at.Z,{"aria-labelledby":"tableTitle",size:"small",children:[(0,d.jsx)(ay._,{headCells:[{id:"teacher",numeric:!1,disablePadding:!0,label:"Teacher"},{id:"student",numeric:!1,disablePadding:!0,label:"Student"},{id:"status",numeric:!1,disablePadding:!0,label:"Status"},{id:"startedAt",numeric:!1,disablePadding:!0,label:"Started At"},{id:"endedAt",numeric:!1,disablePadding:!0,label:"Ended At"},{id:"subject",numeric:!0,disablePadding:!1,label:"Subject"},{id:"date",numeric:!0,disablePadding:!1,label:"Date"},{id:"startTime",numeric:!0,disablePadding:!1,label:"Start Time"},{id:"endTime",numeric:!0,disablePadding:!1,label:"End Time"},{id:"actions",numeric:!0,disablePadding:!1,label:""},{id:"delete",numeric:!0,disablePadding:!1,label:""},]}),(0,d.jsx)(au.Z,{children:z.map(function(a,b){var c="enhanced-table-checkbox-".concat(b);return(0,d.jsx)(a1,{row:a,labelId:c,deleteSession:aF,updateSession:aG,statuses:ap,setReoprtFlag:ao,reportFlag:an},null==a?void 0:a.id)})})]})})})]}),(0,d.jsx)(aw.Z,{component:"div",count:H,rowsPerPageOptions:[10,25,50,100],page:D,rowsPerPage:U,onPageChange:aJ,onRowsPerPageChange:aK})]})})]})},a6=c(1132),a7=function(){var a=(0,e.useState)("1"),b=a[0],c=a[1],f=function(a,b){c(b)};return(0,d.jsx)(g.Z,{sx:{width:"100%",typography:"body1",zoom:"77%"},children:(0,d.jsxs)(i.ZP,{value:b,children:[(0,d.jsx)(g.Z,{sx:{borderBottom:1,borderColor:"divider",p:"10px 30px"},children:(0,d.jsxs)(j.Z,{variant:"scrollable",scrollButtons:"auto",onChange:f,"aria-label":"Session options",children:[(0,d.jsx)(h.Z,{label:"List Session",value:"1"}),(0,d.jsx)(h.Z,{label:"Add Session",value:"2"})]})}),(0,d.jsx)(k.Z,{value:"1",sx:{p:.5},children:(0,d.jsx)(a5,{roleId:4})}),(0,d.jsx)(k.Z,{value:"2",children:(0,d.jsx)(aq,{})})]})})};a7.getLayout=function(a){return(0,d.jsx)(a6.a,{children:(0,d.jsx)(f.c,{children:a})})};var a8=a7},2071:function(a,b,c){"use strict";c.d(b,{K:function(){return e}});var d=c(6486),e=function(a){var b=Object.keys(a),c=[];return a?(b.forEach(function(b){((0,d.isEmpty)(a[b])||(0,d.isNil)(a[b]))&&"number"!=typeof a[b]||c.push("".concat(b,"=").concat(a[b])),("archived"===b||"exported"===b)&&c.push("".concat(b,"=").concat(a[b]))}),c.join("&")):""}}},function(a){a.O(0,[69,805,304,307,659,931,764,266,720,886,324,387,723,774,888,179],function(){var b;return a(a.s=4587)}),_N_E=a.O()}])