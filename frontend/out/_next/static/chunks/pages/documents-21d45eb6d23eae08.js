(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[976],{4970:function(a,b,c){"use strict";var d=c(4836);b.Z=void 0;var e=d(c(4938)),f=c(5893),g=(0,e.default)((0,f.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");b.Z=g},660:function(a,b,c){"use strict";var d=c(4836);b.Z=void 0;var e=d(c(4938)),f=c(5893),g=(0,e.default)((0,f.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");b.Z=g},6761:function(a,b,c){"use strict";var d=c(8169),e=c(5893);b.Z=(0,d.Z)((0,e.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},7070:function(a,b,c){"use strict";c(7294);var d=c(8169),e=c(5893);b.Z=(0,d.Z)((0,e.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},6686:function(a,b,c){"use strict";c(7294);var d=c(8169),e=c(5893);b.Z=(0,d.Z)((0,e.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},1289:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/documents",function(){return c(4497)}])},4150:function(a,b,c){"use strict";c.d(b,{t:function(){return k}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(2071),j=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getDocuments=function(a,b,c){return(0,d.Z)(g().mark(function d(){return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(d,e){var f={limit:a,offset:b,documentType:c};try{var g=h.E.get("/documents/?".concat((0,i.K)(f)));d(g)}catch(j){e(Error("Internal server error"))}}));case 1:case"end":return d.stop()}},d)}))()},b.createDocument=function(a,b,c){return(0,d.Z)(g().mark(function e(){return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,d.Z)(g().mark(function d(e,f){var i;return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:try{i=h.E.post('/documents/upload?data={"documentType": '.concat(JSON.stringify(a),', "userId": ').concat(c,"}"),b,{contentType:"multipart/form-data"}),e(i)}catch(g){f(Error("Internal server error"))}case 1:case"end":return d.stop()}},d)}));return function(a,b){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}))()},b.updateDocument=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/documents/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteDocument=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/documents/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),k=new j},4497:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return U}});var d=c(5893),e=c(9633),f=c(7357),g=c(4727),h=c(4251),i=c(4051),j=c.n(i),k=c(7294),l=c(1796),m=c(7906),n=c(295),o=c(2882),p=c(519),q=c(629),r=c(6886),s=c(155),t=c(5861),u=c(3252),v=c(3816),w=c(7922),x=c(2734),y=c(2175),z=c(3946),A=c(135),B=c(8987),C=c(6761),D=c(1134),E=c(660),F=function(a){var b=a.row,c=a.updateDocument,e=a.deleteDocument;a.labelId;var g=(0,D.ZP)(),h=(g.size,g.elapsed,g.percentage,g.download),i=(g.cancel,g.error);g.isInProgress;var j=(0,k.useState)(!1),l=j[0],m=j[1];(0,x.Z)();var n=(0,y.TA)({initialValues:{fileName:null==b?void 0:b.fileName},onSubmit:function(a){c(b.id,a),m(!1)}});return(0,k.useEffect)(function(){b&&n.setValues({fileName:null==b?void 0:b.fileName})},[b]),(0,d.jsxs)(k.Fragment,{children:[(0,d.jsxs)(v.Z,{sx:{"& > *":{borderBottom:0,cursor:"pointer"}},children:[(0,d.jsx)(u.Z,{scope:"row",onClick:function(){return m(!l)},sx:{color:"black"},children:b.fileName}),(0,d.jsxs)(u.Z,{children:[(0,d.jsx)(z.Z,{onClick:function(){return e(b.id)},sx:{p:0,ml:1,mb:1.5},children:(0,d.jsx)(C.Z,{color:"error"})}),(0,d.jsx)(z.Z,{onClick:function(){return h("https://login-api.zadulquran.com/".concat(b.fileStoragePath),b.fileName)},sx:{p:0,ml:1,mb:1.5},children:(0,d.jsx)(E.Z,{})}),i&&(0,d.jsxs)("p",{children:["possible error ",JSON.stringify(i)]})]})]}),(0,d.jsx)(v.Z,{sx:{border:0},children:(0,d.jsx)(u.Z,{style:{paddingBottom:0,paddingTop:0,border:0},colSpan:4,children:(0,d.jsx)(w.Z,{in:l,timeout:"auto",unmountOnExit:!0,children:(0,d.jsxs)(f.Z,{sx:{margin:1},children:[(0,d.jsx)(t.Z,{variant:"h6",gutterBottom:!0,component:"div",sx:{margin:0},children:"edit"}),(0,d.jsxs)("form",{onSubmit:n.handleSubmit,children:[(0,d.jsx)(A.Z,{size:"small",sx:{width:{xs:"50%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(n.touched.fileName&&n.errors.fileName),helperText:n.touched.fileName&&n.errors.fileName,label:"file name",margin:"normal",id:"fileName",name:"fileName",type:"text",onChange:n.handleChange,value:n.values.fileName}),(0,d.jsx)(B.Z,{type:"submit",size:"medium",sx:{m:1,mt:2},variant:"contained",children:"submit"})]})]})})})})]})},G=c(3184),H=function(a){var b=a.headCells;return a.rowCount,(0,x.Z)(),(0,d.jsx)(G.Z,{sx:(0,h.Z)({width:"100%",mb:2},{bgcolor:function(a){return(0,l.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,d.jsx)(v.Z,{children:b.map(function(a,b){return(0,d.jsx)(u.Z,{padding:a.disablePadding?"none":"normal",sx:{color:function(a){return a.palette.info.main}},children:a.label},a.id)})})})},I=c(7704),J=c(948),K=c(3321),L=c(4970),M=function(a){var b,c=a.createDocument,e=(0,I.a)().user,i=(0,k.useState)(!1),m=(i[0],i[1]),n=(b=(0,g.Z)(j().mark(function a(b){var d,f;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.preventDefault(),a.prev=1,console.log("file",b.target.files[0]),m(!0),(d=new FormData).append("userId",e.id),d.append("file",b.target.files[0]),a.next=9,c(d,e.id);case 9:f=a.sent,a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0),m(!1);case 16:case"end":return a.stop()}},a,null,[[1,12]])})),function(a){return b.apply(this,arguments)}),o=(0,J.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});return(0,d.jsxs)(q.Z,{elevation:9,sx:(0,h.Z)({display:"flex",flexDirection:"column",p:"10px 10px",width:"100%"},{bgcolor:function(a){return(0,l.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:[(0,d.jsx)(f.Z,{sx:{alignItems:"center",backgroundColor:"primary.light",color:"primary.contrastText",display:"flex",justifyContent:"space-between",px:3,py:2},children:(0,d.jsx)(t.Z,{color:"inherit",variant:"h6",children:"Add Document"})}),(0,d.jsx)(f.Z,{sx:{margin:1},children:(0,d.jsxs)(K.Z,{component:"label",variant:"contained",startIcon:(0,d.jsx)(L.Z,{}),children:["Upload file",(0,d.jsx)(o,{type:"file",onChange:function(a){n(a)}})]})})]})},N=M,O=c(6501),P=c(4455),Q=c(4150),R=function(){var a,b,c,e,i=(0,k.useState)(0),u=i[0],v=i[1],w=(0,k.useState)([]),x=w[0],y=w[1],z=(0,k.useState)(null==x?void 0:x.length),A=z[0],B=z[1],C=(0,k.useState)(10),D=C[0],E=C[1],G=(0,P.s)(),I=(0,k.useCallback)((a=(0,g.Z)(j().mark(function a(b,c){var d;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Q.t.getDocuments(b,c,"books");case 3:d=a.sent,G()&&(y(d.rows),B(d.count)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),O.ZP.error(a.t0.message||"failed");case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(b,c){return a.apply(this,arguments)}),[G]),J=(b=(0,g.Z)(j().mark(function a(b){var c,d;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=O.ZP.loading("Delete Documents"),a.prev=1,a.next=4,Q.t.deleteDocument(b);case 4:if(!(d=a.sent).success){a.next=12;break}return O.ZP.dismiss(c),O.ZP.success("Delete Documents "),I(D,u),a.abrupt("return",{success:!0});case 12:return O.ZP.dismiss(c),O.ZP.error("Delete DocumentsFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),O.ZP.dismiss(c),O.ZP.error(a.t0.message||"Delete DocumentsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a){return b.apply(this,arguments)}),K=(c=(0,g.Z)(j().mark(function a(b,c){var d;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=O.ZP.loading("createDocuments"),a.prev=1,console.log({values:b}),a.next=5,Q.t.createDocument({name:"books",id:1},b,c);case 5:return O.ZP.dismiss(d),O.ZP.success("createDocuments "),I(D,u),a.abrupt("return",{success:!0});case 11:return a.prev=11,a.t0=a.catch(1),O.ZP.dismiss(d),O.ZP.error(a.t0.message||"createDocumentsFailed"),a.abrupt("return",{success:!1});case 16:case"end":return a.stop()}},a,null,[[1,11]])})),function(a,b){return c.apply(this,arguments)}),L=(e=(0,g.Z)(j().mark(function a(b,c){var d,e;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=O.ZP.loading("updateDocuments"),a.prev=1,a.next=4,Q.t.updateDocument(b,c);case 4:if(!(e=a.sent).success){a.next=12;break}return O.ZP.dismiss(d),O.ZP.success("updateDocuments "),I(D,u),a.abrupt("return",{success:!0});case 12:return O.ZP.dismiss(d),O.ZP.error("updateDocumentsFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),O.ZP.dismiss(d),O.ZP.error(a.t0.message||"updateDocumentsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a,b){return e.apply(this,arguments)}),M=[{id:"name",numeric:!1,disablePadding:!0,label:"Title"},],R=function(a,b){v(b),I(D,b*D)},S=function(a){E(parseInt(a.target.value,10)),v(0),I(parseInt(a.target.value,10),0)};return(0,k.useEffect)(function(){I(D,u)},[]),(0,d.jsx)(f.Z,{sx:{width:"100%",display:"flex",flexDirection:"column"},children:(0,d.jsxs)(r.ZP,{container:!0,children:[(0,d.jsx)(r.ZP,{item:!0,lg:3.8,md:3.8,sm:3.8,xs:12,children:(0,d.jsx)(N,{createDocument:K})}),(0,d.jsx)(r.ZP,{item:!0,lg:.4,md:.4,sm:.4,xs:0,children:(0,d.jsx)(f.Z,{})}),(0,d.jsx)(r.ZP,{item:!0,lg:7.8,md:7.8,sm:7.8,xs:12,children:(0,d.jsxs)(q.Z,{elevation:9,sx:(0,h.Z)({p:"10px 10px",width:"100%"},{bgcolor:function(a){return(0,l.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:[" ",(0,d.jsx)(s.Z,{sx:{pl:{sm:2},pr:{xs:1,sm:1}},children:(0,d.jsx)(t.Z,{sx:{flex:"1 1 100%"},variant:"h5",id:"tableTitle",component:"div",children:"Document List"})}),(0,d.jsx)(o.Z,{children:(0,d.jsxs)(m.Z,{sx:{minWidth:100*M.length},"aria-labelledby":"tableTitle",size:"small",children:[(0,d.jsx)(H,{headCells:M,rowCount:A}),(0,d.jsx)(n.Z,{children:null==x?void 0:x.map(function(a,b){var c="enhanced-table-checkbox-".concat(b);return(0,d.jsx)(F,{row:a,labelId:c,updateDocument:L,deleteDocument:J},a.id)})})]})}),(0,d.jsx)(p.Z,{rowsPerPageOptions:[10,25,50],component:"div",count:A,rowsPerPage:D,page:u,onPageChange:R,onRowsPerPageChange:S})]})})]})})},S=c(1132),T=function(){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(f.Z,{sx:{width:"100%",typography:"body1"},children:(0,d.jsx)(R,{})})})};T.getLayout=function(a){return(0,d.jsx)(S.a,{children:(0,d.jsx)(e.c,{children:a})})};var U=T},2071:function(a,b,c){"use strict";c.d(b,{K:function(){return e}});var d=c(6486),e=function(a){var b=Object.keys(a),c=[];return a?(b.forEach(function(b){((0,d.isEmpty)(a[b])||(0,d.isNil)(a[b]))&&"number"!=typeof a[b]||c.push("".concat(b,"=").concat(a[b])),("archived"===b||"exported"===b)&&c.push("".concat(b,"=").concat(a[b]))}),c.join("&")):""}},1134:function(a,b,c){"use strict";c.d(b,{ZP:function(){return k}});var d=c(7294),e=c(3454),f=function(){return(f=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function g(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(b){f(b)}}function h(a){try{i(d.throw(a))}catch(b){f(b)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function h(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){return function(h){if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,h[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&h[0]?d.return:h[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,h[1])).done)return e;switch(d=0,e&&(h=[2&h[0],e.value]),h[0]){case 0:case 1:e=h;break;case 4:return g.label++,{value:h[1],done:!1};case 5:g.label++,d=h[1],h=[0];continue;case 7:h=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===h[0]||2===h[0])){g=0;continue}if(3===h[0]&&(!e||h[1]>e[0]&&h[1]<e[3])){g.label=h[1];break}if(6===h[0]&&g.label<e[1]){g.label=e[1],e=h;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(h);break}e[2]&&g.ops.pop(),g.trys.pop();continue}h=b.call(a,g)}catch(i){h=[6,i],d=0}finally{c=e=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,i])}}}var i=function(a){var b=a.setSize,c=a.setControllerCallback,d=a.setPercentageCallback,e=a.setErrorCallback;return function(a){if(!a.ok)throw Error("".concat(a.status," ").concat(a.type," ").concat(a.statusText));if(!a.body)throw Error("ReadableStream not yet supported in this browser.");var f=a.body,i=a.headers.get("content-encoding"),j=a.headers.get(i?"x-file-size":"content-length"),k=parseInt(j||"0",10);b(function(){return k});var l=0,m=new ReadableStream({start:function(a){c(a);var b=f.getReader();return function c(){return g(this,void 0,void 0,function(){return h(this,function(f){return[2,b.read().then(function(b){var e=b.done,f=b.value;return e?a.close():(l+=(null==f?void 0:f.byteLength)||0,f&&a.enqueue(f),d({loaded:l,total:k}),c())}).catch(function(c){return e(c),b.cancel("Cancelled"),a.error(c)})]})})}()}});return new Response(m)}},j=function(a,b,c){var d=new Blob([a],{type:c||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)return window.navigator.msSaveBlob(d,b);var e=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(d):window.webkitURL.createObjectURL(d),f=document.createElement("a");return f.style.display="none",f.href=e,f.setAttribute("download",b),void 0===f.download&&f.setAttribute("target","_blank"),document.body.appendChild(f),f.click(),setTimeout(function(){document.body.removeChild(f),window.URL.revokeObjectURL(e)},200)};function k(a){var b=this;void 0===a&&(a={});var c=e.env.REACT_APP_DEBUG_MODE,k=(0,d.useState)(0),l=k[0],m=k[1],n=(0,d.useState)(0),o=n[0],p=n[1],q=(0,d.useState)(0),r=q[0],s=q[1],t=(0,d.useState)(null),u=t[0],v=t[1],w=(0,d.useState)(!1),x=w[0],y=w[1],z=(0,d.useRef)(null),A=(0,d.useCallback)(function(a){var b=a.loaded,c=a.total,d=Math.round(b/c*100);p(function(){return d})},[]),B=(0,d.useCallback)(function(a){var b={"Failed to execute 'enqueue' on 'ReadableStreamDefaultController': Cannot enqueue a chunk into an errored readable stream":"Download canceled","The user aborted a request.":"Download timed out"};v(function(){return{errorMessage:b[a.message]?b[a.message]:a.message}})},[]),C=(0,d.useCallback)(function(a){z.current=a},[]),D=(0,d.useCallback)(function(){z.current&&z.current.error()},[]),E=(0,d.useCallback)(function(){C(null),m(function(){return 0}),p(function(){return 0}),s(function(){return 0}),y(function(){return!1})},[C]),F=(0,d.useCallback)(function(d,e,k){return void 0===k&&(k=0),g(b,void 0,void 0,function(){var b,g,l,n;return h(this,function(h){return x?[2,null]:(E(),v(function(){return null}),y(function(){return!0}),b=setInterval(function(){return m(function(a){return a+1})},c?1:1e3),g=i({setSize:s,setControllerCallback:C,setPercentageCallback:A,setErrorCallback:B}),l=new AbortController,n=setTimeout(function(){k>0&&l.abort()},k),[2,fetch(d,f(f({},a),{method:"GET",signal:l.signal})).then(g).then(function(a){return a.blob()}).then(function(a){return j(a,e)}).then(function(){return E(),clearInterval(b)}).catch(function(a){return E(),v(function(b){return"Failed to fetch"!==a.message?{errorMessage:a.message}:b}),clearTimeout(n),clearInterval(b)})])})})},[x,E,c,C,A,B,a]);return(0,d.useMemo)(function(){return{elapsed:l,percentage:o,size:r,download:F,cancel:D,error:u,isInProgress:x}},[l,o,r,F,D,u,x])}}},function(a){a.O(0,[805,577,307,411,266,886,723,774,888,179],function(){var b;return a(a.s=1289)}),_N_E=a.O()}])