(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{4587:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sessions",function(){return c(6100)}])},4150:function(a,b,c){"use strict";c.d(b,{t:function(){return k}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(2071),j=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getDocuments=function(a,b,c){return(0,d.Z)(g().mark(function d(){return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(d,e){var f={limit:a,offset:b,documentType:c};try{var g=h.E.get("/documents/?".concat((0,i.K)(f)));d(g)}catch(j){e(Error("Internal server error"))}}));case 1:case"end":return d.stop()}},d)}))()},b.createDocument=function(a,b,c,e){return(0,d.Z)(g().mark(function f(){return g().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",new Promise(function(){var f=(0,d.Z)(g().mark(function d(f,i){var j;return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:try{j=h.E.post('/documents/upload?data={"documentType": '.concat(JSON.stringify(a),', "userId": ').concat(c,', "reportId": ').concat(e||0,"}"),b,{contentType:"multipart/form-data"}),f(j)}catch(g){i(Error("Internal server error"))}case 1:case"end":return d.stop()}},d)}));return function(a,b){return f.apply(this,arguments)}}()));case 1:case"end":return f.stop()}},f)}))()},b.updateDocument=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/documents/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteDocument=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/documents/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),k=new j},6100:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return aH}});var d=c(5893),e=c(7294),f=c(9633),g=c(7357),h=c(44),i=c(5670),j=c(6568),k=c(4769),l=c(6263),m=c(4727),n=c(7573),o=c(4251),p=c(4051),q=c.n(p),r=c(1796),s=c(7906),t=c(295),u=c(2882),v=c(519),w=c(629),x=c(2734),y=c(3252),z=c(3184),A=c(3816),B=c(5071),C=c(5861),D=c(3946),E=c(6761),F=function(a){var b=a.headCells,c=a.numSelected,e=a.onSelectAllClick,f=a.deleteSession,g=a.rowCount;return(0,x.Z)(),(0,d.jsx)(z.Z,{sx:(0,o.Z)({width:"100%",mb:2},{bgcolor:function(a){return(0,r.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,d.jsxs)(A.Z,{children:[b.map(function(a,b){return(0,d.jsx)(y.Z,{padding:a.disablePadding?"none":"normal",sx:{color:function(a){return a.palette.info.main}},children:a.label},a.id)}),(0,d.jsx)(y.Z,{children:(0,d.jsx)(C.Z,{color:"error",sx:{fontWeight:"bold"},children:c>0&&" ".concat(c," selected")})}),(0,d.jsx)(y.Z,{padding:"checkbox",children:c>0&&(0,d.jsx)(D.Z,{onClick:function(){return f()},children:(0,d.jsx)(E.Z,{color:"error",fontSize:"medium"})})}),(0,d.jsx)(y.Z,{padding:"checkbox",children:(0,d.jsx)(B.Z,{color:"primary",indeterminate:c>0&&c<g,checked:g>0&&c===g,onChange:e,inputProps:{"aria-label":"select all desserts"}})})]})})},G=c(948),H=c(8396),I=c(3321),J=c(6242),K=c(7023),L=c(7918),M=c(7720),N=c(969),O=c(4054),P=c(135),Q=c(8972),R=c(4666),S=c(8169),T=(0,S.Z)((0,d.jsx)("svg",{viewBox:"0 0 11 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M3.29008 6.6899L7.1472 6.70013M3.28371 9.08989L7.14084 9.10012M3.29644 4.28991L7.15357 4.30014M0.731381 1.8831C0.731802 1.72397 0.799936 1.57154 0.920793 1.45934C1.04165 1.34714 1.20533 1.28436 1.37583 1.28481L9.09008 1.30526C9.26058 1.30571 9.42393 1.36936 9.54419 1.4822C9.66445 1.59504 9.73177 1.74783 9.73135 1.90696L9.70113 13.3069L7.45511 11.801L5.20114 13.295L2.95513 11.789L0.701159 13.2831L0.731381 1.8831Z",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round"})}),"BillsIcon"),U=c(7922),V=c(2175),W=c(8987),X=c(6310),Y=c(7361),Z=c.n(Y),$=c(6968),_=c.n($),aa=c(4455),ab=c(7704),ac=c(2875),ad=c(9779),ae=c(6886),af=c(3841),ag=c(6703),ah=c(6501),ai=c(5815),aj=c(5485),ak=function(){function a(){(0,ai.Z)(this,a)}var b=a.prototype;return b.getReports=function(a,b){return(0,m.Z)(q().mark(function c(){return q().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=aj.E.get("/reports",{limit:a,page:++b});c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.createReport=function(a){return(0,m.Z)(q().mark(function b(){return q().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=aj.E.post("/reports/create",a);b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateReport=function(a,b){return(0,m.Z)(q().mark(function c(){return q().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=aj.E.put("/reports/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteReport=function(a){return(0,m.Z)(q().mark(function b(){return q().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=aj.E.delete("/reports/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),al=new ak,am=c(4150),an=c(4970),ao=c(888),ap=function(a){var b,c,f,h,i,j,k,l=a.sessionDeptName,n=a.sessionId,p=a.updateSession,s=a.handleCloseCreateReport,t=a.setReoprtFlag,u=a.reportFlag,v=(0,e.useState)([]),x=v[0],y=v[1],z=(0,e.useState)([]),A=z[0],B=z[1],C=(0,e.useState)(0),D=C[0],E=C[1],F=(0,ab.a)().user,H=(0,e.useState)(!1),J=(H[0],H[1]),K=["1","2","3","4","5","6","7","8","9","10"],N=(0,aa.s)(),R=(0,e.useCallback)((c=(0,m.Z)(q().mark(function a(b,c){var d;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,am.t.getDocuments(b,c,"books");case 3:d=a.sent,N()&&y(d.rows),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),ah.ZP.error(a.t0.message||"failed");case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return c.apply(this,arguments)}),[N]),S=(0,V.TA)({initialValues:{date:new Date,sessionId:n,notes:"",homework:"",bookId:null===(b=x[0])|| void 0===b?void 0:b.id,unit:"",topic:"",level:"",newWords:"",expressions:"",rules:"",memorization:"",revision:"",tajweed:"",recitation:"",reading:"",memorizationLevel:"",revisionLevel:"",readingLevel:""},onSubmit:(f=(0,m.Z)(q().mark(function a(b){var c,d,e;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T(b);case 3:d=(c=a.sent).id,e=c.success,e&&E(d),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}},a,null,[[0,9]])})),function(a){return f.apply(this,arguments)})}),T=(h=(0,m.Z)(q().mark(function a(b){var c,d;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=ah.ZP.loading("createReports"),a.prev=1,a.next=4,al.createReport(b);case 4:return d=a.sent.id,ah.ZP.dismiss(c),ah.ZP.success("createReports "),a.abrupt("return",{id:d,success:!0});case 10:return a.prev=10,a.t0=a.catch(1),ah.ZP.dismiss(c),ah.ZP.error(a.t0.message||"createReportsFailed"),a.abrupt("return",{id:0,success:!1});case 15:case"end":return a.stop()}},a,null,[[1,10]])})),function(a){return h.apply(this,arguments)}),U=(i=(0,m.Z)(q().mark(function a(){var b;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=ah.ZP.loading("updateReports"),a.prev=1,!(0!==D)){a.next=12;break}return ah.ZP.dismiss(b),ah.ZP.success("update Report"),S.resetForm(),s(n),p(n,{status:"done",endedAt:new Date(Date.now())}),t(!u),a.abrupt("return",{success:!0});case 12:return a.abrupt("return",{success:!1});case 13:a.next=20;break;case 15:return a.prev=15,a.t0=a.catch(1),ah.ZP.dismiss(b),ah.ZP.error(a.t0.message||"updateReportsFailed"),a.abrupt("return",{success:!1});case 20:case"end":return a.stop()}},a,null,[[1,15]])})),function(){return i.apply(this,arguments)}),X=(j=(0,m.Z)(q().mark(function a(b,c,d){var e;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,am.t.createDocument({name:"reports",id:2},b,c,d);case 3:return e=a.sent,B((0,ad.Z)(A).concat([e.id])),a.abrupt("return",{success:!0});case 8:return a.prev=8,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",{success:!1});case 12:case"end":return a.stop()}},a,null,[[0,8]])})),function(a,b,c){return j.apply(this,arguments)}),Y=(k=(0,m.Z)(q().mark(function a(b){var c,d,e;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.preventDefault(),c=ah.ZP.loading("Upload file"),a.prev=2,J(!0),(d=new FormData).append("userId",F.id),d.append("file",b.target.files[0],b.target.files[0].name),a.next=9,X(d,F.id,D);case 9:e=a.sent,ah.ZP.dismiss(c),e.success?ah.ZP.success("File uploaded"):ah.ZP.error("Upload file failed"),a.next=19;break;case 14:a.prev=14,a.t0=a.catch(2),ah.ZP.dismiss(c),ah.ZP.error(a.t0.message||"Upload file failed"),J(!1);case 19:case"end":return a.stop()}},a,null,[[2,14]])})),function(a){return k.apply(this,arguments)}),Z=(0,G.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});return(0,e.useEffect)(function(){R(1e3,0)},[]),(0,d.jsx)(g.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",bgcolor:"#CAF0F8",overflowX:"hidden"},children:(0,d.jsxs)(w.Z,{elevation:9,sx:{display:"flex",alignItems:"center",flexDirection:"column",p:"10px 10px",mr:1,width:"95%",bgcolor:"#CAF0F8"},children:[" ",(0,d.jsx)(ae.ZP,{container:!0,children:D?(0,d.jsxs)(ae.ZP,{item:!0,xs:12,children:[" ",(0,d.jsxs)("div",{style:{textAlign:"center"},children:[(0,d.jsxs)(I.Z,{component:"label",variant:"contained",startIcon:(0,d.jsx)(an.Z,{}),children:["Upload file",(0,d.jsx)(Z,{type:"file",onChange:function(a){Y(a)}})]}),A.map(function(a){return(0,d.jsx)(ao.Z,{color:"success",sx:{position:"relative",top:10,ml:1}},a)})]}),(0,d.jsx)(M.Z,{sx:{mb:1,mt:2,mr:1}}),(0,d.jsx)("div",{style:{textAlign:"center"},children:(0,d.jsx)(W.Z,{type:"submit",onClick:function(){return U()},sx:{"& .MuiInputBase-root":{height:40},m:.5,p:1},variant:"contained",children:"Submit"})})]}):(0,d.jsx)(ae.ZP,{item:!0,xs:12,children:(0,d.jsxs)("form",{onSubmit:S.handleSubmit,children:[(0,d.jsx)(M.Z,{textAlign:"left",sx:{mb:1},children:(0,d.jsx)(L.Z,{label:"Feedback Report",sx:{fontWeight:"600"}})}),"Quran"!=l&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(O.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-level",children:"Grade"}),(0,d.jsx)(ag.Z,{name:"level",id:"outlined-level",labelId:"outlined-level",value:S.values.level,onChange:function(a){S.setFieldValue("level",a.target.value)},children:K.map(function(a){return(0,d.jsxs)(Q.Z,{sx:(0,ac.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,r.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:[a," / 10"]},a)})})]}),(0,d.jsxs)(O.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-adornment-bookId",children:"Book"}),(0,d.jsx)(ag.Z,{name:"bookId",id:"outlined-adornment-bookId",labelId:"outlined-adornment-bookId",value:S.values.bookId,onChange:function(a){S.setFieldValue("bookId",a.target.value),console.log(a.target.value)},children:null==x?void 0:x.map(function(a){return(0,d.jsx)(Q.Z,{sx:(0,ac.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,r.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:null==a?void 0:a.id,children:null==a?void 0:a.fileName},null==a?void 0:a.id)})})]}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.unit&&S.errors.unit),helperText:S.touched.unit&&S.errors.unit,label:"Unit",margin:"normal",id:"unit",name:"unit",type:"text",onChange:S.handleChange,value:S.values.unit,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.topic&&S.errors.topic),helperText:S.touched.topic&&S.errors.topic,label:"Topic",margin:"normal",id:"topic",name:"topic",type:"text",onChange:S.handleChange,value:S.values.topic,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}})]}),"Arabic"===l&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)(P.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(S.touched.newWords&&S.errors.newWords),helperText:S.touched.newWords&&S.errors.newWords,label:"New Words",margin:"normal",id:"newWords",name:"newWords",type:"text",onChange:S.handleChange,value:S.values.newWords,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(S.touched.expressions&&S.errors.expressions),helperText:S.touched.expressions&&S.errors.expressions,label:"Expressions",margin:"normal",id:"expressions",name:"expressions",type:"text",onChange:S.handleChange,value:S.values.expressions,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(S.touched.rules&&S.errors.rules),helperText:S.touched.rules&&S.errors.rules,label:"Rules",margin:"normal",id:"rules",name:"rules",type:"text",onChange:S.handleChange,value:S.values.rules,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}})]}),"Quran"===l&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.memorization&&S.errors.memorization),helperText:S.touched.memorization&&S.errors.memorization,label:"Memorization",margin:"normal",id:"memorization",name:"memorization",type:"text",onChange:S.handleChange,value:S.values.memorization,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.revision&&S.errors.revision),helperText:S.touched.revision&&S.errors.revision,label:"Revision",margin:"normal",id:"revision",name:"revision",type:"text",onChange:S.handleChange,value:S.values.revision,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.tajweed&&S.errors.tajweed),helperText:S.touched.tajweed&&S.errors.tajweed,label:"Tajweed",margin:"normal",id:"tajweed",name:"tajweed",type:"text",onChange:S.handleChange,value:S.values.tajweed,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.recitation&&S.errors.recitation),helperText:S.touched.recitation&&S.errors.recitation,label:"Recitation",margin:"normal",id:"recitation",name:"recitation",type:"text",onChange:S.handleChange,value:S.values.recitation,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.reading&&S.errors.reading),helperText:S.touched.reading&&S.errors.reading,label:"Reading",margin:"normal",id:"reading",name:"reading",type:"text",onChange:S.handleChange,value:S.values.reading,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsxs)(O.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-memorizationLevel",children:"Memorization Grade"}),(0,d.jsx)(ag.Z,{name:"memorizationLevel",id:"outlined-memorizationLevel",labelId:"outlined-memorizationLevel",value:S.values.memorizationLevel,onChange:function(a){S.setFieldValue("memorizationLevel",a.target.value)},children:K.map(function(a){return(0,d.jsx)(Q.Z,{sx:(0,ac.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,r.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]}),(0,d.jsxs)(O.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-revisionLevel",children:"Revision Grade"}),(0,d.jsx)(ag.Z,{name:"revisionLevel",id:"outlined-revisionLevel",labelId:"outlined-revisionLevel",value:S.values.revisionLevel,onChange:function(a){S.setFieldValue("revisionLevel",a.target.value)},children:K.map(function(a){return(0,d.jsx)(Q.Z,{sx:(0,ac.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,r.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]}),(0,d.jsxs)(O.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-readingLevel",children:"Reading Grade"}),(0,d.jsx)(ag.Z,{name:"readingLevel",id:"outlined-readingLevel",labelId:"outlined-readingLevel",value:S.values.readingLevel,onChange:function(a){S.setFieldValue("readingLevel",a.target.value)},children:K.map(function(a){return(0,d.jsx)(Q.Z,{sx:(0,ac.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,r.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]})]}),(0,d.jsx)(P.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(S.touched.homework&&S.errors.homework),helperText:S.touched.homework&&S.errors.homework,label:"H.W",margin:"normal",id:"homework",name:"homework",type:"text",onChange:S.handleChange,value:S.values.homework,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{multiline:!0,minRows:2,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:80},mr:1},error:Boolean(S.touched.notes&&S.errors.notes),helperText:S.touched.notes&&S.errors.notes,label:"Notes",margin:"normal",id:"notes",name:"notes",type:"text",onChange:S.handleChange,value:S.values.notes,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(M.Z,{sx:{mb:1,mt:2}}),(0,d.jsx)("div",{style:{textAlign:"right"},children:(0,d.jsx)(W.Z,{type:"submit",sx:{"& .MuiInputBase-root":{height:40},m:.5,p:1},variant:"contained",children:"Submit"})})]})})})," "]})})},aq=ap,ar=c(8462),as=c(891),at=c(381),au=c.n(at),av=c(1134),aw=c(660),ax=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,x,y,z,A=a.session;a.handleCloseReport;var B=(0,av.ZP)(),E=(B.size,B.elapsed,B.percentage,B.download),F=(B.cancel,B.error);return B.isInProgress,(0,d.jsxs)(w.Z,{elevation:12,sx:{display:"flex",flexDirection:"column",padding:"20px 25px",minHeight:"fit-content",m:1,bgcolor:"#CAF0F8"},children:[(0,d.jsx)(C.Z,{color:"inherit",variant:"h6",children:"Session information"}),(0,d.jsx)(M.Z,{textAlign:"left",sx:{m:1},children:(0,d.jsx)(L.Z,{label:"Primary Details",sx:{fontWeight:"600"}})}),(0,d.jsxs)(ae.ZP,{container:!0,component:ar.Z,children:[(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:7,children:[(0,d.jsxs)(as.ZP,{children:["Teacher:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==A?void 0:null===(b=A.patch)|| void 0===b?void 0:null===(c=b.teacher)|| void 0===c?void 0:c.firstName," ").concat(null==A?void 0:null===(e=A.patch)|| void 0===e?void 0:null===(f=e.teacher)|| void 0===f?void 0:f.lastName)||"no data"})," "]}),(0,d.jsxs)(as.ZP,{children:["Subject:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:null===(g=A.patch)|| void 0===g?void 0:null===(h=g.department)|| void 0===h?void 0:h.name)||"No data"})," "]}),(0,d.jsxs)(as.ZP,{children:["Date:",(0,d.jsxs)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",au()(null==A?void 0:A.date).format("YYYY-MM-DD")||"no data"]})," "]})," ",(0,d.jsxs)(as.ZP,{children:["Start Time:",(0,d.jsxs)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",(null==A?void 0:A.startTime)?"".concat(au()("".concat(null==A?void 0:A.date.substr(0,11)).concat(A.startTime).concat(A.date.substr(19,24))).format("hh:mm A")):"no data"]})," "]}),(0,d.jsxs)(as.ZP,{children:["Teacher Joined At:",(0,d.jsxs)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",au()(null==A?void 0:A.startedAt).format("hh:mm A")||"no data"]})," "]}),(0,d.jsxs)(as.ZP,{children:["Student Joined At:",(0,d.jsxs)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",au()(null==A?void 0:A.joinedAt).format("hh:mm A")||"no data"]})," "]})]}),(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:5,children:[(0,d.jsxs)(as.ZP,{children:["Student:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"120px"},children:"".concat(null==A?void 0:null===(i=A.patch)|| void 0===i?void 0:null===(j=i.student)|| void 0===j?void 0:j.firstName," ").concat(null==A?void 0:null===(k=A.patch)|| void 0===k?void 0:null===(l=k.student)|| void 0===l?void 0:l.lastName)||"no data"})," "]}),(0,d.jsxs)(as.ZP,{children:["Session Type:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:null===(m=A.sessionType)|| void 0===m?void 0:m.name)||"No data"})," "]}),(0,d.jsxs)(as.ZP,{children:["Status:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:A.status)||"no data"})]}),(0,d.jsxs)(as.ZP,{children:["End Time:",(0,d.jsxs)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",(null==A?void 0:A.endTime)?au()("".concat(null==A?void 0:A.date.substr(0,11)).concat(A.endTime).concat(A.date.substr(19,24))).format("hh:mm A"):"no data"]})," "]}),(0,d.jsxs)(as.ZP,{children:["Ended At:",(0,d.jsxs)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",au()(null==A?void 0:A.endedAt).format("YYYY-MM-DD hh:mm A")||"no data"]})," "]})]})]}),(null==A?void 0:A.report)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(M.Z,{textAlign:"left",sx:{m:1},children:(0,d.jsx)(L.Z,{label:"Feedback ",sx:{fontWeight:"600"}})}),(0,d.jsxs)(ae.ZP,{container:!0,component:ar.Z,children:[(0,d.jsxs)(ae.ZP,{item:!0,xs:12,children:[" ",(0,d.jsxs)(ae.ZP,{container:!0,component:ar.Z,sx:{p:0},children:[(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[" ",(null==A?void 0:A.report.date)&&(0,d.jsxs)(as.ZP,{children:["Submition Date:",(0,d.jsxs)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",au()((null==A?void 0:A.report.date)||"No data").format("MMM-D-YYYY")]})," "]})]}),(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[" ",(null==A?void 0:A.report.document[0])&&(null==A?void 0:A.report.document.map(function(a,b){return(0,d.jsxs)(as.ZP,{children:["File:",b+1,(0,d.jsxs)(D.Z,{onClick:function(){return E("https://login-api.zadulquran.com/".concat(a.fileStoragePath),a.fileName)},sx:{p:.5,ml:1,color:"black",border:"1px solid black",fontSize:"16px"},children:["Download "," ",(0,d.jsx)(aw.Z,{fontSize:"medium"})]}),F&&(0,d.jsxs)("p",{style:{color:"red"},children:["possible error ",JSON.stringify(F)]})]},b)}))]})]}),(null===(n=A.patch)|| void 0===n?void 0:null===(o=n.department)|| void 0===o?void 0:o.name)!="Quran"&&(0,d.jsxs)(ae.ZP,{container:!0,component:ar.Z,children:[(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[(null==A?void 0:A.report.level)&&(0,d.jsxs)(as.ZP,{children:["Grade:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==A?void 0:A.report.level," / 10")||0})," "]}),(null==A?void 0:A.report.book)&&(0,d.jsxs)(as.ZP,{children:["Book:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null===(p=null==A?void 0:A.report.book)|| void 0===p?void 0:p.fileName)||"No data"})," "]})]}),(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[(null==A?void 0:A.report.unit)&&(0,d.jsxs)(as.ZP,{children:["Unit:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:A.report.unit)||"No data"})," "]}),(null==A?void 0:A.report.topic)&&(0,d.jsxs)(as.ZP,{children:["Topic:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:A.report.topic)||"No data"})," "]})]})," "]}),(null===(q=A.patch)|| void 0===q?void 0:null===(r=q.department)|| void 0===r?void 0:r.name)=="Arabic"&&(0,d.jsxs)(d.Fragment,{children:[(null==A?void 0:A.report.newWords)&&(0,d.jsxs)(as.ZP,{children:["New Words:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:A.report.newWords)||"No data"})," "]}),(null==A?void 0:A.report.expressions)&&(0,d.jsxs)(as.ZP,{children:["Expressions:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:A.report.expressions)||"No data"})," "]}),(null==A?void 0:A.report.rules)&&(0,d.jsxs)(as.ZP,{children:["Rules:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:A.report.rules)||"No data"})," "]})]}),(null===(s=A.patch)|| void 0===s?void 0:null===(t=s.department)|| void 0===t?void 0:t.name)=="Quran"&&(0,d.jsxs)(ae.ZP,{container:!0,component:ar.Z,children:[(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,children:[" ",(null==A?void 0:A.report.memorization)&&(0,d.jsxs)(as.ZP,{children:["Memorization:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:A.report.memorization)||"No data"})," "]}),(null==A?void 0:A.report.revision)&&(0,d.jsxs)(as.ZP,{children:["Revision:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:A.report.revision)||"No data"})," "]}),(null==A?void 0:A.report.recitation)&&(0,d.jsxs)(as.ZP,{children:["Recitation:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:A.report.recitation)||"No data"})," "]}),(null==A?void 0:A.report.reading)&&(0,d.jsxs)(as.ZP,{children:["Reading:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:A.report.reading)||"No data"})," "]})]}),(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,children:[(null==A?void 0:A.report.memorizationLevel)&&(0,d.jsxs)(as.ZP,{children:["Memorization Grade:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==A?void 0:A.report.memorizationLevel,"  / 10")||0})," "]}),(null==A?void 0:A.report.revisionLevel)&&(0,d.jsxs)(as.ZP,{children:["Revision Grade:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==A?void 0:A.report.revisionLevel,"  / 10")||0})," "]}),(null==A?void 0:A.report.tajweed)&&(0,d.jsxs)(as.ZP,{children:["Tajweed:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:A.report.tajweed)||"No data"})," "]}),(null==A?void 0:A.report.readingLevel)&&(0,d.jsxs)(as.ZP,{children:["Reading Grade:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==A?void 0:null===(u=A.report)|| void 0===u?void 0:u.readingLevel,"  / 10")||0})," "]})]})]})]}),(null==A?void 0:null===(v=A.report)|| void 0===v?void 0:v.homework)&&(0,d.jsxs)(as.ZP,{children:["H.W:",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:null===(x=A.report)|| void 0===x?void 0:x.homework)||"No data"})," "]}),(null==A?void 0:null===(y=A.report)|| void 0===y?void 0:y.notes)&&(0,d.jsxs)(as.ZP,{children:["Notes:"," ",(0,d.jsx)(C.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==A?void 0:null===(z=A.report)|| void 0===z?void 0:z.notes)||"No data"})," "]})]})]})]})},ay=function(a){var b,c,f,h,i,j,k,n,o,p,r,s,t,u,v,w,z,E,F,G,H,J,K,M,S,Y,$,ac,ad=a.row,ae=a.isItemSelected,af=a.labelId,ag=a.handleClick,ah=a.updateSession,ai=a.statuses,aj=a.setReoprtFlag,ak=a.reportFlag;(0,aa.s)();var al=(0,ab.a)().user,am=(0,e.useState)(!1),an=am[0],ao=am[1],ap=(0,e.useState)(!1),ar=ap[0],as=ap[1],at=(0,e.useState)(!1),av=at[0],aw=at[1];(0,x.Z)();var ay,az=(null==ad?void 0:ad.status)==="done"?"success":(null==ad?void 0:ad.status)==="cancelled"||(null==ad?void 0:ad.status)==="expired"?"error":(null==ad?void 0:ad.status)==="waiting"?"warning":(null==ad?void 0:ad.status)==="rescheduled"?"info":"primary",aA=["".concat(null==ad?void 0:null===(b=ad.patch)|| void 0===b?void 0:null===(c=b.teacher)|| void 0===c?void 0:c.firstName," ").concat(null==ad?void 0:null===(f=ad.patch)|| void 0===f?void 0:null===(h=f.teacher)|| void 0===h?void 0:h.lastName)||"no data","".concat(null==ad?void 0:null===(i=ad.patch)|| void 0===i?void 0:null===(j=i.student)|| void 0===j?void 0:j.firstName," ").concat(null==ad?void 0:null===(k=ad.patch)|| void 0===k?void 0:null===(n=k.student)|| void 0===n?void 0:n.lastName)||"no data",(null==ad?void 0:ad.status)?(0,d.jsx)(L.Z,{label:null==ad?void 0:ad.status,color:az}):"no data","".concat(au()(null==ad?void 0:ad.startedAt).format("YYYY-MM-DD hh:mm A"))||"no data","".concat(au()(null==ad?void 0:ad.endedAt).format("YYYY-MM-DD hh:mm A"))||"no data",(null==ad?void 0:null===(o=ad.patch)|| void 0===o?void 0:null===(p=o.department)|| void 0===p?void 0:p.name)||"no data","".concat(au()(null==ad?void 0:ad.date).format("YYYY-MM-DD"))||"no data","".concat(au()("".concat(null==ad?void 0:ad.date.substr(0,11)).concat(ad.startTime).concat(ad.date.substr(19,24))).format("hh:mm A"))||"no data","".concat(au()("".concat(null==ad?void 0:ad.date.substr(0,11)).concat(ad.endTime).concat(ad.date.substr(19,24))).format("hh:mm A"))||"no data",],aB=function(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){if("object"==typeof a[c]&&null!==a[c]){var d=aB(a[c]);for(var e in d)d.hasOwnProperty(e)&&(b[c+"."+e]=d[e])}else b[c]=a[c]}return b},aC=(0,V.TA)({initialValues:{sessionMethod:null==ad?void 0:ad.sessionMethod,title:null==ad?void 0:ad.title,status:null==ad?void 0:ad.status,date:null==ad?void 0:ad.date,startTime:null==ad?void 0:ad.startTime,endTime:null==ad?void 0:ad.endTime},enableReinitialize:!0,validationSchema:X.Ry({sessionMethod:X.Z_().required("sessionMethod is required"),title:X.Z_().max(255).required("title is required"),status:X.Z_().max(255).required("status is required"),date:X.hT().required("date is required"),startTime:X.Z_().required("startTime is required"),endTime:X.Z_().required("endTime is required")}),onSubmit:(ay=(0,m.Z)(q().mark(function a(b){var c,d,e,f;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=aB(aC.initialValues),e={},null===(c=Object.entries(d))|| void 0===c||c.map(function(a){var c=(0,N.Z)(a,2),d=c[0],f=c[1],g=Z()(b,d);g!==f&&_()(e,d,g)}),a.next=6,ah(ad.id,e);case 6:(f=a.sent.success)&&ao(!1);case 8:case"end":return a.stop()}},a)})),function(a){return ay.apply(this,arguments)})}),aD=function(){as(!0)},aE=function(){as(!1)},aF=function(){aw(!0)},aG=function(){aw(!1)},aH=function(){var a,b,c=null==ad?void 0:null===(a=ad.patch)|| void 0===a?void 0:null===(b=a.student)|| void 0===b?void 0:b.zoomLink,d=new URL("https://zoom.us/"),e=new URL(c,d);window.open(e.toString(),"new")};return(0,e.useEffect)(function(){if(ad){var a;aC.setValues({sessionMethod:null==ad?void 0:ad.sessionMethod,title:null==ad?void 0:ad.title,status:null==ad?void 0:ad.status,date:null==ad?void 0:null===(a=ad.date)|| void 0===a?void 0:a.substr(0,10),startTime:null==ad?void 0:ad.startTime,endTime:null==ad?void 0:ad.endTime})}},[ad]),(0,d.jsxs)(e.Fragment,{children:[(0,d.jsxs)(A.Z,{sx:{"& > *":{borderBottom:0,cursor:"pointer"}},children:[null==aA?void 0:aA.map(function(a,b){return(0,d.jsx)(y.Z,{scope:"row",onClick:function(){return ao(!an)},sx:{color:"black"},children:a},b)}),(0,d.jsx)(y.Z,{scope:"row",sx:{color:"black"},children:(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(null==ad?void 0:ad.status)==="running"&&(null==ad?void 0:ad.startedAt)===null&&(null==ad?void 0:null===(r=ad.zoomSessionMeetings)|| void 0===r?void 0:r.length)<1&&(null==al?void 0:null===(s=al.role)|| void 0===s?void 0:s.name)!=="student"&&(null==al?void 0:null===(t=al.role)|| void 0===t?void 0:t.name)!=="parent"&&(0,d.jsx)(I.Z,{variant:"contained",onClick:function(){ah(ad.id,{startedAt:new Date}),aH()},sx:{fontSize:12,mr:1},size:"small",children:"Start"}),(null==ad?void 0:ad.status)==="running"&&(0,d.jsxs)(d.Fragment,{children:[(null==al?void 0:null===(u=al.role)|| void 0===u?void 0:u.name)!=="student"&&(null==al?void 0:null===(v=al.role)|| void 0===v?void 0:v.name)!=="parent"&&(null==ad?void 0:ad.startedAt)!==null&&(0,d.jsx)(I.Z,{variant:"contained",color:"error",onClick:function(){aD()},sx:{fontSize:12,mr:1},size:"small",children:"End"}),(null==ad?void 0:null===(w=ad.zoomSessionMeetings)|| void 0===w?void 0:w.length)<1&&(0,d.jsx)(I.Z,{variant:"contained",color:"success",onClick:function(){var a;(null==al?void 0:null===(a=al.role)|| void 0===a?void 0:a.name)==="student"&&(null==ad?void 0:ad.joinedAt)===null&&ah(ad.id,{joinedAt:new Date}),aH()},sx:{fontSize:12,mr:1,backgroundColor:"green"},size:"small",children:"Join"})]}),(null==ad?void 0:ad.status)!=="done"&&(null==ad?void 0:ad.status)!=="cancelled"&&(null==ad?void 0:ad.status)!=="running"&&((null==al?void 0:null===(z=al.role)|| void 0===z?void 0:z.name)==="admin"||(null==al?void 0:null===(E=al.role)|| void 0===E?void 0:E.name)==="super_admin")&&(0,d.jsx)(I.Z,{variant:"contained",color:"error",onClick:function(){return ah(ad.id,{status:"cancelled"})},sx:{fontSize:12},size:"small",children:"Cancel"})]})}),(0,d.jsx)(y.Z,{scope:"row",sx:{color:"black"},children:(0,d.jsx)(D.Z,{onClick:function(){return aF()},sx:{p:0,ml:1,mb:1.5},children:(0,d.jsx)(T,{color:"primary"})})}),(0,d.jsx)(y.Z,{onClick:function(a){return ag(a,ad.id)},role:"checkbox","aria-checked":ae,padding:"checkbox",children:(0,d.jsx)(B.Z,{color:"primary",checked:ae,inputProps:{"aria-labelledby":af}})})]}),(0,d.jsx)(A.Z,{sx:{border:0},children:(0,d.jsxs)(y.Z,{style:{paddingBottom:0,paddingTop:0,border:0},colSpan:12,children:[" ",((null==al?void 0:null===(F=al.role)|| void 0===F?void 0:F.name)==="admin"||(null==al?void 0:null===(G=al.role)|| void 0===G?void 0:G.name)==="super_admin")&&(0,d.jsx)(U.Z,{in:an,timeout:"auto",unmountOnExit:!0,children:(0,d.jsxs)(g.Z,{sx:{margin:1},children:[(0,d.jsx)(C.Z,{variant:"h6",gutterBottom:!0,component:"div",sx:{margin:0},children:"edit"}),(0,d.jsxs)("form",{onSubmit:aC.handleSubmit,children:[(0,d.jsx)(O.Z,{children:(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Session Method",name:"sessionMethod",value:aC.values.sessionMethod,error:Boolean(aC.errors.sessionMethod&&aC.touched.sessionMethod),helperText:aC.touched.sessionMethod&&(null===(H=aC.errors.sessionMethod)|| void 0===H?void 0:H.toString()),InputLabelProps:{shrink:!!aC.values.sessionMethod},fullWidth:!0,required:!0,select:!0,onChange:aC.handleChange,children:l.Q.map(function(a){return(0,d.jsx)(Q.Z,{value:a.value,children:a.label},a.value)})})}),(0,d.jsx)(P.Z,{label:"Title",name:"title",type:"text",onChange:aC.handleChange,value:aC.values.title,error:Boolean(aC.errors.title&&aC.touched.title),helperText:aC.touched.title&&(null===(J=aC.errors.title)|| void 0===J?void 0:J.toString()),size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1}}),(0,d.jsx)(O.Z,{children:(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Status",name:"status",value:aC.values.status,error:Boolean(aC.errors.status&&aC.touched.status),helperText:aC.touched.status&&(null===(K=aC.errors.status)|| void 0===K?void 0:K.toString()),InputLabelProps:{shrink:!!aC.values.status},fullWidth:!0,required:!0,select:!0,onChange:aC.handleChange,children:ai.map(function(a){return(0,d.jsx)(Q.Z,{value:a,children:a},a)})})}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Date",name:"date",type:"date",onChange:aC.handleChange,value:aC.values.date,error:Boolean(aC.errors.date&&aC.touched.date),helperText:aC.touched.date&&(null===(M=aC.errors.date)|| void 0===M?void 0:M.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Start Time(UTC)",name:"startTime",type:"time",onChange:aC.handleChange,value:aC.values.startTime,error:Boolean(aC.errors.startTime&&aC.touched.startTime),helperText:aC.touched.startTime&&(null===(S=aC.errors.startTime)|| void 0===S?void 0:S.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"End Time(UTC)",name:"endTime",type:"time",onChange:aC.handleChange,value:aC.values.endTime,error:Boolean(aC.errors.endTime&&aC.touched.endTime),helperText:aC.touched.endTime&&(null===(Y=aC.errors.endTime)|| void 0===Y?void 0:Y.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(W.Z,{type:"submit",sx:{width:{xs:15,sm:20,md:30,lg:40,xl:50},"& .MuiInputBase-root":{height:40}},variant:"contained",children:"submit"})]})]})})]})}),(0,d.jsx)(R.Z,{maxWidth:"md",open:ar,children:(0,d.jsx)(aq,{setReoprtFlag:aj,reportFlag:ak,sessionDeptName:null===($=ad.patch)|| void 0===$?void 0:null===(ac=$.department)|| void 0===ac?void 0:ac.name,sessionId:ad.id,updateSession:ah,handleCloseCreateReport:aE})}),(0,d.jsx)(R.Z,{maxWidth:"md",open:av,onClose:aG,children:(0,d.jsx)(ax,{session:ad,handleCloseReport:aG})})]})},az=c(1076),aA=c(1163),aB=c(9103),aC=(0,S.Z)((0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),"Filter"),aD=(0,G.ZP)("div",{shouldForwardProp:function(a){return"open"!==a}})(function(a){var b,c,d=a.theme,e=a.open;return(0,o.Z)((b={flexGrow:1,overflow:"hidden",zIndex:1},(0,n.Z)(b,d.breakpoints.up("lg"),{marginLeft:-380}),(0,n.Z)(b,"transition",d.transitions.create("margin",{easing:d.transitions.easing.sharp,duration:d.transitions.duration.leavingScreen})),b),e&&(c={},(0,n.Z)(c,d.breakpoints.up("lg"),{marginLeft:0}),(0,n.Z)(c,"transition",d.transitions.create("margin",{easing:d.transitions.easing.easeOut,duration:d.transitions.duration.enteringScreen})),c))}),aE=function(a){var b,c,f,i,j,k,l,n,p=(0,aa.s)(),x=(0,aA.useRouter)(),y=(0,ab.a)().user,z=(0,e.useState)([]),A=z[0],B=z[1],C={date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null},D=(0,e.useState)({}),E=D[0],G=D[1],N=(0,e.useState)([]),O=N[0],P=N[1],Q=(0,e.useState)(0),R=Q[0],S=Q[1],T=(0,e.useState)(0),U=T[0],V=T[1],W=(0,e.useState)([]),X=W[0],Y=W[1],Z=(0,e.useState)([]),$=Z[0],_=Z[1],ac=(0,e.useState)(0),ad=ac[0],ae=ac[1],af=(0,e.useState)(25),ag=af[0],ai=af[1],aj=(0,e.useState)([]),ak=aj[0],al=aj[1],am=(0,e.useState)("waiting"),an=am[0],ao=am[1];(0,H.Z)(function(a){return a.breakpoints.up("md")},{noSsr:!1});var ap,aq,ar,as=(0,e.useState)(!0),at=(as[0],as[1]),au=(0,e.useRef)(null),av=(0,e.useState)(!1),aw=av[0],ax=av[1],aE=(0,e.useState)(!1),aF=aE[0],aG=aE[1],aH=["waiting","expired","running","done","cancelled","absent","rescheduled",],aI=[{label:"all",value:"",count:ad},{label:"waiting",value:"waiting",count:null===(b=X.find(function(a){return a.status.match("waiting")}))|| void 0===b?void 0:b.count},{label:"running",value:"running",count:null===(c=X.find(function(a){return a.status.match("running")}))|| void 0===c?void 0:c.count},{label:"done",value:"done",count:null===(f=X.find(function(a){return a.status.match("done")}))|| void 0===f?void 0:f.count},{label:"cancelled",value:"cancelled",count:null===(i=X.find(function(a){return a.status.match("cancelled")}))|| void 0===i?void 0:i.count},{label:"expired",value:"expired",count:null===(j=X.find(function(a){return a.status.match("expired")}))|| void 0===j?void 0:j.count},{label:"absent",value:"absent",count:null===(k=X.find(function(a){return a.status.match("absent")}))|| void 0===k?void 0:k.count},{label:"rescheduled",value:"rescheduled",count:null===(l=X.find(function(a){return a.status.match("rescheduled")}))|| void 0===l?void 0:l.count},],aJ=null==ak?void 0:ak.map(function(a){var b;return{label:a.name,value:a.duration,count:null===(b=$.find(function(b){return(null==b?void 0:b.sessionTypeId)===a.id}))|| void 0===b?void 0:b.count}}),aK=function(a){if(a.target.checked){B(O.map(function(a){return a.id}));return}B([])},aL=function(a,b){var c=A.indexOf(b),d=[];-1===c?d=d.concat(A,b):0===c?d=d.concat(A.slice(1)):c===A.length-1?d=d.concat(A.slice(0,-1)):c>0&&(d=d.concat(A.slice(0,c),A.slice(c+1))),B(d)},aM=function(a,b){ao(b),aN({limit:ag,offset:0,status:b})},aN=(0,e.useCallback)((ap=(0,m.Z)(q().mark(function a(b){var c;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,az.Q.getSessions((0,o.Z)({},b));case 3:c=a.sent,p()&&(P(c.rows),V(c.count),Y(c.statusCount),_(c.typesCount),ae(c.totalCount)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a){return ap.apply(this,arguments)}),[p,E]),aO=(aq=(0,m.Z)(q().mark(function a(){var b,c;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=ah.ZP.loading("delete"),a.prev=1,a.next=4,az.Q.deleteSession(A);case 4:if(!(c=a.sent)){a.next=13;break}return ah.ZP.dismiss(b),ah.ZP.success("deleteSessionSuccess"),aN({limit:ag,offset:R,status:an}),B([]),a.abrupt("return",{success:!0});case 13:return ah.ZP.dismiss(b),ah.ZP.error("deleteSessionFailed"),a.abrupt("return",{success:!1});case 16:a.next=23;break;case 18:return a.prev=18,a.t0=a.catch(1),ah.ZP.dismiss(b),ah.ZP.error(a.t0.message||"deleteSessionsFailed"),a.abrupt("return",{success:!1});case 23:case"end":return a.stop()}},a,null,[[1,18]])})),function(){return aq.apply(this,arguments)}),aP=(ar=(0,m.Z)(q().mark(function a(b,c){var d,e;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=ah.ZP.loading("update"),a.prev=1,a.next=4,az.Q.updateSession(b,c);case 4:if(!(e=a.sent)){a.next=12;break}return ah.ZP.dismiss(d),ah.ZP.success("updateSessionSuccess"),aN({limit:ag,offset:R,status:an}),a.abrupt("return",{success:!0});case 12:return ah.ZP.dismiss(d),ah.ZP.error("updateSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),ah.ZP.dismiss(d),ah.ZP.error(a.t0.message||"updateSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a,b){return ar.apply(this,arguments)}),aQ=(0,e.useCallback)((0,m.Z)(q().mark(function a(){var b;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,az.Q.getSessionTypes();case 3:b=a.sent,p()&&al(b.resp),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[p]);(0,e.useEffect)(function(){aQ()},[]),(0,e.useEffect)(function(){aN({limit:ag,offset:R,status:an})},[]),(0,e.useEffect)(function(){aN({limit:ag,offset:R,status:an})},[aF]),(0,e.useEffect)(function(){var a;(null==x?void 0:null===(a=x.query)|| void 0===a?void 0:a.code)&&aV(x.query.code,x.query.sessionId)},[x.query]);var aR,aS=function(a,b){S(b),aN({limit:ag,offset:b*ag,status:an})},aT=function(a){ai(parseInt(a.target.value,10)),S(0),aN({limit:parseInt(a.target.value,10),offset:0,status:an})},aU=(0,e.useState)(!1),aV=(aU[0],aU[1],(0,e.useCallback)((aR=(0,m.Z)(q().mark(function a(b,c){var d;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,az.Q.startMeeting(b,c);case 3:(d=a.sent).success&&(window.history.replaceState(null,"","/sessions"),window.open(d.meetingUrl,"_blank"),aN({limit:ag,offset:R,status:an})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),window.history.replaceState(null,"","/sessions"),ah.ZP.error((null===a.t0|| void 0===a.t0?void 0:a.t0.message)||"failed to start session");case 11:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return aR.apply(this,arguments)}),[p])),aW=function(a){console.log({object:a}),G(a),aN((0,o.Z)({status:an,limit:ag,offset:0},a))},aX=function(){at(!0),aW(C)},aY=function(){ax(function(a){return!a})},aZ=function(){ax(!1)};return(0,e.useEffect)(function(){console.log("Previous value:",E)},[E]),(0,d.jsxs)(g.Z,{sx:{width:"100%",scrollBehavior:"auto"},children:[["super_admin","admin"].includes(null==y?void 0:null===(n=y.role)|| void 0===n?void 0:n.name)&&(0,d.jsx)(I.Z,{endIcon:(0,d.jsx)(aC,{fontSize:"small"}),onClick:aY,sx:{ml:1,mt:1},variant:"outlined",children:"Filters"}),(0,d.jsx)(w.Z,{elevation:12,sx:(0,o.Z)({mt:.5},{bgcolor:function(a){return(0,r.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,d.jsxs)(J.Z,{sx:{backgroundColor:"white"},children:[(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(K.Z,{TabIndicatorProps:{style:{display:"none"}},onChange:aM,scrollButtons:"auto",sx:{px:2},textColor:"primary",value:an,variant:"scrollable",children:aI.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"50px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},icon:(0,d.jsx)(L.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"neutral.600"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(M.Z,{}),(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(K.Z,{TabIndicatorProps:{style:{display:"none"}},scrollButtons:"auto",sx:{px:2},textColor:"primary",value:an,variant:"scrollable",children:null==aJ?void 0:aJ.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"60px",mt:"auto",mb:"auto",cursor:"unset",color:"primary.dark"},icon:(0,d.jsx)(L.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"text.primary"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(M.Z,{}),(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(0,d.jsx)(aB.H,{containerRef:au,onClose:aZ,open:aw,applyFilters:function(a){return aW(a)},clearFilters:aX}),(0,d.jsx)(aD,{open:aw}),(0,d.jsx)(g.Z,{sx:{width:"100%"},children:(0,d.jsx)(u.Z,{children:(0,d.jsxs)(s.Z,{"aria-labelledby":"tableTitle",size:"small",children:[(0,d.jsx)(F,{headCells:[{id:"teacher",numeric:!1,disablePadding:!0,label:"Teacher"},{id:"student",numeric:!1,disablePadding:!0,label:"Student"},{id:"status",numeric:!1,disablePadding:!0,label:"Status"},{id:"startedAt",numeric:!1,disablePadding:!0,label:"Started At"},{id:"endedAt",numeric:!1,disablePadding:!0,label:"Ended At"},{id:"subject",numeric:!0,disablePadding:!1,label:"Subject"},{id:"date",numeric:!0,disablePadding:!1,label:"Date"},{id:"startTime",numeric:!0,disablePadding:!1,label:"Start Time"},{id:"endTime",numeric:!0,disablePadding:!1,label:"End Time"},],numSelected:A.length,onSelectAllClick:aK,deleteSession:aO,rowCount:O.length}),(0,d.jsx)(t.Z,{children:O.map(function(a,b){var c=A.includes(a.id),e="enhanced-table-checkbox-".concat(b);return(0,d.jsx)(ay,{row:a,handleClick:aL,isItemSelected:c,labelId:e,updateSession:aP,statuses:aH,setReoprtFlag:aG,reportFlag:aF},null==a?void 0:a.id)})})]})})})]}),(0,d.jsx)(v.Z,{component:"div",count:U,rowsPerPageOptions:[10,25,50,100],page:R,rowsPerPage:ag,onPageChange:aS,onRowsPerPageChange:aT})]})})]})},aF=c(1132),aG=function(){var a=(0,e.useState)("1"),b=a[0],c=a[1],f=function(a,b){c(b)};return(0,d.jsx)(g.Z,{sx:{width:"100%",typography:"body1",zoom:"77%"},children:(0,d.jsxs)(i.ZP,{value:b,children:[(0,d.jsx)(g.Z,{sx:{borderBottom:1,borderColor:"divider",p:"10px 30px"},children:(0,d.jsxs)(j.Z,{TabIndicatorProps:{style:{display:"none"}},variant:"scrollable",scrollButtons:"auto",onChange:f,"aria-label":"Session options",children:[(0,d.jsx)(h.Z,{sx:{minHeight:"45px",fontSize:"16px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},label:"List Session",value:"1"}),(0,d.jsx)(h.Z,{sx:{minHeight:"45px",fontSize:"16px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},label:"Add Session",value:"2"})]})}),(0,d.jsx)(k.Z,{value:"1",sx:{p:.5},children:(0,d.jsx)(aE,{roleId:4})}),(0,d.jsx)(k.Z,{value:"2",children:(0,d.jsx)(l.Z,{})})]})})};aG.getLayout=function(a){return(0,d.jsx)(aF.a,{children:(0,d.jsx)(f.c,{children:a})})};var aH=aG}},function(a){a.O(0,[69,805,304,307,659,661,918,764,266,886,564,349,957,723,286,774,888,179],function(){var b;return a(a.s=4587)}),_N_E=a.O()}])