(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{4587:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sessions",function(){return c(1820)}])},8935:function(a,b,c){"use strict";c.d(b,{u:function(){return k}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(2071),j=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getDepts=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){var e={limit:a,offset:b};try{var f=h.E.get("/department/?".concat((0,i.K)(e)));c(f)}catch(g){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.createDept=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.post("/department/create",{name:a});b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateDept=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/department/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteDepts=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/department/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),k=new j},4150:function(a,b,c){"use strict";c.d(b,{t:function(){return l}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(6154),i=c(5485),j=c(2071),k=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getDocuments=function(a,b,c){return(0,d.Z)(g().mark(function d(){return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(d,e){var f={limit:a,offset:b,documentType:c};try{var g=i.E.get("/documents/?".concat((0,j.K)(f)));d(g)}catch(h){e(Error("Internal server error"))}}));case 1:case"end":return d.stop()}},d)}))()},b.createDocument=function(a,b,c){return(0,d.Z)(g().mark(function e(){return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,d.Z)(g().mark(function d(e,f){var i;return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,console.log(a),d.next=4,h.Z.post('http://localhost:4000/api/documents/upload?data={"documentType": '.concat(JSON.stringify(a),', "userId": ').concat(c,"}"),b,{headers:{"Content-Type":"multipart/form-data"}});case 4:e(i=d.sent),d.next=11;break;case 8:d.prev=8,d.t0=d.catch(0),f(Error("Internal server error"));case 11:case"end":return d.stop()}},d,null,[[0,8]])}));return function(a,b){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}))()},b.updateDocument=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=i.E.put("/documents/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteDocument=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=i.E.delete("/documents/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),l=new k},2455:function(a,b,c){"use strict";c.d(b,{B:function(){return k}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(2071),j=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getUsers=function(a,b,c,e,f){return(0,d.Z)(g().mark(function d(){return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(d,g){var j="/user/",k={limit:a,offset:b*a,roleId:c};try{if(e&&c){j="/user/?".concat((0,i.K)(k),"&roleId=").concat(e,"&roleId=").concat(f);var l=h.E.get(j);d(l)}else{var m=h.E.get("/user/?".concat((0,i.K)(k)));d(m)}}catch(n){g(Error("Internal server error"))}}));case 1:case"end":return d.stop()}},d)}))()},b.getAllParents=function(){return(0,d.Z)(g().mark(function a(){return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a,b){try{var c=h.E.get("/user/all/parents");a(c)}catch(d){b(Error("Internal server error"))}}));case 1:case"end":return a.stop()}},a)}))()},b.getUserById=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.get("/user/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.deleteUser=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/user/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.createUser=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.post("/user/create",a);b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateUser=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/user/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},a}(),k=new j},6915:function(a,b,c){"use strict";c.d(b,{"_":function(){return k}});var d=c(4251),e=c(5893),f=c(2734),g=c(1796),h=c(3252),i=c(3184),j=c(3816),k=function(a){var b=a.headCells;return(0,f.Z)(),(0,e.jsx)(i.Z,{sx:(0,d.Z)({width:"100%",mb:2},{bgcolor:function(a){return(0,g.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,e.jsx)(j.Z,{children:b.map(function(a,b){return(0,e.jsx)(h.Z,{padding:a.disablePadding?"none":"normal",sx:{color:function(a){return a.palette.info.main}},children:a.label},a.id)})})})}},1820:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return a6}});var d=c(5893),e=c(7294),f=c(9633),g=c(7357),h=c(44),i=c(5670),j=c(6568),k=c(4769),l=c(4727),m=c(4251),n=c(4051),o=c.n(n),p=c(5861),q=c(2175),r=c(8396),s=c(7533),t=c(657),u=c(7645),v=c(6580),w=c(6886),x=c(135),y=c(4054),z=c(8972),A=c(1425),B=c(3321),C=c(8987),D=c(6310),E=c(6501),F=c(2455),G=c(5983),H=c(6993),I=c(1029),J=c(7292),K=c(9897),L=c(570),M=c(4455),N=c(8935),O=c(5815),P=c(5485),Q=c(381),R=c.n(Q),S=function(a,b){return R()(a).locale("en").format("YYYY-MM-DD")},T=c(2071),U=function(){function a(){(0,O.Z)(this,a)}var b=a.prototype;return b.getSessions=function(a){return(0,l.Z)(o().mark(function b(){return o().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=a.limit,e=a.offset,f=a.status,g=a.teacherId,h=a.studentId,i=a.departmentId,j=a.date,k={limit:d,offset:e,status:f,teacherId:g,studentId:h,departmentId:i,date:j&&null!==j.from&&""!==j.from&&null!==j.to&&""!==j.to&&"".concat(S(j.from,"from"),"to").concat(S(j.to),"&")},l=P.E.get("/sessions?".concat((0,T.K)(k)));b(l)}catch(m){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.getSessionById=function(a){return(0,l.Z)(o().mark(function b(){return o().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=P.E.get("/sessions/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.getSessionTypes=function(){return(0,l.Z)(o().mark(function a(){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a,b){try{var c=P.E.get("/sessions/types");a(c)}catch(d){b(Error("Internal server error"))}}));case 1:case"end":return a.stop()}},a)}))()},b.deleteSession=function(a){return(0,l.Z)(o().mark(function b(){return o().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=P.E.delete("/sessions/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.createSession=function(a){return(0,l.Z)(o().mark(function b(){return o().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=P.E.post("/sessions/create/",a);b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateSession=function(a,b){return(0,l.Z)(o().mark(function c(){return o().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=P.E.put("/sessions/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.startMeeting=function(a,b){return(0,l.Z)(o().mark(function c(){return o().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=P.E.get("/sessions/oauth/callback",{code:a,sessionId:b});c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},a}(),V=new U,W=c(2875),X=c(4747),Y=c(5697),Z=c.n(Y),$=c(7109),_=c(1233),aa=c(948),ab=c(8169),ac=(0,ab.Z)((0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),"Search"),ad=c(720),ae=c(5172),af=(0,ab.Z)((0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),"ArrowRight"),ag=c(6486),ah=(0,aa.ZP)(s.ZP)({flexShrink:0,width:305,"& .MuiDrawer-paper":{position:"relative",width:305,backgroundColor:"white"}}),ai=(0,aa.ZP)(s.ZP)({maxWidth:"100%",width:305,"& .MuiDrawer-paper":{height:"calc(100% - 64px)",maxWidth:"100%",top:64,width:305}}),aj=function(a){var b,c={date:{from:"",to:""},teacherId:null,departmentId:null,studentId:null},f=(0,M.s)(),h=(0,e.useState)([]),i=h[0],j=h[1],k=(0,e.useState)([]),n=k[0],q=k[1],s=(0,e.useState)([]),t=s[0],u=s[1],v=(0,e.useState)(c),w=v[0],y=v[1],A=a.containerRef,D=a.onClose,E=a.open,G=a.applyFilters,H=a.clearFilters,I=a.loading,J=a.isCreatePage,K=(0,X.Z)(a,["containerRef","onClose","open","applyFilters","clearFilters","loading","isCreatePage"]),L=function(a){y(a)},O=(0,e.useRef)(null),P=(0,e.useRef)(null),Q=(0,e.useRef)(null),R=(0,e.useRef)({date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null}),S=(0,r.Z)(function(a){return a.breakpoints.up("lg")}),T=(0,e.useRef)((0,ag.debounce)(function(a){var b;null==L||L((0,W.Z)((0,m.Z)({},w),{teacherId:(null===(b=O.current)|| void 0===b?void 0:b.value)?+O.current.value:null})),G((0,W.Z)((0,m.Z)({},w),{teacherId:a}))},2e3)).current,U=(0,e.useRef)((0,ag.debounce)(function(a){var b;null==L||L((0,W.Z)((0,m.Z)({},w),{studentId:(null===(b=P.current)|| void 0===b?void 0:b.value)?+P.current.value:null})),G((0,W.Z)((0,m.Z)({},w),{studentId:a}))},2e3)).current,V=(0,e.useRef)((0,ag.debounce)(function(a){var b;null==L||L((0,W.Z)((0,m.Z)({},w),{departmentId:(null===(b=Q.current)|| void 0===b?void 0:b.value)?+Q.current.value:null})),G((0,W.Z)((0,m.Z)({},w),{departmentId:a}))},2e3)).current,Y=function(a){var b=(0,W.Z)((0,m.Z)({},w),{date:{from:a[0],to:a[1]}});null==L||L(b)},Z=function(){y(c),null==H||H()},aa=(0,e.useCallback)((b=(0,l.Z)(o().mark(function a(b,c){var d,e,g;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,F.B.getUsers(b,c,"teacher","student");case 3:d=a.sent,f()&&(e=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===4}),g=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===3}),q(e),j(g)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,c){return b.apply(this,arguments)}),[f]),ab=(0,e.useCallback)((0,l.Z)(o().mark(function a(){var b;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.u.getDepts("ALL",-1);case 3:b=a.sent,f()&&u(b.rows),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[f]);(0,e.useEffect)(function(){aa("ALL",-1),ab()},[]),(0,e.useEffect)(function(){R.current=w},[w]);var aj=(0,d.jsxs)(g.Z,{sx:{pb:3,pt:{xs:3},px:3},children:[(0,d.jsx)(g.Z,{component:"form",children:(0,d.jsx)(x.Z,{label:"Teacher",name:"teacherId",value:w.teacherId,onKeyDown:function(a){"Enter"===a.key&&(a.preventDefault(),T(a.target.value))},inputProps:{ref:O},InputProps:{startAdornment:(0,d.jsx)($.Z,{position:"start",children:(0,d.jsx)(ac,{fontSize:"small"})})},fullWidth:!0,select:!0,onChange:function(a){null==L||L((0,W.Z)((0,m.Z)({},w),{teacherId:a.target.value}))},children:i.map(function(a){return(0,d.jsxs)(z.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})}),(0,d.jsx)(g.Z,{component:"form",children:(0,d.jsx)(x.Z,{sx:{mt:3},label:"Student",name:"studentId",value:w.studentId,onKeyDown:function(a){"Enter"===a.key&&(a.preventDefault(),U(a.target.value))},inputProps:{ref:P},InputProps:{startAdornment:(0,d.jsx)($.Z,{position:"start",children:(0,d.jsx)(ac,{fontSize:"small"})})},fullWidth:!0,select:!0,onChange:function(a){null==L||L((0,W.Z)((0,m.Z)({},w),{studentId:a.target.value}))},children:n.map(function(a){return(0,d.jsxs)(z.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})}),(0,d.jsx)(g.Z,{component:"form",children:(0,d.jsx)(x.Z,{sx:{mt:3},label:"Subject",name:"departmentId",value:w.departmentId,onKeyDown:function(a){"Enter"===a.key&&(a.preventDefault(),V(a.target.value))},inputProps:{ref:Q},InputProps:{startAdornment:(0,d.jsx)($.Z,{position:"start",children:(0,d.jsx)(ac,{fontSize:"small"})})},fullWidth:!0,select:!0,onChange:function(a){null==L||L((0,W.Z)((0,m.Z)({},w),{departmentId:a.target.value}))},children:t.map(function(a){return(0,d.jsx)(z.Z,{value:a.id,children:a.name},a.id)})})}),(0,d.jsx)(p.Z,{color:"textSecondary",sx:{mt:4},variant:"subtitle2",children:"Date"}),(0,d.jsx)(_.Z,{spacing:2,sx:{mt:2},children:(0,d.jsx)(ad._,{dateAdapter:ae.H,children:(0,d.jsxs)(g.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,d.jsx)(x.Z,{label:"from",name:"from",type:"date",sx:{width:"50%"},onChange:function(a){Y([a.target.value,w.date.to,])},value:w.date.from,InputLabelProps:{shrink:!0}}),(0,d.jsx)(af,{fontSize:"inherit"})," ",(0,d.jsx)(x.Z,{label:"to",name:"to",type:"date",sx:{width:"50%"},value:w.date.to,onChange:function(a){Y([w.date.from,a.target.value,])},InputLabelProps:{shrink:!0}})]})})}),(0,d.jsx)(C.Z,{loading:I,sx:{mt:2},variant:"contained",onClick:function(){var a=R.current;console.log({filters:w,previousFilters:a}),G(w)},children:"Apply Filters"}),(0,d.jsx)(B.Z,{sx:{mt:2},variant:"text",onClick:Z,children:"Clear"})]});return J?E?(0,d.jsx)(g.Z,{children:aj}):(0,d.jsx)(g.Z,{sx:{width:"0px"}}):S?(0,d.jsx)(ah,(0,W.Z)((0,m.Z)({anchor:"left",open:E,SlideProps:{container:null==A?void 0:A.current},variant:"persistent"},K),{children:aj})):(0,d.jsx)(ai,(0,W.Z)((0,m.Z)({anchor:"left",ModalProps:{container:null==A?void 0:A.current},onClose:D,open:E,SlideProps:{container:null==A?void 0:A.current},variant:"temporary"},K),{children:aj}))};aj.propTypes={containerRef:Z().any,filters:Z().object,onChange:Z().func,onClose:Z().func,open:Z().bool};var ak=c(7704),al=[{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:7,label:"Sunday"},],am=[{value:"zoom",label:"zoom"}],an=function(){var a,b,c,f={date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null},h=(0,M.s)(),i=(0,ak.a)().user,j=(0,e.useRef)(null),k=(0,e.useState)(!1);k[0],k[1];var n,O,P,Q=(0,e.useState)([]),R=(Q[0],Q[1]),S=(0,e.useState)([]),T=S[0],U=S[1],W=(0,e.useState)([]),X=W[0],Y=W[1],Z=(0,e.useState)([]),$=Z[0],_=Z[1],aa=(0,e.useState)([]),ab=aa[0],ac=aa[1],ad=(0,e.useState)([]),ae=ad[0],af=ad[1],ag=(0,e.useState)(!1),ah=ag[0],ai=ag[1],an=(0,e.useState)({}),ao=an[0],ap=an[1],aq=(0,r.Z)(function(a){return a.breakpoints.up("md")},{noSsr:!1}),ar=(0,e.useState)(!0),as=(ar[0],ar[1]),at=(0,e.useRef)(null),au=(0,e.useState)(aq),av=au[0],aw=au[1],ax=function(){aF.resetForm(),ai(!1)},ay=function(){ai(!0)},az=(0,e.useCallback)((n=(0,l.Z)(o().mark(function a(b,c){var d,e,f;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,F.B.getUsers(b,c,"teacher","student");case 3:d=a.sent,h()&&(e=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===4}),f=d.rows.filter(function(a){return(null==a?void 0:a.roleId)===3}),U(e),Y(f)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return n.apply(this,arguments)}),[h]),aA=(0,e.useCallback)((0,l.Z)(o().mark(function a(){var b;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.u.getDepts("ALL",-1);case 3:b=a.sent,h()&&_(b.rows),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[h]),aB=(0,e.useCallback)((0,l.Z)(o().mark(function a(){var b;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,V.getSessionTypes();case 3:b=a.sent,h()&&ac(b.resp),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[h]),aC=(0,e.useCallback)((O=(0,l.Z)(o().mark(function a(b){var c;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,V.getSessions((0,m.Z)({},b,ao));case 3:c=a.sent,h()&&af(c.rows.map(function(a){return{title:a.title||"No name",start:"".concat(a.date.substr(0,10),"T").concat(a.startTime),end:"".concat(a.date.substr(0,10),"T").concat(a.endTime)}})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a){return O.apply(this,arguments)}),[h]);(0,e.useEffect)(function(){az("ALL",-1),aA(),aB(),aC({limit:"ALL",offset:-1})},[]);var aD,aE=(P=(0,l.Z)(o().mark(function a(b){var c,d;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=E.ZP.loading("create"),a.prev=1,a.next=4,V.createSession(b);case 4:if(!(d=a.sent)){a.next=12;break}return E.ZP.dismiss(c),E.ZP.success("createSessionSuccess"),aC({limit:"ALL",offset:-1}),a.abrupt("return",{success:!0});case 12:return E.ZP.dismiss(c),E.ZP.error("createSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),E.ZP.dismiss(c),E.ZP.error(a.t0.message||"createSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a){return P.apply(this,arguments)}),aF=(0,q.TA)({initialValues:{departmentId:"",sessionTypeId:"",studentId:"",teacherId:"",fromDate:"",toDate:"",dayOfWeek:[],startTime:"",endTime:"",title:"",sessionMethod:""},enableReinitialize:!0,validationSchema:D.Ry({departmentId:D.Rx().required("subject is required"),sessionTypeId:D.Rx().required("session type is required"),studentId:D.Rx().required("student is required"),teacherId:D.Rx().required("teacher is required"),dayOfWeek:D.Rx().required("dayOfWeek is required"),fromDate:D.hT().required("fromDate is required"),toDate:D.hT().required("toDate is required"),startTime:D.Z_().required("startTime is required"),endTime:D.Z_().required("endTime is required"),title:D.Z_().required("title is required"),sessionMethod:D.Z_().required("sessionMethod is required")}),onSubmit:(aD=(0,l.Z)(o().mark(function a(b){var c;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log({values:b}),a.next=3,aE(b);case 3:(c=a.sent.success)&&(ax(),aF.resetForm());case 5:case"end":return a.stop()}},a)})),function(a){return aD.apply(this,arguments)})}),aG=function(a){},aH=function(a){},aI=function(a){R(a)},aJ=function(a){ap(a),aC((0,m.Z)({limit:"ALL",offset:-1},a))},aK=function(){as(!0),aJ(f)},aL=function(){aw(function(a){return!a})},aM=function(){aw(!1)};return(0,e.useEffect)(function(){console.log("Previous value:",ao)},[ao]),(0,d.jsxs)(g.Z,{sx:{margin:1,display:"flex",width:"100%"},children:[["super_admin","admin"].includes(null==i?void 0:null===(a=i.role)|| void 0===a?void 0:a.name)&&(0,d.jsx)(d.Fragment,{children:aq?(0,d.jsx)(g.Z,{sx:{width:av?"20%":"0%"},children:(0,d.jsx)(aj,{containerRef:at,onClose:aM,open:av,applyFilters:function(a){return aJ(a)},clearFilters:aK,isCreatePage:!0})}):(0,d.jsx)(s.ZP,{open:av,PaperProps:{sx:{width:280}},onClose:function(){aw(!1)},children:(0,d.jsx)(aj,{containerRef:at,onClose:aM,open:av,applyFilters:function(a){return aJ(a)},clearFilters:aK,isCreatePage:!0})})}),(0,d.jsx)(g.Z,{sx:{m:"auto",width:av?"80%":"120%","& .fc .fc-toolbar":{flexDirection:aq?"row":"column"}},children:(0,d.jsx)(G.Z,{ref:j,expandRows:!0,contentHeight:750,headerToolbar:{start:"prev,next today filterButton",center:"title",end:"addEventButton,multiMonthYear,listWeek,dayGridMonth,timeGridWeek,timeGridDay"},initialView:"dayGridMonth",plugins:[H.Z,I.Z,K.ZP,J.Z,L.Z,],editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,select:aG,eventClick:aH,eventsSet:aI,eventAdd:function(){},eventChange:function(){},eventRemove:function(){},events:ae,customButtons:(0,m.Z)({},((null==i?void 0:null===(b=i.role)|| void 0===b?void 0:b.name)==="admin"||(null==i?void 0:null===(c=i.role)|| void 0===c?void 0:c.name)==="super_admin")&&{addEventButton:{text:"add event",click:function(a,b){ay()}},filterButton:{text:"Filter",click:function(a,b){aL()}}})})}),(0,d.jsxs)(t.Z,{maxWidth:"md",open:ah,children:[(0,d.jsx)(u.Z,{sx:{bgcolor:"primary.main",color:"white"},children:(0,d.jsx)(p.Z,{variant:"subtitle2",children:"Create patch of sessions"})}),(0,d.jsxs)(g.Z,{sx:{p:2,bgcolor:"white"},children:[(0,d.jsx)(v.Z,{sx:{mt:1},children:(0,d.jsxs)(w.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(w.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(x.Z,{label:"Title",name:"title",type:"text",sx:{width:"100%"},onChange:aF.handleChange,value:aF.values.title,error:Boolean(aF.errors.title&&aF.touched.title),helperText:aF.touched.title&&aF.errors.title})}),(0,d.jsx)(w.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(y.Z,{fullWidth:!0,children:(0,d.jsx)(x.Z,{label:"Session Method",name:"sessionMethod",value:aF.values.sessionMethod,error:Boolean(aF.errors.sessionMethod&&aF.touched.sessionMethod),helperText:aF.touched.sessionMethod&&aF.errors.sessionMethod,InputLabelProps:{shrink:!!aF.values.sessionMethod},fullWidth:!0,required:!0,select:!0,onChange:aF.handleChange,children:am.map(function(a){return(0,d.jsx)(z.Z,{value:a.value,children:a.label},a.value)})})})}),(0,d.jsx)(w.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(y.Z,{fullWidth:!0,children:(0,d.jsx)(x.Z,{label:"Subject",name:"departmentId",value:aF.values.departmentId,error:Boolean(aF.errors.departmentId&&aF.touched.departmentId),helperText:aF.touched.departmentId&&aF.errors.departmentId,InputLabelProps:{shrink:!!aF.values.departmentId},fullWidth:!0,required:!0,select:!0,onChange:aF.handleChange,children:$.map(function(a){return(0,d.jsx)(z.Z,{value:a.id,children:a.name},a.id)})})})}),(0,d.jsx)(w.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(y.Z,{fullWidth:!0,children:(0,d.jsx)(x.Z,{label:"Teacher",name:"teacherId",value:aF.values.teacherId,error:Boolean(aF.errors.teacherId&&aF.touched.teacherId),helperText:aF.touched.teacherId&&aF.errors.teacherId,InputLabelProps:{shrink:!!aF.values.teacherId},fullWidth:!0,required:!0,select:!0,onChange:aF.handleChange,children:X.map(function(a){return(0,d.jsxs)(z.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})})}),(0,d.jsx)(w.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(y.Z,{fullWidth:!0,children:(0,d.jsx)(x.Z,{label:"Student",name:"studentId",value:aF.values.studentId,error:Boolean(aF.errors.studentId&&aF.touched.studentId),fullWidth:!0,required:!0,select:!0,helperText:aF.touched.studentId&&aF.errors.studentId,InputLabelProps:{shrink:!!aF.values.studentId},onChange:aF.handleChange,children:T.map(function(a){return(0,d.jsxs)(z.Z,{value:a.id,children:[a.firstName," ",a.lastName]},a.id)})})})}),(0,d.jsx)(w.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(x.Z,{label:"From Date",name:"fromDate",type:"date",sx:{width:"100%"},onChange:aF.handleChange,value:aF.values.fromDate,error:Boolean(aF.errors.fromDate&&aF.touched.fromDate),helperText:aF.touched.fromDate&&aF.errors.fromDate,InputLabelProps:{shrink:!0}})}),(0,d.jsx)(w.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(x.Z,{label:"To Date",name:"toDate",type:"date",sx:{width:"100%"},onChange:aF.handleChange,value:aF.values.toDate,error:Boolean(aF.errors.toDate&&aF.touched.toDate),helperText:aF.touched.toDate&&aF.errors.toDate,InputLabelProps:{shrink:!0}})}),(0,d.jsx)(w.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(x.Z,{label:"Start Time",name:"startTime",type:"time",sx:{width:"100%"},onChange:aF.handleChange,value:aF.values.startTime,error:Boolean(aF.errors.startTime&&aF.touched.startTime),helperText:aF.touched.startTime&&aF.errors.startTime,InputLabelProps:{shrink:!0}})}),(0,d.jsx)(w.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(x.Z,{label:"End Time",name:"endTime",type:"time",sx:{width:"100%"},onChange:aF.handleChange,value:aF.values.endTime,error:Boolean(aF.errors.endTime&&aF.touched.endTime),helperText:aF.touched.endTime&&aF.errors.endTime,InputLabelProps:{shrink:!0}})}),(0,d.jsx)(w.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(y.Z,{fullWidth:!0,children:(0,d.jsx)(x.Z,{label:"Day of week",name:"dayOfWeek",value:aF.values.dayOfWeek,error:Boolean(aF.errors.dayOfWeek&&aF.touched.dayOfWeek),helperText:aF.touched.dayOfWeek&&aF.errors.dayOfWeek,InputLabelProps:{shrink:!!aF.values.dayOfWeek},fullWidth:!0,required:!0,select:!0,onChange:aF.handleChange,SelectProps:{multiple:!0},children:al.map(function(a){return(0,d.jsx)(z.Z,{value:a.value,children:a.label},a.value)})})})}),(0,d.jsx)(w.ZP,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,d.jsx)(y.Z,{fullWidth:!0,children:(0,d.jsx)(x.Z,{label:"Session Type",name:"sessionTypeId",value:aF.values.sessionTypeId,error:Boolean(aF.errors.sessionTypeId&&aF.touched.sessionTypeId),helperText:aF.touched.sessionTypeId&&aF.errors.sessionTypeId,InputLabelProps:{shrink:!!aF.values.sessionTypeId},fullWidth:!0,required:!0,select:!0,onChange:aF.handleChange,children:ab.map(function(a){return(0,d.jsx)(z.Z,{value:a.id,children:a.name},a.id)})})})})]})}),(0,d.jsx)(A.Z,{sx:{p:3},children:(0,d.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,d.jsxs)(B.Z,{variant:"outlined",size:"small",onClick:ax,children:[" ","Cancel"]}),(0,d.jsx)(C.Z,{type:"submit",variant:"contained",onClick:function(){return aF.handleSubmit()},children:"Create"})]})})]})]})]})},ao=c(7573),ap=c(1796),aq=c(7906),ar=c(295),as=c(2882),at=c(519),au=c(629),av=c(6915),aw=c(6242),ax=c(8409),ay=c(7918),az=c(7720),aA=c(969),aB=c(3252),aC=c(3946),aD=c(3816),aE=(0,ab.Z)((0,d.jsx)("svg",{viewBox:"0 0 11 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M3.29008 6.6899L7.1472 6.70013M3.28371 9.08989L7.14084 9.10012M3.29644 4.28991L7.15357 4.30014M0.731381 1.8831C0.731802 1.72397 0.799936 1.57154 0.920793 1.45934C1.04165 1.34714 1.20533 1.28436 1.37583 1.28481L9.09008 1.30526C9.26058 1.30571 9.42393 1.36936 9.54419 1.4822C9.66445 1.59504 9.73177 1.74783 9.73135 1.90696L9.70113 13.3069L7.45511 11.801L5.20114 13.295L2.95513 11.789L0.701159 13.2831L0.731381 1.8831Z",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round"})}),"BillsIcon"),aF=c(7922),aG=c(2734),aH=c(7361),aI=c.n(aH),aJ=c(6968),aK=c.n(aJ),aL=c(1733),aM=c(3841),aN=c(788),aO=function(){function a(){(0,O.Z)(this,a)}var b=a.prototype;return b.getReports=function(a,b){return(0,l.Z)(o().mark(function c(){return o().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=P.E.get("/reports",{limit:a,page:++b});c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.createReport=function(a){return(0,l.Z)(o().mark(function b(){return o().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=P.E.post("/reports/create",a);b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateReport=function(a,b){return(0,l.Z)(o().mark(function c(){return o().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=P.E.put("/reports/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteReport=function(a){return(0,l.Z)(o().mark(function b(){return o().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=P.E.delete("/reports/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),aP=new aO,aQ=c(4150),aR=c(4970),aS=c(888),aT=function(a){var b,c,f,h,i,j,k=a.sessionDeptName,n=a.sessionId,p=a.handleCloseCreateReport,r=a.setReoprtFlag,s=a.reportFlag,t=(0,e.useState)([]),u=t[0],v=t[1],A=(0,ak.a)().user,D=(0,e.useState)(!1),F=(D[0],D[1]),G=["1","2","3","4","5","6","7","8","9","10"],H=(0,M.s)(),I=(0,e.useCallback)((c=(0,l.Z)(o().mark(function a(b,c){var d;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aQ.t.getDocuments(b,c,"books");case 3:d=a.sent,H()&&v(d.rows),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),E.ZP.error(a.t0.message||"failed");case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return c.apply(this,arguments)}),[H]),J=(0,q.TA)({initialValues:{date:new Date,documentId:null,sessionId:n,notes:"",homework:"",bookId:null===(b=u[0])|| void 0===b?void 0:b.id,unit:"",topic:"",level:"",newWords:"",expressions:"",rules:"",memorization:"",revision:"",tajweed:"",recitation:"",reading:"",memorizationLevel:"",revisionLevel:"",readingLevel:""},onSubmit:(f=(0,l.Z)(o().mark(function a(b){var c;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log(b),a.next=4,K(b);case 4:(c=a.sent.success)&&(J.resetForm(),p(n),r(!s)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(a){return f.apply(this,arguments)})}),K=(h=(0,l.Z)(o().mark(function a(b){var c;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=E.ZP.loading("createReports"),a.prev=1,a.next=4,aP.createReport(b);case 4:return E.ZP.dismiss(c),E.ZP.success("createReports "),a.abrupt("return",{success:!0});case 9:return a.prev=9,a.t0=a.catch(1),E.ZP.dismiss(c),E.ZP.error(a.t0.message||"createReportsFailed"),a.abrupt("return",{success:!1});case 14:case"end":return a.stop()}},a,null,[[1,9]])})),function(a){return h.apply(this,arguments)}),L=(i=(0,l.Z)(o().mark(function a(b,c){var d;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aQ.t.createDocument({name:"reports",id:2},b,c);case 3:return d=a.sent,J.setFieldValue("documentId",d.data.id),a.abrupt("return",{success:!0});case 8:return a.prev=8,a.t0=a.catch(0),a.abrupt("return",{success:!1});case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(a,b){return i.apply(this,arguments)}),N=(j=(0,l.Z)(o().mark(function a(b){var c,d;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.preventDefault(),a.prev=1,console.log("file",b.target.files[0]),F(!0),(c=new FormData).append("userId",A.id),c.append("file",b.target.files[0]),a.next=9,L(c,A.id);case 9:d=a.sent,a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0),F(!1);case 16:case"end":return a.stop()}},a,null,[[1,12]])})),function(a){return j.apply(this,arguments)}),O=(0,aa.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});return(0,e.useEffect)(function(){I(1e3,1e3)},[]),(0,d.jsx)(g.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",bgcolor:"#CAF0F8"},children:(0,d.jsxs)(au.Z,{elevation:9,sx:{display:"flex",flexDirection:"column",p:"20px 20px",width:"95%",bgcolor:"#CAF0F8"},children:[" ",(0,d.jsx)(w.ZP,{container:!0,children:(0,d.jsx)(w.ZP,{item:!0,xs:12,children:(0,d.jsxs)("form",{onSubmit:J.handleSubmit,children:[(0,d.jsx)(az.Z,{textAlign:"left",sx:{mb:1},children:(0,d.jsx)(ay.Z,{label:"Feedback Report",sx:{fontWeight:"600"}})}),"Quran"!=k&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(y.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(aM.Z,{sx:{top:-6},id:"outlined-level",children:"Grade"}),(0,d.jsx)(aN.Z,{name:"level",id:"outlined-level",labelId:"outlined-level",value:J.values.level,onChange:function(a){J.setFieldValue("level",a.target.value)},children:G.map(function(a){return(0,d.jsx)(z.Z,{sx:(0,W.Z)((0,m.Z)({color:"black"},{bgcolor:function(a){return(0,ap.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]}),(0,d.jsxs)(y.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(aM.Z,{sx:{top:-6},id:"outlined-adornment-bookId",children:"Book"}),(0,d.jsx)(aN.Z,{name:"bookId",id:"outlined-adornment-bookId",labelId:"outlined-adornment-bookId",value:J.values.bookId,onChange:function(a){J.setFieldValue("bookId",a.target.value),console.log(a.target.value)},children:null==u?void 0:u.map(function(a){return(0,d.jsx)(z.Z,{sx:(0,W.Z)((0,m.Z)({color:"black"},{bgcolor:function(a){return(0,ap.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:null==a?void 0:a.id,children:null==a?void 0:a.fileName},null==a?void 0:a.id)})})]}),(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(J.touched.unit&&J.errors.unit),helperText:J.touched.unit&&J.errors.unit,label:"Unit",margin:"normal",id:"unit",name:"unit",type:"text",onChange:J.handleChange,value:J.values.unit,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(J.touched.topic&&J.errors.topic),helperText:J.touched.topic&&J.errors.topic,label:"Topic",margin:"normal",id:"topic",name:"topic",type:"text",onChange:J.handleChange,value:J.values.topic,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}})]}),"Arabic"===k&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)(x.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(J.touched.newWords&&J.errors.newWords),helperText:J.touched.newWords&&J.errors.newWords,label:"New Words",margin:"normal",id:"newWords",name:"newWords",type:"text",onChange:J.handleChange,value:J.values.newWords,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(x.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(J.touched.expressions&&J.errors.expressions),helperText:J.touched.expressions&&J.errors.expressions,label:"Expressions",margin:"normal",id:"expressions",name:"expressions",type:"text",onChange:J.handleChange,value:J.values.expressions,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(x.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(J.touched.rules&&J.errors.rules),helperText:J.touched.rules&&J.errors.rules,label:"Rules",margin:"normal",id:"rules",name:"rules",type:"text",onChange:J.handleChange,value:J.values.rules,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}})]}),"Quran"===k&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(J.touched.memorization&&J.errors.memorization),helperText:J.touched.memorization&&J.errors.memorization,label:"Memorization",margin:"normal",id:"memorization",name:"memorization",type:"text",onChange:J.handleChange,value:J.values.memorization,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(J.touched.revision&&J.errors.revision),helperText:J.touched.revision&&J.errors.revision,label:"Revision",margin:"normal",id:"revision",name:"revision",type:"text",onChange:J.handleChange,value:J.values.revision,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(J.touched.tajweed&&J.errors.tajweed),helperText:J.touched.tajweed&&J.errors.tajweed,label:"Tajweed",margin:"normal",id:"tajweed",name:"tajweed",type:"text",onChange:J.handleChange,value:J.values.tajweed,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(J.touched.recitation&&J.errors.recitation),helperText:J.touched.recitation&&J.errors.recitation,label:"Recitation",margin:"normal",id:"recitation",name:"recitation",type:"text",onChange:J.handleChange,value:J.values.recitation,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(J.touched.reading&&J.errors.reading),helperText:J.touched.reading&&J.errors.reading,label:"Reading",margin:"normal",id:"reading",name:"reading",type:"text",onChange:J.handleChange,value:J.values.reading,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsxs)(y.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(aM.Z,{sx:{top:-6},id:"outlined-memorizationLevel",children:"Memorization Grade"}),(0,d.jsx)(aN.Z,{name:"memorizationLevel",id:"outlined-memorizationLevel",labelId:"outlined-memorizationLevel",value:J.values.memorizationLevel,onChange:function(a){J.setFieldValue("memorizationLevel",a.target.value)},children:G.map(function(a){return(0,d.jsx)(z.Z,{sx:(0,W.Z)((0,m.Z)({color:"black"},{bgcolor:function(a){return(0,ap.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]}),(0,d.jsxs)(y.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(aM.Z,{sx:{top:-6},id:"outlined-revisionLevel",children:"Revision Grade"}),(0,d.jsx)(aN.Z,{name:"revisionLevel",id:"outlined-revisionLevel",labelId:"outlined-revisionLevel",value:J.values.revisionLevel,onChange:function(a){J.setFieldValue("revisionLevel",a.target.value)},children:G.map(function(a){return(0,d.jsx)(z.Z,{sx:(0,W.Z)((0,m.Z)({color:"black"},{bgcolor:function(a){return(0,ap.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]}),(0,d.jsxs)(y.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(aM.Z,{sx:{top:-6},id:"outlined-readingLevel",children:"Reading Grade"}),(0,d.jsx)(aN.Z,{name:"readingLevel",id:"outlined-readingLevel",labelId:"outlined-readingLevel",value:J.values.readingLevel,onChange:function(a){J.setFieldValue("readingLevel",a.target.value)},children:G.map(function(a){return(0,d.jsx)(z.Z,{sx:(0,W.Z)((0,m.Z)({color:"black"},{bgcolor:function(a){return(0,ap.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]})]}),(0,d.jsx)(x.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(J.touched.homework&&J.errors.homework),helperText:J.touched.homework&&J.errors.homework,label:"H.W",margin:"normal",id:"homework",name:"homework",type:"text",onChange:J.handleChange,value:J.values.homework,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(x.Z,{multiline:!0,minRows:2,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:80},mr:1},error:Boolean(J.touched.notes&&J.errors.notes),helperText:J.touched.notes&&J.errors.notes,label:"Notes",margin:"normal",id:"notes",name:"notes",type:"text",onChange:J.handleChange,value:J.values.notes,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsxs)("div",{style:{textAlign:"center"},children:[(0,d.jsxs)(B.Z,{component:"label",variant:"contained",startIcon:(0,d.jsx)(aR.Z,{}),children:["Upload file",(0,d.jsx)(O,{type:"file",onChange:function(a){N(a)}})]}),J.values.documentId&&(0,d.jsx)(aS.Z,{color:"success",sx:{position:"relative",top:10,ml:1}})]}),(0,d.jsx)(az.Z,{sx:{mb:1,mt:2}}),(0,d.jsx)("div",{style:{textAlign:"right"},children:(0,d.jsx)(C.Z,{type:"submit",sx:{"& .MuiInputBase-root":{height:40},m:.5,p:1},variant:"contained",children:"Submit"})})]})})})," "]})})},aU=aT,aV=c(8462),aW=c(891),aX=c(1134),aY=c(660),aZ=function(a){var b,c=(0,aA.Z)(a.split(":"),2),d=c[0],e=c[1];b=parseInt(d,10);var f=b>=12?"PM":"AM";return b=(b+11)%12+1,"".concat(b,":").concat(e," ").concat(f)},a$=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,q,r,s,t,u,v,x,y,z,A,B,C,D,E=a.session;a.handleCloseReport;var F=(0,aX.ZP)(),G=(F.size,F.elapsed,F.percentage,F.download),H=(F.cancel,F.error);return F.isInProgress,(0,d.jsxs)(au.Z,{elevation:12,sx:{display:"flex",flexDirection:"column",padding:"20px 25px",minHeight:"280px",m:1,bgcolor:"#CAF0F8"},children:[(0,d.jsx)(p.Z,{color:"inherit",variant:"h6",children:"Session information"}),(0,d.jsx)(az.Z,{textAlign:"left",sx:{m:1},children:(0,d.jsx)(ay.Z,{label:"Primary Details",sx:{fontWeight:"600"}})}),(0,d.jsxs)(w.ZP,{container:!0,component:aV.Z,children:[(0,d.jsxs)(w.ZP,{item:!0,xs:12,sm:6,children:[(0,d.jsxs)(aW.ZP,{children:["Teacher:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:"".concat(null==E?void 0:null===(b=E.patch)|| void 0===b?void 0:null===(c=b.teacher)|| void 0===c?void 0:c.firstName," ").concat(null==E?void 0:null===(e=E.patch)|| void 0===e?void 0:null===(f=e.teacher)|| void 0===f?void 0:f.lastName)||"no data"})," "]}),(0,d.jsxs)(aW.ZP,{children:["Subject:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:null===(g=E.patch)|| void 0===g?void 0:null===(h=g.department)|| void 0===h?void 0:h.name)||"No data"})," "]}),(0,d.jsxs)(aW.ZP,{children:["Date:",(0,d.jsxs)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",(null==E?void 0:null===(i=E.date)|| void 0===i?void 0:i.substr(0,10))||"no data"]})," "]})," ",(0,d.jsxs)(aW.ZP,{children:["Start Time:",(0,d.jsxs)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",(null==E?void 0:E.startTime)?aZ(null==E?void 0:E.startTime):"no data"]})," "]}),(0,d.jsxs)(aW.ZP,{children:["Started At:",(0,d.jsxs)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ","".concat((null==E?void 0:null===(j=E.startedAt)|| void 0===j?void 0:j.substr(0,10))||"no"," ").concat((null==E?void 0:E.startedAt)?aZ(R()(E.startedAt).format("HH:mm")):"data")||"no data"]})," "]})]}),(0,d.jsxs)(w.ZP,{item:!0,xs:12,sm:6,children:[(0,d.jsxs)(aW.ZP,{children:["Student:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"120px"},children:"".concat(null==E?void 0:null===(k=E.patch)|| void 0===k?void 0:null===(l=k.student)|| void 0===l?void 0:l.firstName," ").concat(null==E?void 0:null===(m=E.patch)|| void 0===m?void 0:null===(n=m.student)|| void 0===n?void 0:n.lastName)||"no data"})," "]}),(0,d.jsxs)(aW.ZP,{children:["Session Type:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:null===(o=E.sessionType)|| void 0===o?void 0:o.name)||"No data"})," "]}),(0,d.jsxs)(aW.ZP,{children:["Status:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.status)||"no data"})]}),(0,d.jsxs)(aW.ZP,{children:["End Time:",(0,d.jsxs)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",(null==E?void 0:E.endTime)?aZ(null==E?void 0:E.endTime):"no data"]})," "]}),(0,d.jsxs)(aW.ZP,{children:["Ended At:",(0,d.jsxs)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ","".concat((null==E?void 0:null===(q=E.endedAt)|| void 0===q?void 0:q.substr(0,10))||"no"," ").concat((null==E?void 0:E.endedAt)?aZ(R()(E.endedAt).format("HH:mm")):"data")||"no data"]})," "]})]})]}),(null==E?void 0:E.reports[0])&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(az.Z,{textAlign:"left",sx:{m:1},children:(0,d.jsx)(ay.Z,{label:"Feedback ",sx:{fontWeight:"600"}})}),(0,d.jsxs)(w.ZP,{container:!0,component:aV.Z,children:[(0,d.jsxs)(w.ZP,{item:!0,xs:12,children:[" ",(0,d.jsxs)(w.ZP,{container:!0,component:aV.Z,sx:{p:0},children:[(0,d.jsxs)(w.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[" ",(null==E?void 0:E.reports[0].date)&&(0,d.jsxs)(aW.ZP,{children:["Submition Date:",(0,d.jsxs)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:[" ",R()((null==E?void 0:E.reports[0].date)||"No data").format("MMM-D-YYYY")]})," "]})]}),(0,d.jsxs)(w.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[" ",(null==E?void 0:E.reports[0].document)&&(0,d.jsxs)(aW.ZP,{children:["File:"," ",(0,d.jsxs)(aC.Z,{onClick:function(){var a,b;return G("http://localhost:4000/".concat(null===(a=null==E?void 0:E.reports[0].document)|| void 0===a?void 0:a.fileStoragePath),null===(b=null==E?void 0:E.reports[0].document)|| void 0===b?void 0:b.fileName)},sx:{p:.5,ml:.5,color:"black",border:"1px solid black",fontSize:"16px"},children:["Download "," ",(0,d.jsx)(aY.Z,{fontSize:"medium"})]}),H&&(0,d.jsxs)("p",{style:{color:"red"},children:["possible error ",JSON.stringify(H)]})]})]})]}),(null===(r=E.patch)|| void 0===r?void 0:null===(s=r.department)|| void 0===s?void 0:s.name)!="Quran"&&(0,d.jsxs)(w.ZP,{container:!0,component:aV.Z,children:[(0,d.jsxs)(w.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[(null==E?void 0:E.reports[0].level)&&(0,d.jsxs)(aW.ZP,{children:["Grade:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].level)||"No data"})," "]}),(null==E?void 0:E.reports[0].book)&&(0,d.jsxs)(aW.ZP,{children:["Book:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null===(t=null==E?void 0:E.reports[0].book)|| void 0===t?void 0:t.fileName)||"No data"})," "]})]}),(0,d.jsxs)(w.ZP,{item:!0,xs:12,sm:6,sx:{p:0},children:[(null==E?void 0:E.reports[0].unit)&&(0,d.jsxs)(aW.ZP,{children:["Unit:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].unit)||"No data"})," "]}),(null==E?void 0:E.reports[0].topic)&&(0,d.jsxs)(aW.ZP,{children:["Topic:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].topic)||"No data"})," "]})]})," "]}),(null===(u=E.patch)|| void 0===u?void 0:null===(v=u.department)|| void 0===v?void 0:v.name)=="Arabic"&&(0,d.jsxs)(d.Fragment,{children:[(null==E?void 0:E.reports[0].newWords)&&(0,d.jsxs)(aW.ZP,{children:["New Words:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].newWords)||"No data"})," "]}),(null==E?void 0:E.reports[0].expressions)&&(0,d.jsxs)(aW.ZP,{children:["Expressions:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].expressions)||"No data"})," "]}),(null==E?void 0:E.reports[0].rules)&&(0,d.jsxs)(aW.ZP,{children:["Rules:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].rules)||"No data"})," "]})]}),(null===(x=E.patch)|| void 0===x?void 0:null===(y=x.department)|| void 0===y?void 0:y.name)=="Quran"&&(0,d.jsxs)(w.ZP,{container:!0,component:aV.Z,children:[(0,d.jsxs)(w.ZP,{item:!0,xs:12,sm:6,children:[" ",(null==E?void 0:E.reports[0].memorization)&&(0,d.jsxs)(aW.ZP,{children:["Memorization:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].memorization)||"No data"})," "]}),(null==E?void 0:E.reports[0].revision)&&(0,d.jsxs)(aW.ZP,{children:["Revision:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].revision)||"No data"})," "]}),(null==E?void 0:E.reports[0].recitation)&&(0,d.jsxs)(aW.ZP,{children:["Recitation:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].recitation)||"No data"})," "]}),(null==E?void 0:E.reports[0].reading)&&(0,d.jsxs)(aW.ZP,{children:["Reading:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].reading)||"No data"})," "]})]}),(0,d.jsxs)(w.ZP,{item:!0,xs:12,sm:6,children:[(null==E?void 0:E.reports[0].memorizationLevel)&&(0,d.jsxs)(aW.ZP,{children:["Memorization Grade:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].memorizationLevel)||"No data"})," "]}),(null==E?void 0:E.reports[0].revisionLevel)&&(0,d.jsxs)(aW.ZP,{children:["Revision Grade:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].revisionLevel)||"No data"})," "]}),(null==E?void 0:E.reports[0].tajweed)&&(0,d.jsxs)(aW.ZP,{children:["Tajweed:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null==E?void 0:E.reports[0].tajweed)||"No data"})," "]}),(null==E?void 0:E.reports[0].readingLevel)&&(0,d.jsxs)(aW.ZP,{children:["Reading Grade:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null===(z=null==E?void 0:E.reports[0])|| void 0===z?void 0:z.readingLevel)||"No data"})," "]})]})]})]}),(null===(A=null==E?void 0:E.reports[0])|| void 0===A?void 0:A.homework)&&(0,d.jsxs)(aW.ZP,{children:["H.W:",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null===(B=null==E?void 0:E.reports[0])|| void 0===B?void 0:B.homework)||"No data"})," "]}),(null===(C=null==E?void 0:E.reports[0])|| void 0===C?void 0:C.notes)&&(0,d.jsxs)(aW.ZP,{children:["Notes:"," ",(0,d.jsx)(p.Z,{color:"black",sx:{overflowWrap:"break-word",minWidth:"100px"},children:(null===(D=null==E?void 0:E.reports[0])|| void 0===D?void 0:D.notes)||"No data"})," "]})]})]})]})},a_=function(a){var b,c,f,h,i,j,k,m,n,r,s,u,v,w,A,E,F,G,H,I,J,K,L,N,O,P,Q,S,T,U,V,W,X=a.row,Y=(a.labelId,a.updateSession),Z=a.deleteSession,$=a.statuses,_=a.setReoprtFlag,aa=a.reportFlag;(0,M.s)();var ab=(0,ak.a)().user,ac=(0,e.useState)(!1),ad=ac[0],ae=ac[1],af=(0,e.useState)(!1),ag=af[0],ah=af[1],ai=(0,e.useState)(!1),aj=ai[0],al=ai[1];(0,aG.Z)();var an,ao=(null==X?void 0:X.status)==="done"?"success":(null==X?void 0:X.status)==="cancelled"||(null==X?void 0:X.status)==="expired"?"error":(null==X?void 0:X.status)==="waiting"?"warning":(null==X?void 0:X.status)==="rescheduled"?"info":"primary",ap=["".concat(null==X?void 0:null===(b=X.patch)|| void 0===b?void 0:null===(c=b.teacher)|| void 0===c?void 0:c.firstName," ").concat(null==X?void 0:null===(f=X.patch)|| void 0===f?void 0:null===(h=f.teacher)|| void 0===h?void 0:h.lastName)||"no data","".concat(null==X?void 0:null===(i=X.patch)|| void 0===i?void 0:null===(j=i.student)|| void 0===j?void 0:j.firstName," ").concat(null==X?void 0:null===(k=X.patch)|| void 0===k?void 0:null===(m=k.student)|| void 0===m?void 0:m.lastName)||"no data",(0,d.jsx)(ay.Z,{label:null==X?void 0:X.status,color:ao})||"no data","".concat((null==X?void 0:null===(n=X.startedAt)|| void 0===n?void 0:n.substr(0,10))||"no"," ").concat((null==X?void 0:X.startedAt)?aZ(R()(X.startedAt).format("HH:mm")):"data")||"no data","".concat((null==X?void 0:null===(r=X.endedAt)|| void 0===r?void 0:r.substr(0,10))||"no"," ").concat((null==X?void 0:X.endedAt)?aZ(R()(X.endedAt).format("HH:mm")):"data")||"no data",(null==X?void 0:null===(s=X.patch)|| void 0===s?void 0:null===(u=s.department)|| void 0===u?void 0:u.name)||"no data",(null==X?void 0:null===(v=X.date)|| void 0===v?void 0:v.substr(0,10))||"no data",aZ(null==X?void 0:X.startTime)||"no data",aZ(null==X?void 0:X.endTime)||"no data",],aq=function(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){if("object"==typeof a[c]&&null!==a[c]){var d=aq(a[c]);for(var e in d)d.hasOwnProperty(e)&&(b[c+"."+e]=d[e])}else b[c]=a[c]}return b},ar=(0,q.TA)({initialValues:{sessionMethod:null==X?void 0:X.sessionMethod,title:null==X?void 0:X.title,status:null==X?void 0:X.status,date:null==X?void 0:X.date,startTime:null==X?void 0:X.startTime,endTime:null==X?void 0:X.endTime},enableReinitialize:!0,validationSchema:D.Ry({sessionMethod:D.Z_().required("sessionMethod is required"),title:D.Z_().max(255).required("title is required"),status:D.Z_().max(255).required("status is required"),date:D.hT().required("date is required"),startTime:D.Z_().required("startTime is required"),endTime:D.Z_().required("endTime is required")}),onSubmit:(an=(0,l.Z)(o().mark(function a(b){var c,d,e,f;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=aq(ar.initialValues),e={},null===(c=Object.entries(d))|| void 0===c||c.map(function(a){var c=(0,aA.Z)(a,2),d=c[0],f=c[1],g=aI()(b,d);g!==f&&aK()(e,d,g)}),a.next=6,Y(X.id,e);case 6:(f=a.sent.success)&&ae(!1);case 8:case"end":return a.stop()}},a)})),function(a){return an.apply(this,arguments)})});(0,e.useEffect)(function(){if(X){var a;ar.setValues({sessionMethod:null==X?void 0:X.sessionMethod,title:null==X?void 0:X.title,status:null==X?void 0:X.status,date:null==X?void 0:null===(a=X.date)|| void 0===a?void 0:a.substr(0,10),startTime:null==X?void 0:X.startTime,endTime:null==X?void 0:X.endTime})}},[X]);var as=function(){console.log("open"),ah(!0)},at=function(a){console.log("close"),ah(!1),Y(a,{status:"done",endedAt:new Date(Date.now())})},au=function(){al(!0)},av=function(){al(!1)},aw=function(){var a,b,c=null==X?void 0:null===(a=X.patch)|| void 0===a?void 0:null===(b=a.student)|| void 0===b?void 0:b.zoomLink,d=new URL("https://zoom.us/"),e=new URL(c,d);window.open(e.toString(),"new")};return(0,d.jsxs)(e.Fragment,{children:[(0,d.jsxs)(aD.Z,{sx:{"& > *":{borderBottom:0,cursor:"pointer"}},children:[null==ap?void 0:ap.map(function(a,b){return(0,d.jsx)(aB.Z,{scope:"row",onClick:function(){return ae(!ad)},sx:{color:"black"},children:a},b)}),(0,d.jsx)(aB.Z,{scope:"row",sx:{color:"black"},children:(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(null==X?void 0:X.status)==="waiting"&&(null==X?void 0:null===(w=X.zoomSessionMeetings)|| void 0===w?void 0:w.length)<1&&(null==X?void 0:null===(A=X.patch)|| void 0===A?void 0:null===(E=A.student)|| void 0===E?void 0:E.zoomLink)&&(null==ab?void 0:null===(F=ab.role)|| void 0===F?void 0:F.name)!=="student"&&(null==ab?void 0:null===(G=ab.role)|| void 0===G?void 0:G.name)!=="parent"&&(0,d.jsx)(B.Z,{variant:"contained",disabled:new Date(null==X?void 0:X.date)>=new Date||(null==X?void 0:X.startTime)>=new Date().toTimeString(),onClick:function(){Y(X.id,{status:"running",startedAt:new Date}),aw()},sx:{fontSize:12,mr:1},size:"small",children:"Start"}),(null==X?void 0:X.status)==="running"&&(0,d.jsxs)(d.Fragment,{children:[(null==X?void 0:null===(H=X.patch)|| void 0===H?void 0:null===(I=H.student)|| void 0===I?void 0:I.zoomLink)&&(0,d.jsx)(B.Z,{variant:"contained",color:"primary",onClick:function(){return aw()},sx:{fontSize:12,mr:1},size:"small",children:"Join"}),(null==ab?void 0:null===(J=ab.role)|| void 0===J?void 0:J.name)!=="student"&&(null==ab?void 0:null===(K=ab.role)|| void 0===K?void 0:K.name)!=="parent"&&(0,d.jsx)(B.Z,{variant:"contained",color:"success",onClick:function(){as()},sx:{fontSize:12,mr:1,backgroundColor:"green"},size:"small",children:"End"})]}),(null==X?void 0:X.status)!=="done"&&(null==X?void 0:X.status)!=="cancelled"&&(null==X?void 0:X.status)!=="running"&&((null==ab?void 0:null===(L=ab.role)|| void 0===L?void 0:L.name)==="admin"||(null==ab?void 0:null===(N=ab.role)|| void 0===N?void 0:N.name)==="super_admin")&&(0,d.jsx)(B.Z,{variant:"contained",color:"error",onClick:function(){return Y(X.id,{status:"cancelled"})},sx:{fontSize:12},size:"small",children:"Cancel"})]})}),(0,d.jsx)(aB.Z,{scope:"row",sx:{color:"black"},children:(0,d.jsx)(aC.Z,{onClick:function(){return au()},sx:{p:0,ml:1,mb:1.5},children:(0,d.jsx)(aE,{color:"primary"})})}),(0,d.jsx)(aB.Z,{scope:"row",sx:{color:"black"},children:(0,d.jsx)(aC.Z,{onClick:function(){return Z(X.id)},sx:{p:0,ml:1,mb:1.5},children:(0,d.jsx)(aL.Z,{color:"error"})})})]}),(0,d.jsx)(aD.Z,{sx:{border:0},children:(0,d.jsx)(aB.Z,{style:{paddingBottom:0,paddingTop:0,border:0},colSpan:12,children:(0,d.jsx)(aF.Z,{in:ad,timeout:"auto",unmountOnExit:!0,children:(0,d.jsxs)(g.Z,{sx:{margin:1},children:[(0,d.jsx)(p.Z,{variant:"h6",gutterBottom:!0,component:"div",sx:{margin:0},children:"edit"}),(0,d.jsxs)("form",{onSubmit:ar.handleSubmit,children:[(0,d.jsx)(y.Z,{children:(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Session Method",name:"sessionMethod",value:ar.values.sessionMethod,error:Boolean(ar.errors.sessionMethod&&ar.touched.sessionMethod),helperText:ar.touched.sessionMethod&&(null===(O=ar.errors.sessionMethod)|| void 0===O?void 0:O.toString()),InputLabelProps:{shrink:!!ar.values.sessionMethod},fullWidth:!0,required:!0,select:!0,onChange:ar.handleChange,children:am.map(function(a){return(0,d.jsx)(z.Z,{value:a.value,children:a.label},a.value)})})}),(0,d.jsx)(x.Z,{label:"Title",name:"title",type:"text",onChange:ar.handleChange,value:ar.values.title,error:Boolean(ar.errors.title&&ar.touched.title),helperText:ar.touched.title&&(null===(P=ar.errors.title)|| void 0===P?void 0:P.toString()),size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1}}),(0,d.jsx)(y.Z,{children:(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Status",name:"status",value:ar.values.status,error:Boolean(ar.errors.status&&ar.touched.status),helperText:ar.touched.status&&(null===(Q=ar.errors.status)|| void 0===Q?void 0:Q.toString()),InputLabelProps:{shrink:!!ar.values.status},fullWidth:!0,required:!0,select:!0,onChange:ar.handleChange,children:$.map(function(a){return(0,d.jsx)(z.Z,{value:a,children:a},a)})})}),(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Date",name:"date",type:"date",onChange:ar.handleChange,value:ar.values.date,error:Boolean(ar.errors.date&&ar.touched.date),helperText:ar.touched.date&&(null===(S=ar.errors.date)|| void 0===S?void 0:S.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Start Time",name:"startTime",type:"time",onChange:ar.handleChange,value:ar.values.startTime,error:Boolean(ar.errors.startTime&&ar.touched.startTime),helperText:ar.touched.startTime&&(null===(T=ar.errors.startTime)|| void 0===T?void 0:T.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(x.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"End Time",name:"endTime",type:"time",onChange:ar.handleChange,value:ar.values.endTime,error:Boolean(ar.errors.endTime&&ar.touched.endTime),helperText:ar.touched.endTime&&(null===(U=ar.errors.endTime)|| void 0===U?void 0:U.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(C.Z,{type:"submit",sx:{width:{xs:15,sm:20,md:30,lg:40,xl:50},"& .MuiInputBase-root":{height:40}},variant:"contained",children:"submit"})]})]})})})}),(0,d.jsx)(t.Z,{maxWidth:"md",open:ag,children:(0,d.jsx)(aU,{setReoprtFlag:_,reportFlag:aa,sessionDeptName:null===(V=X.patch)|| void 0===V?void 0:null===(W=V.department)|| void 0===W?void 0:W.name,sessionId:X.id,handleCloseCreateReport:at})}),(0,d.jsx)(t.Z,{maxWidth:"md",open:aj,onClose:av,children:(0,d.jsx)(a$,{session:X,handleCloseReport:av})})]})},a0=c(1163),a1=(0,ab.Z)((0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),"Filter"),a2=(0,aa.ZP)("div",{shouldForwardProp:function(a){return"open"!==a}})(function(a){var b,c,d=a.theme,e=a.open;return(0,m.Z)((b={flexGrow:1,overflow:"hidden",zIndex:1},(0,ao.Z)(b,d.breakpoints.up("lg"),{marginLeft:-380}),(0,ao.Z)(b,"transition",d.transitions.create("margin",{easing:d.transitions.easing.sharp,duration:d.transitions.duration.leavingScreen})),b),e&&(c={},(0,ao.Z)(c,d.breakpoints.up("lg"),{marginLeft:0}),(0,ao.Z)(c,"transition",d.transitions.create("margin",{easing:d.transitions.easing.easeOut,duration:d.transitions.duration.enteringScreen})),c))}),a3=function(a){var b,c,f,i,j,k,n,p,q=(0,M.s)(),s=(0,a0.useRouter)(),t=(0,ak.a)().user,u={date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null},v=(0,e.useState)({}),w=v[0],x=v[1],y=(0,e.useState)([]),z=y[0],A=y[1],C=(0,e.useState)(0),D=C[0],F=C[1],G=(0,e.useState)(0),H=G[0],I=G[1],J=(0,e.useState)([]),K=J[0],L=J[1],N=(0,e.useState)([]),O=N[0],P=N[1],Q=(0,e.useState)(0),R=Q[0],S=Q[1],T=(0,e.useState)(25),U=T[0],W=T[1],X=(0,e.useState)([]),Y=X[0],Z=X[1],$=(0,e.useState)("waiting"),_=$[0],aa=$[1];(0,r.Z)(function(a){return a.breakpoints.up("md")},{noSsr:!1});var ab,ac,ad,ae=(0,e.useState)(!0),af=(ae[0],ae[1]),ag=(0,e.useRef)(null),ah=(0,e.useState)(!1),ai=ah[0],al=ah[1],am=(0,e.useState)(!1),an=am[0],ao=am[1],aA=["waiting","expired","running","done","cancelled","absent","rescheduled",],aB=[{label:"all",value:"",count:R},{label:"waiting",value:"waiting",count:null===(b=K.find(function(a){return a.status.match("waiting")}))|| void 0===b?void 0:b.count},{label:"running",value:"running",count:null===(c=K.find(function(a){return a.status.match("running")}))|| void 0===c?void 0:c.count},{label:"done",value:"done",count:null===(f=K.find(function(a){return a.status.match("done")}))|| void 0===f?void 0:f.count},{label:"cancelled",value:"cancelled",count:null===(i=K.find(function(a){return a.status.match("cancelled")}))|| void 0===i?void 0:i.count},{label:"expired",value:"expired",count:null===(j=K.find(function(a){return a.status.match("expired")}))|| void 0===j?void 0:j.count},{label:"absent",value:"absent",count:null===(k=K.find(function(a){return a.status.match("absent")}))|| void 0===k?void 0:k.count},{label:"rescheduled",value:"rescheduled",count:null===(n=K.find(function(a){return a.status.match("rescheduled")}))|| void 0===n?void 0:n.count},],aC=null==Y?void 0:Y.map(function(a){var b;return{label:a.name,value:a.duration,count:null===(b=O.find(function(b){return(null==b?void 0:b.sessionTypeId)===a.id}))|| void 0===b?void 0:b.count}}),aD=function(a,b){aa(b),aE({limit:U,offset:0,status:b})},aE=(0,e.useCallback)((ab=(0,l.Z)(o().mark(function a(b){var c;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log((0,m.Z)({},b)),a.prev=1,a.next=4,V.getSessions((0,m.Z)({},b));case 4:c=a.sent,q()&&(A(c.rows),I(c.count),L(c.statusCount),P(c.typesCount),S(c.totalCount)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[1,8]])})),function(a){return ab.apply(this,arguments)}),[q,w]),aF=(ac=(0,l.Z)(o().mark(function a(b){var c,d;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=E.ZP.loading("delete"),a.prev=1,a.next=4,V.deleteSession(b);case 4:if(!(d=a.sent)){a.next=12;break}return E.ZP.dismiss(c),E.ZP.success("deleteSessionSuccess"),aE({limit:U,offset:D,status:_}),a.abrupt("return",{success:!0});case 12:return E.ZP.dismiss(c),E.ZP.error("deleteSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),E.ZP.dismiss(c),E.ZP.error(a.t0.message||"deleteSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a){return ac.apply(this,arguments)}),aG=(ad=(0,l.Z)(o().mark(function a(b,c){var d,e;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=E.ZP.loading("update"),a.prev=1,a.next=4,V.updateSession(b,c);case 4:if(!(e=a.sent)){a.next=12;break}return E.ZP.dismiss(d),E.ZP.success("updateSessionSuccess"),aE({limit:U,offset:D,status:_}),a.abrupt("return",{success:!0});case 12:return E.ZP.dismiss(d),E.ZP.error("updateSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),E.ZP.dismiss(d),E.ZP.error(a.t0.message||"updateSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a,b){return ad.apply(this,arguments)}),aH=(0,e.useCallback)((0,l.Z)(o().mark(function a(){var b;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,V.getSessionTypes();case 3:b=a.sent,q()&&Z(b.resp),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[q]);(0,e.useEffect)(function(){aH()},[]),(0,e.useEffect)(function(){aE({limit:U,offset:D,status:_})},[]),(0,e.useEffect)(function(){aE({limit:U,offset:D,status:_})},[an]),(0,e.useEffect)(function(){var a;(null==s?void 0:null===(a=s.query)|| void 0===a?void 0:a.code)&&aM(s.query.code,s.query.sessionId)},[s.query]);var aI,aJ=function(a,b){F(b),aE({limit:U,offset:b*U,status:_})},aK=function(a){W(parseInt(a.target.value,10)),F(0),aE({limit:parseInt(a.target.value,10),offset:0,status:_})},aL=(0,e.useState)(!1),aM=(aL[0],aL[1],(0,e.useCallback)((aI=(0,l.Z)(o().mark(function a(b,c){var d;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,V.startMeeting(b,c);case 3:(d=a.sent).success&&(window.history.replaceState(null,"","/sessions"),window.open(d.meetingUrl,"_blank"),aE({limit:U,offset:D,status:_})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),window.history.replaceState(null,"","/sessions"),E.ZP.error((null===a.t0|| void 0===a.t0?void 0:a.t0.message)||"failed to start session");case 11:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return aI.apply(this,arguments)}),[q])),aN=function(a){console.log({object:a}),x(a),aE((0,m.Z)({status:_,limit:U,offset:0},a))},aO=function(){af(!0),aN(u)},aP=function(){al(function(a){return!a})},aQ=function(){al(!1)};return(0,e.useEffect)(function(){console.log("Previous value:",w)},[w]),(0,d.jsxs)(g.Z,{sx:{width:"100%",scrollBehavior:"auto"},children:[["super_admin","admin"].includes(null==t?void 0:null===(p=t.role)|| void 0===p?void 0:p.name)&&(0,d.jsx)(B.Z,{endIcon:(0,d.jsx)(a1,{fontSize:"small"}),onClick:aP,sx:{ml:1,mt:1},variant:"outlined",children:"Filters"}),(0,d.jsx)(au.Z,{elevation:12,sx:(0,m.Z)({mt:.5},{bgcolor:function(a){return(0,ap.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,d.jsxs)(aw.Z,{sx:{backgroundColor:"white"},children:[(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(ax.Z,{indicatorColor:"primary",onChange:aD,scrollButtons:"auto",sx:{px:2},textColor:"primary",value:_,variant:"scrollable",children:aB.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"60px",mt:"auto",mb:"auto"},icon:(0,d.jsx)(ay.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"neutral.600"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(az.Z,{}),(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(ax.Z,{indicatorColor:"secondary",scrollButtons:"auto",sx:{px:2},textColor:"primary",value:_,variant:"scrollable",children:null==aC?void 0:aC.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"60px",mt:"auto",mb:"auto",cursor:"unset",color:"primary.dark"},icon:(0,d.jsx)(ay.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"text.primary"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(az.Z,{}),(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(0,d.jsx)(aj,{containerRef:ag,onClose:aQ,open:ai,applyFilters:function(a){return aN(a)},clearFilters:aO}),(0,d.jsx)(a2,{open:ai}),(0,d.jsx)(g.Z,{sx:{width:"100%"},children:(0,d.jsx)(as.Z,{children:(0,d.jsxs)(aq.Z,{"aria-labelledby":"tableTitle",size:"small",children:[(0,d.jsx)(av._,{headCells:[{id:"teacher",numeric:!1,disablePadding:!0,label:"Teacher"},{id:"student",numeric:!1,disablePadding:!0,label:"Student"},{id:"status",numeric:!1,disablePadding:!0,label:"Status"},{id:"startedAt",numeric:!1,disablePadding:!0,label:"Started At"},{id:"endedAt",numeric:!1,disablePadding:!0,label:"Ended At"},{id:"subject",numeric:!0,disablePadding:!1,label:"Subject"},{id:"date",numeric:!0,disablePadding:!1,label:"Date"},{id:"startTime",numeric:!0,disablePadding:!1,label:"Start Time"},{id:"endTime",numeric:!0,disablePadding:!1,label:"End Time"},{id:"actions",numeric:!0,disablePadding:!1,label:""},{id:"delete",numeric:!0,disablePadding:!1,label:""},]}),(0,d.jsx)(ar.Z,{children:z.map(function(a,b){var c="enhanced-table-checkbox-".concat(b);return(0,d.jsx)(a_,{row:a,labelId:c,deleteSession:aF,updateSession:aG,statuses:aA,setReoprtFlag:ao,reportFlag:an},null==a?void 0:a.id)})})]})})})]}),(0,d.jsx)(at.Z,{component:"div",count:H,rowsPerPageOptions:[10,25,50,100],page:D,rowsPerPage:U,onPageChange:aJ,onRowsPerPageChange:aK})]})})]})},a4=c(1132),a5=function(){var a=(0,e.useState)("1"),b=a[0],c=a[1],f=function(a,b){c(b)};return(0,d.jsx)(g.Z,{sx:{width:"100%",typography:"body1",zoom:"77%"},children:(0,d.jsxs)(i.ZP,{value:b,children:[(0,d.jsx)(g.Z,{sx:{borderBottom:1,borderColor:"divider",p:"10px 30px"},children:(0,d.jsxs)(j.Z,{variant:"scrollable",scrollButtons:"auto",onChange:f,"aria-label":"Session options",children:[(0,d.jsx)(h.Z,{label:"List Session",value:"1"}),(0,d.jsx)(h.Z,{label:"Add Session",value:"2"})]})}),(0,d.jsx)(k.Z,{value:"1",sx:{p:.5},children:(0,d.jsx)(a3,{roleId:4})}),(0,d.jsx)(k.Z,{value:"2",children:(0,d.jsx)(an,{})})]})})};a5.getLayout=function(a){return(0,d.jsx)(a4.a,{children:(0,d.jsx)(f.c,{children:a})})};var a6=a5},2071:function(a,b,c){"use strict";c.d(b,{K:function(){return e}});var d=c(6486),e=function(a){var b=Object.keys(a),c=[];return a?(b.forEach(function(b){((0,d.isEmpty)(a[b])||(0,d.isNil)(a[b]))&&"number"!=typeof a[b]||c.push("".concat(b,"=").concat(a[b])),("archived"===b||"exported"===b)&&c.push("".concat(b,"=").concat(a[b]))}),c.join("&")):""}}},function(a){a.O(0,[69,805,497,307,659,931,764,266,720,886,324,602,98,723,774,888,179],function(){var b;return a(a.s=4587)}),_N_E=a.O()}])