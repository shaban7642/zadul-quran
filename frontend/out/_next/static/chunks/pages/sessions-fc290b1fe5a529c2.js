(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{4587:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sessions",function(){return c(138)}])},4150:function(a,b,c){"use strict";c.d(b,{t:function(){return k}});var d=c(4727),e=c(5815),f=c(4051),g=c.n(f),h=c(5485),i=c(2071),j=function(){function a(){(0,e.Z)(this,a)}var b=a.prototype;return b.getDocuments=function(a,b,c,e){return(0,d.Z)(g().mark(function d(){return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(d,f){var g={limit:a,offset:b,documentType:c,pageName:e};try{var j=h.E.get("/documents/?".concat((0,i.K)(g)));d(j)}catch(k){f(Error("Internal server error"))}}));case 1:case"end":return d.stop()}},d)}))()},b.createDocument=function(a,b,c,e){return(0,d.Z)(g().mark(function f(){return g().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",new Promise(function(){var f=(0,d.Z)(g().mark(function d(f,i){var j;return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:try{j=h.E.post('/documents/upload?data={"documentType": '.concat(JSON.stringify(a),', "userId": ').concat(c,', "reportId": ').concat(e||0,"}"),b,{contentType:"multipart/form-data"}),f(j)}catch(g){i(Error("Internal server error"))}case 1:case"end":return d.stop()}},d)}));return function(a,b){return f.apply(this,arguments)}}()));case 1:case"end":return f.stop()}},f)}))()},b.updateDocument=function(a,b){return(0,d.Z)(g().mark(function c(){return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=h.E.put("/documents/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteDocument=function(a){return(0,d.Z)(g().mark(function b(){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=h.E.delete("/documents/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),k=new j},6469:function(a,b,c){"use strict";c.d(b,{Z:function(){return e}});var d=c(7294);function e(a,b){var c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:{},e=c.getCachedCallback,f=void 0===e?function(a){return a}:e,g=c.expirationDays,h=(0,d.useState)(function(){var c=localStorage.getItem(b);if(c){var d=JSON.parse(c);if(d.expiresAt>Date.now())return f(d.value);localStorage.removeItem(b)}return f(a)}),i=h[0],j=h[1];if(!function(a,b){var c=(0,d.useRef)(!0);(0,d.useEffect)(function(){if(c.current){c.current=!1;return}a()},b)}(function(){if(null==i){localStorage.removeItem(b);return}var a=Date.now()+864e5*(g||7);localStorage.setItem(b,JSON.stringify({value:i,expiresAt:a}))},[i]),null==b)throw Error("Please insert cacheKey");var k=(0,d.useCallback)(function(){localStorage.removeItem(b)},[b]);return[i,j,k,]}},138:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return aT}});var d=c(5893),e=c(7294),f=c(9633),g=c(7357),h=c(44),i=c(5670),j=c(6568),k=c(4769),l=c(6263),m=c(4727),n=c(7573),o=c(4251),p=c(969),q=c(4051),r=c.n(q),s=c(1796),t=c(7906),u=c(295),v=c(2882),w=c(519),x=c(629),y=c(2734),z=c(3252),A=c(3184),B=c(3816),C=c(5071),D=c(5861),E=c(3946),F=c(6761),G=function(a){var b=a.headCells,c=a.numSelected,e=a.onSelectAllClick,f=a.deleteSession,g=a.rowCount;return(0,y.Z)(),(0,d.jsx)(A.Z,{sx:(0,o.Z)({width:"100%",mb:2},{bgcolor:function(a){return(0,s.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,d.jsxs)(B.Z,{children:[b.map(function(a,b){return(0,d.jsx)(z.Z,{padding:a.disablePadding?"none":"normal",sx:{color:function(a){return a.palette.info.main}},children:a.label},a.id)}),(0,d.jsx)(z.Z,{className:"no-print",children:(0,d.jsx)(D.Z,{color:"error",sx:{fontWeight:"bold"},children:c>0&&" ".concat(c," selected")})}),(0,d.jsx)(z.Z,{padding:"checkbox",className:"no-print",children:c>0&&(0,d.jsx)(E.Z,{onClick:function(){return f()},children:(0,d.jsx)(F.Z,{color:"error",fontSize:"medium"})})}),(0,d.jsx)(z.Z,{padding:"checkbox",className:"no-print",children:(0,d.jsx)(C.Z,{color:"primary",indeterminate:c>0&&c<g,checked:g>0&&c===g,onChange:e,inputProps:{"aria-label":"select all desserts"}})})]})})},H=c(948),I=c(6818),J=c(3321),K=c(6242),L=c(7023),M=c(7918),N=c(7720),O=c(4054),P=c(135),Q=c(8972),R=c(4666),S=c(8169),T=(0,S.Z)((0,d.jsx)("svg",{viewBox:"0 0 11 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M3.29008 6.6899L7.1472 6.70013M3.28371 9.08989L7.14084 9.10012M3.29644 4.28991L7.15357 4.30014M0.731381 1.8831C0.731802 1.72397 0.799936 1.57154 0.920793 1.45934C1.04165 1.34714 1.20533 1.28436 1.37583 1.28481L9.09008 1.30526C9.26058 1.30571 9.42393 1.36936 9.54419 1.4822C9.66445 1.59504 9.73177 1.74783 9.73135 1.90696L9.70113 13.3069L7.45511 11.801L5.20114 13.295L2.95513 11.789L0.701159 13.2831L0.731381 1.8831Z",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round"})}),"BillsIcon"),U=c(7922),V=c(2175),W=c(8987),X=c(6310),Y=c(7361),Z=c.n(Y),$=c(6968),_=c.n($),aa=c(4455),ab=c(7704),ac=c(2875),ad=c(9779),ae=c(6886),af=c(3841),ag=c(1085),ah=c(6501),ai=c(5815),aj=c(5485),ak=function(){function a(){(0,ai.Z)(this,a)}var b=a.prototype;return b.getReports=function(a,b){return(0,m.Z)(r().mark(function c(){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=aj.E.get("/reports",{limit:a,page:++b});c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.createReport=function(a){return(0,m.Z)(r().mark(function b(){return r().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=aj.E.post("/reports/create",a);b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},b.updateReport=function(a,b){return(0,m.Z)(r().mark(function c(){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(c,d){try{var e=aj.E.put("/reports/".concat(a),b);c(e)}catch(f){d(Error("Internal server error"))}}));case 1:case"end":return c.stop()}},c)}))()},b.deleteReport=function(a){return(0,m.Z)(r().mark(function b(){return r().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",new Promise(function(b,c){try{var d=aj.E.delete("/reports/".concat(a));b(d)}catch(e){c(Error("Internal server error"))}}));case 1:case"end":return b.stop()}},b)}))()},a}(),al=new ak,am=c(4150),an=c(4970),ao=c(888),ap=function(a){var b,c,f,h,i,j,k,l=a.sessionDeptName,n=a.sessionId,p=a.updateSession,q=a.handleCloseCreateReport,t=a.setReoprtFlag,u=a.reportFlag,v=(0,e.useState)([]),w=v[0],y=v[1],z=(0,e.useState)([]),A=z[0],B=z[1],C=(0,e.useState)(0),D=C[0],E=C[1],F=(0,ab.a)().user,G=(0,e.useState)(!1),I=(G[0],G[1]),K=["1","2","3","4","5","6","7","8","9","10"],L=(0,aa.s)(),R=(0,e.useCallback)((c=(0,m.Z)(r().mark(function a(b,c){var d;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,am.t.getDocuments(b,c,"books");case 3:d=a.sent,L()&&y(d.rows),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),ah.ZP.error(a.t0.message||"failed");case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return c.apply(this,arguments)}),[L]),S=(0,V.TA)({initialValues:{date:new Date,sessionId:n,notes:"",homework:"",bookId:null===(b=w[0])|| void 0===b?void 0:b.id,unit:"",topic:"",level:"",newWords:"",expressions:"",rules:"",memorization:"",revision:"",tajweed:"",recitation:"",reading:"",memorizationLevel:"",revisionLevel:"",readingLevel:""},onSubmit:(f=(0,m.Z)(r().mark(function a(b){var c,d,e;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T(b);case 3:d=(c=a.sent).id,e=c.success,e&&E(d),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}},a,null,[[0,9]])})),function(a){return f.apply(this,arguments)})}),T=(h=(0,m.Z)(r().mark(function a(b){var c,d;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=ah.ZP.loading("createReports"),a.prev=1,a.next=4,al.createReport(b);case 4:return d=a.sent.id,ah.ZP.dismiss(c),ah.ZP.success("createReports "),a.abrupt("return",{id:d,success:!0});case 10:return a.prev=10,a.t0=a.catch(1),ah.ZP.dismiss(c),ah.ZP.error(a.t0.message||"createReportsFailed"),a.abrupt("return",{id:0,success:!1});case 15:case"end":return a.stop()}},a,null,[[1,10]])})),function(a){return h.apply(this,arguments)}),U=(i=(0,m.Z)(r().mark(function a(){var b;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=ah.ZP.loading("updateReports"),a.prev=1,!(0!==D)){a.next=12;break}return ah.ZP.dismiss(b),ah.ZP.success("update Report"),S.resetForm(),q(n),p(n,{status:"done",endedAt:new Date(Date.now())}),t(!u),a.abrupt("return",{success:!0});case 12:return a.abrupt("return",{success:!1});case 13:a.next=20;break;case 15:return a.prev=15,a.t0=a.catch(1),ah.ZP.dismiss(b),ah.ZP.error(a.t0.message||"updateReportsFailed"),a.abrupt("return",{success:!1});case 20:case"end":return a.stop()}},a,null,[[1,15]])})),function(){return i.apply(this,arguments)}),X=(j=(0,m.Z)(r().mark(function a(b,c,d){var e;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,am.t.createDocument({name:"reports",id:2},b,c,d);case 3:return e=a.sent,B((0,ad.Z)(A).concat([e.id])),a.abrupt("return",{success:!0});case 8:return a.prev=8,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",{success:!1});case 12:case"end":return a.stop()}},a,null,[[0,8]])})),function(a,b,c){return j.apply(this,arguments)}),Y=(k=(0,m.Z)(r().mark(function a(b){var c,d,e;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.preventDefault(),c=ah.ZP.loading("Upload file"),a.prev=2,I(!0),(d=new FormData).append("userId",F.id),d.append("file",b.target.files[0],b.target.files[0].name),a.next=9,X(d,F.id,D);case 9:e=a.sent,ah.ZP.dismiss(c),e.success?ah.ZP.success("File uploaded"):ah.ZP.error("Upload file failed"),a.next=19;break;case 14:a.prev=14,a.t0=a.catch(2),ah.ZP.dismiss(c),ah.ZP.error(a.t0.message||"Upload file failed"),I(!1);case 19:case"end":return a.stop()}},a,null,[[2,14]])})),function(a){return k.apply(this,arguments)}),Z=(0,H.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});return(0,e.useEffect)(function(){R(1e3,0)},[]),(0,d.jsx)(g.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",bgcolor:"#FFF",overflowX:"hidden"},children:(0,d.jsxs)(x.Z,{elevation:9,sx:{display:"flex",alignItems:"center",flexDirection:"column",p:"15px 15px",mr:1,width:"95%",bgcolor:"#FFF"},children:[" ",(0,d.jsx)(ae.ZP,{container:!0,children:D?(0,d.jsxs)(ae.ZP,{item:!0,xs:12,children:[" ",(0,d.jsxs)("div",{style:{textAlign:"center"},children:[(0,d.jsxs)(J.Z,{component:"label",variant:"contained",startIcon:(0,d.jsx)(an.Z,{}),children:["Upload file",(0,d.jsx)(Z,{type:"file",onChange:function(a){Y(a)}})]}),A.map(function(a){return(0,d.jsx)(ao.Z,{color:"success",sx:{position:"relative",top:10,ml:1}},a)})]}),(0,d.jsx)(N.Z,{sx:{mb:1,mt:2,mr:1}}),(0,d.jsx)("div",{style:{textAlign:"center"},children:(0,d.jsx)(W.Z,{type:"submit",onClick:function(){return U()},sx:{"& .MuiInputBase-root":{height:40},m:.5,p:1},variant:"contained",children:"Submit"})})]}):(0,d.jsx)(ae.ZP,{item:!0,xs:12,children:(0,d.jsxs)("form",{onSubmit:S.handleSubmit,children:[(0,d.jsx)(N.Z,{textAlign:"left",sx:{mb:1},children:(0,d.jsx)(M.Z,{label:"Feedback Report",sx:{fontWeight:"600"}})}),"Quran"!=l&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(O.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-level",children:"Grade"}),(0,d.jsx)(ag.Z,{name:"level",id:"outlined-level",labelId:"outlined-level",value:S.values.level,onChange:function(a){S.setFieldValue("level",a.target.value)},children:K.map(function(a){return(0,d.jsxs)(Q.Z,{sx:(0,ac.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,s.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:[a," / 10"]},a)})})]}),(0,d.jsxs)(O.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-adornment-bookId",children:"Book"}),(0,d.jsx)(ag.Z,{name:"bookId",id:"outlined-adornment-bookId",labelId:"outlined-adornment-bookId",value:S.values.bookId,onChange:function(a){S.setFieldValue("bookId",a.target.value)},children:null==w?void 0:w.map(function(a){return(0,d.jsx)(Q.Z,{sx:(0,ac.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,s.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:null==a?void 0:a.id,children:null==a?void 0:a.fileName},null==a?void 0:a.id)})})]}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.unit&&S.errors.unit),helperText:S.touched.unit&&S.errors.unit,label:"Unit",margin:"normal",id:"unit",name:"unit",type:"text",onChange:S.handleChange,value:S.values.unit,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.topic&&S.errors.topic),helperText:S.touched.topic&&S.errors.topic,label:"Topic",margin:"normal",id:"topic",name:"topic",type:"text",onChange:S.handleChange,value:S.values.topic,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}})]}),"Arabic"===l&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)(P.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(S.touched.newWords&&S.errors.newWords),helperText:S.touched.newWords&&S.errors.newWords,label:"New Words",margin:"normal",id:"newWords",name:"newWords",type:"text",onChange:S.handleChange,value:S.values.newWords,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(S.touched.expressions&&S.errors.expressions),helperText:S.touched.expressions&&S.errors.expressions,label:"Expressions",margin:"normal",id:"expressions",name:"expressions",type:"text",onChange:S.handleChange,value:S.values.expressions,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},error:Boolean(S.touched.rules&&S.errors.rules),helperText:S.touched.rules&&S.errors.rules,label:"Rules",margin:"normal",id:"rules",name:"rules",type:"text",onChange:S.handleChange,value:S.values.rules,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}})]}),"Quran"===l&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.memorization&&S.errors.memorization),helperText:S.touched.memorization&&S.errors.memorization,label:"Memorization",margin:"normal",id:"memorization",name:"memorization",type:"text",onChange:S.handleChange,value:S.values.memorization,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.revision&&S.errors.revision),helperText:S.touched.revision&&S.errors.revision,label:"Revision",margin:"normal",id:"revision",name:"revision",type:"text",onChange:S.handleChange,value:S.values.revision,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.tajweed&&S.errors.tajweed),helperText:S.touched.tajweed&&S.errors.tajweed,label:"Tajweed",margin:"normal",id:"tajweed",name:"tajweed",type:"text",onChange:S.handleChange,value:S.values.tajweed,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.recitation&&S.errors.recitation),helperText:S.touched.recitation&&S.errors.recitation,label:"Recitation",margin:"normal",id:"recitation",name:"recitation",type:"text",onChange:S.handleChange,value:S.values.recitation,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1},error:Boolean(S.touched.reading&&S.errors.reading),helperText:S.touched.reading&&S.errors.reading,label:"Reading",margin:"normal",id:"reading",name:"reading",type:"text",onChange:S.handleChange,value:S.values.reading,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsxs)(O.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-memorizationLevel",children:"Memorization Grade"}),(0,d.jsx)(ag.Z,{name:"memorizationLevel",id:"outlined-memorizationLevel",labelId:"outlined-memorizationLevel",value:S.values.memorizationLevel,onChange:function(a){S.setFieldValue("memorizationLevel",a.target.value)},children:K.map(function(a){return(0,d.jsx)(Q.Z,{sx:(0,ac.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,s.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]}),(0,d.jsxs)(O.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-revisionLevel",children:"Revision Grade"}),(0,d.jsx)(ag.Z,{name:"revisionLevel",id:"outlined-revisionLevel",labelId:"outlined-revisionLevel",value:S.values.revisionLevel,onChange:function(a){S.setFieldValue("revisionLevel",a.target.value)},children:K.map(function(a){return(0,d.jsx)(Q.Z,{sx:(0,ac.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,s.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]}),(0,d.jsxs)(O.Z,{sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:40},mr:1,marginTop:2,mb:1},variant:"outlined",children:[" ",(0,d.jsx)(af.Z,{sx:{top:-6},id:"outlined-readingLevel",children:"Reading Grade"}),(0,d.jsx)(ag.Z,{name:"readingLevel",id:"outlined-readingLevel",labelId:"outlined-readingLevel",value:S.values.readingLevel,onChange:function(a){S.setFieldValue("readingLevel",a.target.value)},children:K.map(function(a){return(0,d.jsx)(Q.Z,{sx:(0,ac.Z)((0,o.Z)({color:"black"},{bgcolor:function(a){return(0,s.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),{fontFamily:"sans-serif"}),value:a,children:a},a)})})]})]}),(0,d.jsx)(P.Z,{multiline:!0,minRows:3,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:100},mr:1},required:!0,error:Boolean(S.touched.homework&&S.errors.homework),helperText:S.touched.homework&&S.errors.homework,label:"H.W",margin:"normal",id:"homework",name:"homework",type:"text",onChange:S.handleChange,value:S.values.homework,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(P.Z,{multiline:!0,minRows:2,size:"medium",sx:{width:{xs:"100%"},"& .MuiInputBase-root":{height:80},mr:1},error:Boolean(S.touched.notes&&S.errors.notes),helperText:S.touched.notes&&S.errors.notes,label:"Notes",margin:"normal",id:"notes",name:"notes",type:"text",onChange:S.handleChange,value:S.values.notes,InputProps:{style:{fontFamily:"sans-serif",color:"black"}}}),(0,d.jsx)(N.Z,{sx:{mb:1,mt:2}}),(0,d.jsx)("div",{style:{textAlign:"right"},children:(0,d.jsx)(W.Z,{type:"submit",sx:{"& .MuiInputBase-root":{height:40},m:.5,p:1},variant:"contained",children:"Submit"})})]})})})," "]})})},aq=ap,ar=c(8462),as=c(891),at=c(1134),au=c(381),av=c.n(au),aw=c(594),ax=c(6023),ay=c(7116),az=c(660),aA=c(3358),aB=function(a){var b,c,f,h,i,j,k,l,m,n,o,p,q,r,s=a.session,t=a.handleCloseReport,u=a.setReoprtFlag,v=(0,e.useRef)(null),w=(0,ay.useReactToPrint)({contentRef:v,ignoreGlobalStyles:!1,pageStyle:"\n                @media print {\n                    @page {\n                        size: A4;\n                        margin: 3mm 2mm;\n                    }\n                    html, body {\n                        -webkit-print-color-adjust: exact;\n                        margin: 0px !important;\n                        padding: 0px  !important;\n                        overflow: hidden !important;\n                    }\n                    .page {\n                        box-shadow: none !important;\n                    }\n                    .no-print {\n                        display: none !important;\n                    }\n                    .print-only {\n                        display: flex !important;\n                    }\n                }\n            "}),y=(0,ab.a)().user,z=(0,e.useState)(!0),A=z[0],B=z[1];return(0,d.jsxs)(x.Z,{ref:v,elevation:12,className:"page",sx:{position:"relative",padding:"20px",margin:"20px auto",maxWidth:{xs:"100%",lg:"800px"},borderRadius:"16px",backgroundColor:"#FFF",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,d.jsx)(E.Z,{className:"no-print",onClick:t,sx:{position:"absolute",top:"16px",right:"16px",color:"primary.main"},children:(0,d.jsx)(aw.Z,{})}),(0,d.jsx)(J.Z,{className:"no-print",variant:"outlined",endIcon:(0,d.jsx)(ax.Z,{}),onClick:function(){return w()},sx:{marginBottom:"16px"},children:"Print as pdf"}),(0,d.jsxs)(g.Z,{className:"print-only",sx:{display:"none",justifyContent:"space-between",alignItems:"center",flexDirection:"row",p:2},children:[(0,d.jsx)(g.Z,{children:(0,d.jsx)(aA.G,{loading:"eager"})}),(0,d.jsx)(g.Z,{children:(0,d.jsx)(D.Z,{variant:"h4",color:"primary",children:"Zadul Quran"})})]}),(0,d.jsx)(D.Z,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"Session Information"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(N.Z,{sx:{marginBottom:"16px"},children:(0,d.jsx)(M.Z,{label:"Primary Details",color:"primary"})}),(0,d.jsxs)(ae.ZP,{container:!0,spacing:2,component:ar.Z,children:[(0,d.jsx)(ae.ZP,{item:!0,xs:12,sm:6,children:[{label:"Teacher",value:"".concat(null==s?void 0:null===(b=s.patch)|| void 0===b?void 0:null===(c=b.teacher)|| void 0===c?void 0:c.firstName," ").concat(null==s?void 0:null===(f=s.patch)|| void 0===f?void 0:null===(h=f.teacher)|| void 0===h?void 0:h.lastName)},{label:"Subject",value:null==s?void 0:null===(i=s.patch)|| void 0===i?void 0:null===(j=i.department)|| void 0===j?void 0:j.name},{label:"Date",value:av()(null==s?void 0:s.date).format("YYYY-MM-DD")},{label:"Start Time",value:(null==s?void 0:s.startTime)?av()("".concat(null==s?void 0:s.date.substr(0,11)).concat(s.startTime).concat(s.date.substr(19,24))).format("hh:mm A"):"no data"},{label:"Teacher Joined At",value:(null==s?void 0:s.startedAt)?av()(null==s?void 0:s.startedAt).format("hh:mm A"):"no data"},{label:"Student Joined At",value:(null==s?void 0:s.joinedAt)?av()(null==s?void 0:s.joinedAt).format("hh:mm A"):"no data"},].map(function(a,b){return(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsxs)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:[a.label,":"]}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:a.value||"No data"})]},b)})}),(0,d.jsx)(ae.ZP,{item:!0,xs:12,sm:6,children:[{label:"Student",value:"".concat(null==s?void 0:null===(k=s.patch)|| void 0===k?void 0:null===(l=k.student)|| void 0===l?void 0:l.firstName," ").concat(null==s?void 0:null===(m=s.patch)|| void 0===m?void 0:null===(n=m.student)|| void 0===n?void 0:n.lastName)},{label:"Session Type",value:null==s?void 0:null===(o=s.sessionType)|| void 0===o?void 0:o.name},{label:"Status",value:null==s?void 0:s.status},{label:"End Time",value:(null==s?void 0:s.endTime)?av()("".concat(null==s?void 0:s.date.substr(0,11)).concat(s.endTime).concat(s.date.substr(19,24))).format("hh:mm A"):"no data"},{label:"Ended At",value:(null==s?void 0:s.endedAt)?av()(null==s?void 0:s.endedAt).format("YYYY-MM-DD hh:mm A"):"no data"},{label:"Ended Day",value:(null==s?void 0:s.endedAt)?av()(null==s?void 0:s.endedAt).format("dddd"):"no data"},].map(function(a,b){return(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsxs)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:[a.label,":"]}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:a.value||"No data"})]},b)})})]}),(null==s?void 0:s.report)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(N.Z,{sx:{marginBottom:"16px"},children:[(0,d.jsx)(M.Z,{label:"Feedback",color:"primary"}),((null==y?void 0:null===(p=y.role)|| void 0===p?void 0:p.name)=="super_admin"||(null==y?void 0:null===(q=y.role)|| void 0===q?void 0:q.name)=="admin"||(null==y?void 0:null===(r=y.role)|| void 0===r?void 0:r.name)=="teacher")&&(0,d.jsx)(M.Z,{className:"no-print",onClick:function(){return B(!A)},label:"Edit",color:"success"})]}),A?(0,d.jsx)(aC,{session:s}):(0,d.jsx)(aD,{session:s,setReoprtFlag:u,setView:B})]})]})]})},aC=function(a){var b,c,e,f,g,h,i,j,k,l,m,n=a.session,o=(0,at.ZP)(),p=o.download,q=o.error;return(0,d.jsxs)(ae.ZP,{container:!0,component:ar.Z,children:[(null==n?void 0:n.report.date)&&(0,d.jsx)(ae.ZP,{item:!0,xs:12,children:(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Submition Date:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:av()(null==n?void 0:n.report.date).format("MMM-D-YYYY")})]})}),(null==n?void 0:n.report.document)&&(null==n?void 0:n.report.document.length)>0&&(0,d.jsx)(ae.ZP,{className:"no-print",item:!0,xs:12,children:(0,d.jsx)(ae.ZP,{container:!0,sx:{p:0},children:null==n?void 0:n.report.document.map(function(a,b){return(0,d.jsx)(ae.ZP,{item:!0,xs:12,sm:6,children:(0,d.jsxs)(as.ZP,{children:["File: ",b+1,(0,d.jsxs)(E.Z,{onClick:function(){return p("https://login-api.zadulquran.com/".concat(a.fileStoragePath),a.fileName)},sx:{p:.5,ml:1,color:"black",border:"1px solid black",fontSize:"16px"},children:["Download",(0,d.jsx)(az.Z,{fontSize:"medium"})]}),q&&(0,d.jsxs)(D.Z,{color:"error",sx:{fontSize:"12px"},children:["Error:"," ",JSON.stringify(q)]})]})},b)})})}),(null===(b=n.patch)|| void 0===b?void 0:null===(c=b.department)|| void 0===c?void 0:c.name)!=="Quran"&&(0,d.jsxs)(ae.ZP,{container:!0,component:ar.Z,children:[(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,children:[(null==n?void 0:n.report.level)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Grade:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:"".concat(null==n?void 0:n.report.level," / 10")})]}),(null==n?void 0:n.report.book)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Book:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null===(e=null==n?void 0:n.report.book)|| void 0===e?void 0:e.fileName)||"No data"})]})]}),(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,children:[(null==n?void 0:n.report.unit)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Unit:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:n.report.unit)||"No data"})]}),(null==n?void 0:n.report.topic)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Topic:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:n.report.topic)||"No data"})]})]})]}),(null===(f=n.patch)|| void 0===f?void 0:null===(g=f.department)|| void 0===g?void 0:g.name)==="Arabic"&&(0,d.jsxs)(d.Fragment,{children:[(null==n?void 0:n.report.newWords)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"New Words:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:n.report.newWords)||"No data"})]}),(null==n?void 0:n.report.expressions)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Expressions:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:n.report.expressions)||"No data"})]}),(null==n?void 0:n.report.rules)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Rules:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:n.report.rules)||"No data"})]})]}),(null===(h=n.patch)|| void 0===h?void 0:null===(i=h.department)|| void 0===i?void 0:i.name)==="Quran"&&(0,d.jsxs)(ae.ZP,{container:!0,component:ar.Z,children:[(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,children:[(null==n?void 0:n.report.memorization)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Memorization:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:n.report.memorization)||"No data"})]}),(null==n?void 0:n.report.revision)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Revision:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:n.report.revision)||"No data"})]}),(null==n?void 0:n.report.recitation)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Recitation:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:n.report.recitation)||"No data"})]}),(null==n?void 0:n.report.reading)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Reading:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:n.report.reading)||"No data"})]})]}),(0,d.jsxs)(ae.ZP,{item:!0,xs:12,sm:6,children:[(null==n?void 0:n.report.memorizationLevel)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Memorization Grade:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:"".concat(null==n?void 0:n.report.memorizationLevel," / 10")})]}),(null==n?void 0:n.report.revisionLevel)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Revision Grade:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:"".concat(null==n?void 0:n.report.revisionLevel," / 10")})]}),(null==n?void 0:n.report.tajweed)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Tajweed:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:n.report.tajweed)||"No data"})]}),(null==n?void 0:n.report.readingLevel)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Reading Grade:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:"".concat(null==n?void 0:n.report.readingLevel," / 10")})]})]})]}),(null==n?void 0:null===(j=n.report)|| void 0===j?void 0:j.homework)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"H.W:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:null===(k=n.report)|| void 0===k?void 0:k.homework)||"No data"})]}),(null==n?void 0:null===(l=n.report)|| void 0===l?void 0:l.notes)&&(0,d.jsxs)(as.ZP,{sx:{padding:"8px 0"},children:[(0,d.jsx)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:"Notes:"}),(0,d.jsx)(D.Z,{variant:"body2",sx:{marginLeft:"8px",color:"text.secondary"},children:(null==n?void 0:null===(m=n.report)|| void 0===m?void 0:m.notes)||"No data"})]})]})},aD=function(a){var b,c,f,g=a.session,h=a.setReoprtFlag,i=a.setView,j=(0,e.useState)(g),k=j[0],l=j[1],p=null==g?void 0:null===(b=g.patch)|| void 0===b?void 0:null===(c=b.department)|| void 0===c?void 0:c.name,q=(0,e.useState)([]),s=q[0],t=q[1],u=[{id:"1",name:"1"},{id:"2",name:"2"},{id:"3",name:"3"},{id:"4",name:"4"},{id:"5",name:"5"},{id:"6",name:"6"},{id:"7",name:"7"},{id:"8",name:"8"},{id:"9",name:"9"},{id:"10",name:"10"},],v=(0,aa.s)(),w=(0,e.useCallback)((f=(0,m.Z)(r().mark(function a(b,c){var d;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,am.t.getDocuments(b,c,"books");case 3:d=a.sent,v()&&t(d.rows.map(function(a){return(0,ac.Z)((0,o.Z)({},a),{name:a.fileName})})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),ah.ZP.error(a.t0.message||"failed");case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return f.apply(this,arguments)}),[v]);(0,e.useEffect)(function(){w(100,0)},[w]);var x,y=function(a,b){l(function(c){return(0,ac.Z)((0,o.Z)({},c),{report:(0,ac.Z)((0,o.Z)({},c.report),(0,n.Z)({},a,b))})})},z=(0,e.useState)(!1),A=z[0],B=z[1],C=(x=(0,m.Z)(r().mark(function a(){var b,c;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return B(!0),a.prev=1,a.next=5,al.updateReport(null===(b=k.report)|| void 0===b?void 0:b.id,k.report);case 5:c=a.sent,ah.ZP.success("Updated successfully"),h(function(a){return!a}),setTimeout(function(){i(!0)},500),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),ah.ZP.error(a.t0.message||"updateReportsFailed");case 14:return a.prev=14,setTimeout(function(){B(!1)},500),a.finish(14);case 17:case"end":return a.stop()}},a,null,[[1,11,14,17]])})),function(){return x.apply(this,arguments)}),D=function(){l(g),i(!0)};return(0,d.jsxs)(ae.ZP,{container:!0,spacing:2,component:ar.Z,children:["Quran"!=p?(0,d.jsx)(d.Fragment,{children:[{label:"Grade",field:"level",type:"select",options:u},{label:"Book",field:"bookId",type:"select",options:s},{label:"Unit",field:"unit",type:"text"},{label:"Topic",field:"topic",type:"text"},].map(function(a){var b=a.label,c=a.field,e=a.type,f=a.options,g=void 0===f?[]:f;return(0,d.jsx)(ae.ZP,{item:!0,xs:6,children:(0,d.jsx)(as.ZP,{children:"text"===e?(0,d.jsx)(P.Z,{label:b,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return y(c,a.target.value)},sx:{ml:2}}):(0,d.jsxs)(O.Z,{fullWidth:!0,children:[(0,d.jsx)(af.Z,{sx:{top:-6,ml:2},id:c,children:b}),(0,d.jsxs)(ag.Z,{labelId:c,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return y(c,a.target.value)},sx:{ml:2},children:[(0,d.jsx)(Q.Z,{value:"",children:"None"}),g.map(function(a){return(0,d.jsx)(Q.Z,{value:a.id,children:a.name},a.id)})]})]})})},c)})}):(0,d.jsx)(d.Fragment,{children:[{label:"Memorization",field:"memorization",type:"text"},{label:"Revision",field:"revision",type:"text"},{label:"Tajweed",field:"tajweed",type:"text"},{label:"Recitation",field:"recitation",type:"text"},{label:"Reading",field:"reading",type:"text"},{label:"Memorization Grade",field:"memorizationLevel",type:"select",options:u},{label:"Revision Grade",field:"revisionLevel",type:"select",options:u},{label:"Reading Grade",field:"readingLevel",type:"select",options:u},].map(function(a){var b=a.label,c=a.field,e=a.type,f=a.options,g=void 0===f?[]:f;return(0,d.jsx)(ae.ZP,{item:!0,xs:6,children:(0,d.jsx)(as.ZP,{children:"text"===e?(0,d.jsx)(P.Z,{label:b,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return y(c,a.target.value)},sx:{ml:2}}):(0,d.jsxs)(O.Z,{fullWidth:!0,children:[(0,d.jsx)(af.Z,{sx:{top:-6,ml:2},id:c,children:b}),(0,d.jsxs)(ag.Z,{labelId:c,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return y(c,a.target.value)},sx:{ml:2},children:[(0,d.jsx)(Q.Z,{value:"",children:"None"}),g.map(function(a){return(0,d.jsx)(Q.Z,{value:a.id,children:a.name},a.id)})]})]})})},c)})}),"Arabic"==p&&(0,d.jsx)(d.Fragment,{children:[{label:"New Words",field:"newWords",type:"text"},{label:"Expressions",field:"expressions",type:"text"},{label:"Rules",field:"rules",type:"text"},].map(function(a){var b=a.label,c=a.field;return a.type,(0,d.jsx)(ae.ZP,{item:!0,xs:6,children:(0,d.jsx)(as.ZP,{children:(0,d.jsx)(P.Z,{label:b,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return y(c,a.target.value)},sx:{ml:2}})})},c)})}),[{label:"H.W",field:"homework"},{label:"Notes",field:"notes"},].map(function(a){var b=a.label,c=a.field;return(0,d.jsx)(ae.ZP,{item:!0,xs:6,children:(0,d.jsx)(as.ZP,{children:(0,d.jsx)(P.Z,{label:b,fullWidth:!0,value:(null==k?void 0:k.report[c])||"",onChange:function(a){return y(c,a.target.value)},sx:{ml:2}})})},c)}),(0,d.jsxs)(ae.ZP,{item:!0,xs:12,container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:[(0,d.jsx)(ae.ZP,{item:!0,children:(0,d.jsx)(J.Z,{variant:"contained",color:"primary",disabled:A,onClick:C,children:A?"Loading...":"Save"})}),(0,d.jsx)(ae.ZP,{item:!0,children:(0,d.jsx)(J.Z,{onClick:D,children:"Cancel"})})]})]})},aE=function(a){var b,c,f,h,i,j,k,n,o,q,s,t,u,v,w,x,A,F,G,H,I,K,L,N,S,Y,$,ac,ad=a.row,ae=a.isItemSelected,af=a.labelId,ag=a.handleClick,ah=a.updateSession,ai=a.statuses,aj=a.setReoprtFlag,ak=a.reportFlag;(0,aa.s)();var al=(0,ab.a)().user,am=(0,e.useState)(!1),an=am[0],ao=am[1],ap=(0,e.useState)(!1),ar=ap[0],as=ap[1],at=(0,e.useState)(!1),au=at[0],aw=at[1];(0,y.Z)();var ax,ay=(null==ad?void 0:ad.status)==="done"?"success":(null==ad?void 0:ad.status)==="cancelled"||(null==ad?void 0:ad.status)==="expired"?"error":(null==ad?void 0:ad.status)==="waiting"?"warning":(null==ad?void 0:ad.status)==="rescheduled"?"info":"primary",az=["".concat(null==ad?void 0:null===(b=ad.patch)|| void 0===b?void 0:null===(c=b.teacher)|| void 0===c?void 0:c.firstName," ").concat(null==ad?void 0:null===(f=ad.patch)|| void 0===f?void 0:null===(h=f.teacher)|| void 0===h?void 0:h.lastName)||"no data","".concat(null==ad?void 0:null===(i=ad.patch)|| void 0===i?void 0:null===(j=i.student)|| void 0===j?void 0:j.firstName," ").concat(null==ad?void 0:null===(k=ad.patch)|| void 0===k?void 0:null===(n=k.student)|| void 0===n?void 0:n.lastName)||"no data",(null==ad?void 0:ad.status)?(0,d.jsx)(M.Z,{label:null==ad?void 0:ad.status,color:ay}):"no data","".concat(av()(null==ad?void 0:ad.startedAt).format("YYYY-MM-DD hh:mm A"))||"no data","".concat(av()(null==ad?void 0:ad.endedAt).format("YYYY-MM-DD hh:mm A"))||"no data",(null==ad?void 0:null===(o=ad.patch)|| void 0===o?void 0:null===(q=o.department)|| void 0===q?void 0:q.name)||"no data","".concat(av()(null==ad?void 0:ad.date).format("YYYY-MM-DD"))||"no data","".concat(av()("".concat(null==ad?void 0:ad.date.substr(0,11)).concat(ad.startTime).concat(ad.date.substr(19,24))).format("hh:mm A"))||"no data","".concat(av()("".concat(null==ad?void 0:ad.date.substr(0,11)).concat(ad.endTime).concat(ad.date.substr(19,24))).format("hh:mm A"))||"no data",],aA=function(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){if("object"==typeof a[c]&&null!==a[c]){var d=aA(a[c]);for(var e in d)d.hasOwnProperty(e)&&(b[c+"."+e]=d[e])}else b[c]=a[c]}return b},aC=(0,V.TA)({initialValues:{sessionMethod:null==ad?void 0:ad.sessionMethod,title:null==ad?void 0:ad.title,status:null==ad?void 0:ad.status,date:null==ad?void 0:ad.date,startTime:null==ad?void 0:ad.startTime,endTime:null==ad?void 0:ad.endTime},enableReinitialize:!0,validationSchema:X.Ry({sessionMethod:X.Z_().required("sessionMethod is required"),title:X.Z_().max(255).required("title is required"),status:X.Z_().max(255).required("status is required"),date:X.hT().required("date is required"),startTime:X.Z_().required("startTime is required"),endTime:X.Z_().required("endTime is required")}),onSubmit:(ax=(0,m.Z)(r().mark(function a(b){var c,d,e,f;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=aA(aC.initialValues),e={},null===(c=Object.entries(d))|| void 0===c||c.map(function(a){var c=(0,p.Z)(a,2),d=c[0],f=c[1],g=Z()(b,d);g!==f&&_()(e,d,g)}),a.next=6,ah(ad.id,e);case 6:(f=a.sent.success)&&ao(!1);case 8:case"end":return a.stop()}},a)})),function(a){return ax.apply(this,arguments)})}),aD=function(){as(!0)},aE=function(){as(!1)},aF=function(){aw(!0)},aG=function(){aw(!1)},aH=function(){var a,b,c=null==ad?void 0:null===(a=ad.patch)|| void 0===a?void 0:null===(b=a.student)|| void 0===b?void 0:b.zoomLink,d=new URL("https://zoom.us/"),e=new URL(c,d);window.open(e.toString(),"new")};return(0,e.useEffect)(function(){if(ad){var a;aC.setValues({sessionMethod:null==ad?void 0:ad.sessionMethod,title:null==ad?void 0:ad.title,status:null==ad?void 0:ad.status,date:null==ad?void 0:null===(a=ad.date)|| void 0===a?void 0:a.substr(0,10),startTime:null==ad?void 0:ad.startTime,endTime:null==ad?void 0:ad.endTime})}},[ad]),(0,d.jsxs)(e.Fragment,{children:[(0,d.jsxs)(B.Z,{sx:{"& > *":{borderBottom:0,cursor:"pointer"}},children:[null==az?void 0:az.map(function(a,b){return(0,d.jsx)(z.Z,{scope:"row",onClick:function(){return ao(!an)},sx:{color:"black"},children:a},b)}),(0,d.jsx)(z.Z,{scope:"row",className:"no-print",sx:{color:"black"},children:(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(null==ad?void 0:ad.status)==="running"&&(null==ad?void 0:ad.startedAt)===null&&(null==ad?void 0:null===(s=ad.zoomSessionMeetings)|| void 0===s?void 0:s.length)<1&&(null==al?void 0:null===(t=al.role)|| void 0===t?void 0:t.name)!=="student"&&(null==al?void 0:null===(u=al.role)|| void 0===u?void 0:u.name)!=="parent"&&(0,d.jsx)(J.Z,{variant:"contained",onClick:function(){ah(ad.id,{startedAt:new Date}),aH()},sx:{fontSize:12,mr:1},size:"small",children:"Start"}),(null==ad?void 0:ad.status)==="running"&&(0,d.jsxs)(d.Fragment,{children:[((null==ad?void 0:ad.startedAt)!=null||(null==al?void 0:null===(v=al.role)|| void 0===v?void 0:v.name)==="student")&&(0,d.jsx)(J.Z,{variant:"contained",color:"success",onClick:function(){var a;(null==al?void 0:null===(a=al.role)|| void 0===a?void 0:a.name)==="student"&&(null==ad?void 0:ad.joinedAt)===null&&ah(ad.id,{joinedAt:new Date}),aH()},sx:{fontSize:12,mr:1,backgroundColor:"green"},size:"small",children:"Join"}),(null==al?void 0:null===(w=al.role)|| void 0===w?void 0:w.name)!=="student"&&(null==al?void 0:null===(x=al.role)|| void 0===x?void 0:x.name)!=="parent"&&(null==ad?void 0:ad.startedAt)!==null&&(0,d.jsx)(J.Z,{variant:"contained",color:"error",onClick:function(){aD()},sx:{fontSize:12,mr:1},size:"small",children:"End"})]}),(null==ad?void 0:ad.status)!=="done"&&(null==ad?void 0:ad.status)!=="cancelled"&&(null==ad?void 0:ad.status)!=="running"&&((null==al?void 0:null===(A=al.role)|| void 0===A?void 0:A.name)==="admin"||(null==al?void 0:null===(F=al.role)|| void 0===F?void 0:F.name)==="super_admin")&&(0,d.jsx)(J.Z,{variant:"contained",color:"error",onClick:function(){return ah(ad.id,{status:"cancelled"})},sx:{fontSize:12},size:"small",children:"Cancel"})]})}),(0,d.jsx)(z.Z,{scope:"row",className:"no-print",sx:{color:"black"},children:(0,d.jsx)(E.Z,{onClick:function(){return aF()},sx:{p:0,ml:1,mb:1.5},children:(0,d.jsx)(T,{color:"primary"})})}),(0,d.jsx)(z.Z,{className:"no-print",onClick:function(a){return ag(a,ad.id)},role:"checkbox","aria-checked":ae,padding:"checkbox",children:(0,d.jsx)(C.Z,{color:"primary",checked:ae,inputProps:{"aria-labelledby":af}})})]}),(0,d.jsx)(B.Z,{sx:{border:0},children:(0,d.jsxs)(z.Z,{style:{paddingBottom:0,paddingTop:0,border:0},colSpan:12,children:[" ",((null==al?void 0:null===(G=al.role)|| void 0===G?void 0:G.name)==="admin"||(null==al?void 0:null===(H=al.role)|| void 0===H?void 0:H.name)==="super_admin")&&(0,d.jsx)(U.Z,{in:an,timeout:"auto",unmountOnExit:!0,children:(0,d.jsxs)(g.Z,{sx:{margin:1},children:[(0,d.jsx)(D.Z,{variant:"h6",gutterBottom:!0,component:"div",sx:{margin:0},children:"edit"}),(0,d.jsxs)("form",{onSubmit:aC.handleSubmit,children:[(0,d.jsx)(O.Z,{children:(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Session Method",name:"sessionMethod",value:aC.values.sessionMethod,error:Boolean(aC.errors.sessionMethod&&aC.touched.sessionMethod),helperText:aC.touched.sessionMethod&&(null===(I=aC.errors.sessionMethod)|| void 0===I?void 0:I.toString()),InputLabelProps:{shrink:!!aC.values.sessionMethod},fullWidth:!0,required:!0,select:!0,onChange:aC.handleChange,children:l.Q.map(function(a){return(0,d.jsx)(Q.Z,{value:a.value,children:a.label},a.value)})})}),(0,d.jsx)(P.Z,{label:"Title",name:"title",type:"text",onChange:aC.handleChange,value:aC.values.title,error:Boolean(aC.errors.title&&aC.touched.title),helperText:aC.touched.title&&(null===(K=aC.errors.title)|| void 0===K?void 0:K.toString()),size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1}}),(0,d.jsx)(O.Z,{children:(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Status",name:"status",value:aC.values.status,error:Boolean(aC.errors.status&&aC.touched.status),helperText:aC.touched.status&&(null===(L=aC.errors.status)|| void 0===L?void 0:L.toString()),InputLabelProps:{shrink:!!aC.values.status},fullWidth:!0,required:!0,select:!0,onChange:aC.handleChange,children:ai.map(function(a){return(0,d.jsx)(Q.Z,{value:a,children:a},a)})})}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Date",name:"date",type:"date",onChange:aC.handleChange,value:aC.values.date,error:Boolean(aC.errors.date&&aC.touched.date),helperText:aC.touched.date&&(null===(N=aC.errors.date)|| void 0===N?void 0:N.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"Start Time(UTC)",name:"startTime",type:"time",onChange:aC.handleChange,value:aC.values.startTime,error:Boolean(aC.errors.startTime&&aC.touched.startTime),helperText:aC.touched.startTime&&(null===(S=aC.errors.startTime)|| void 0===S?void 0:S.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(P.Z,{size:"small",sx:{width:{xs:100,sm:125,md:150,lg:175,xl:200},"& .MuiInputBase-root":{height:40},mr:1},label:"End Time(UTC)",name:"endTime",type:"time",onChange:aC.handleChange,value:aC.values.endTime,error:Boolean(aC.errors.endTime&&aC.touched.endTime),helperText:aC.touched.endTime&&(null===(Y=aC.errors.endTime)|| void 0===Y?void 0:Y.toString()),InputLabelProps:{shrink:!0}}),(0,d.jsx)(W.Z,{type:"submit",sx:{width:{xs:15,sm:20,md:30,lg:40,xl:50},"& .MuiInputBase-root":{height:40}},variant:"contained",children:"submit"})]})]})})]})}),(0,d.jsx)(R.Z,{maxWidth:"md",open:ar,children:(0,d.jsx)(aq,{setReoprtFlag:aj,reportFlag:ak,sessionDeptName:null===($=ad.patch)|| void 0===$?void 0:null===(ac=$.department)|| void 0===ac?void 0:ac.name,sessionId:ad.id,updateSession:ah,handleCloseCreateReport:aE})}),(0,d.jsx)(R.Z,{maxWidth:"md",open:au,onClose:aG,className:"bg-none",children:(0,d.jsx)(aB,{session:ad,handleCloseReport:aG,setReoprtFlag:aj})})]})},aF=c(1076),aG=c(1163),aH=c(2481),aI=(0,S.Z)((0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),"Filter"),aJ=c(6469),aK=(0,H.ZP)("div",{shouldForwardProp:function(a){return"open"!==a}})(function(a){var b,c,d=a.theme,e=a.open;return(0,o.Z)((b={flexGrow:1,overflow:"hidden",zIndex:1},(0,n.Z)(b,d.breakpoints.up("lg"),{marginLeft:-380}),(0,n.Z)(b,"transition",d.transitions.create("margin",{easing:d.transitions.easing.sharp,duration:d.transitions.duration.leavingScreen})),b),e&&(c={},(0,n.Z)(c,d.breakpoints.up("lg"),{marginLeft:0}),(0,n.Z)(c,"transition",d.transitions.create("margin",{easing:d.transitions.easing.easeOut,duration:d.transitions.duration.enteringScreen})),c))}),aL=function(a){var b,c,f,i,j,k,l,n,q,y,z,A=(0,aa.s)(),B=(0,aG.useRouter)(),C=(0,ab.a)().user,E=(0,e.useState)([]),F=E[0],H=E[1],O={date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null},P=(0,e.useState)({}),Q=P[0],R=P[1],S=(0,e.useState)([]),T=S[0],U=S[1],V=(0,e.useState)(0),W=V[0],X=V[1],Y=(0,e.useState)(0),Z=Y[0],$=Y[1],_=(0,e.useState)([]),ac=_[0],ad=_[1],ae=(0,e.useState)([]),af=ae[0],ag=ae[1],ai=(0,e.useState)(0),aj=ai[0],ak=ai[1],al=(0,e.useState)(100),am=al[0],an=al[1],ao=(0,e.useState)([]),ap=ao[0],aq=ao[1],ar=(0,p.Z)((0,aJ.Z)("waiting","sessions-selected-tab"),2),as=ar[0],at=ar[1],au=(0,e.useRef)(null),av=(0,e.useState)(!1),aw=av[0],ax=av[1],az=(0,e.useState)(!1),aB=az[0],aC=az[1],aD=["waiting","expired","running","done","cancelled","absent","rescheduled",],aL=[{label:"all",value:"",count:aj},{label:"waiting",value:"waiting",count:null===(b=ac.find(function(a){return a.status.match("waiting")}))|| void 0===b?void 0:b.count},{label:"running",value:"running",count:null===(c=ac.find(function(a){return a.status.match("running")}))|| void 0===c?void 0:c.count},{label:"done",value:"done",count:null===(f=ac.find(function(a){return a.status.match("done")}))|| void 0===f?void 0:f.count},{label:"cancelled",value:"cancelled",count:null===(i=ac.find(function(a){return a.status.match("cancelled")}))|| void 0===i?void 0:i.count},{label:"expired",value:"expired",count:null===(j=ac.find(function(a){return a.status.match("expired")}))|| void 0===j?void 0:j.count},{label:"absent",value:"absent",count:null===(k=ac.find(function(a){return a.status.match("absent")}))|| void 0===k?void 0:k.count},{label:"rescheduled",value:"rescheduled",count:null===(l=ac.find(function(a){return a.status.match("rescheduled")}))|| void 0===l?void 0:l.count},],aM=null==ap?void 0:ap.map(function(a){var b;return{label:a.name,value:a.duration,count:null===(b=af.find(function(b){return(null==b?void 0:b.sessionTypeId)===a.id}))|| void 0===b?void 0:b.count}}),aN=function(a){if(a.target.checked){H(T.map(function(a){return a.id}));return}H([])},aO=function(a,b){var c=F.indexOf(b),d=[];-1===c?d=d.concat(F,b):0===c?d=d.concat(F.slice(1)):c===F.length-1?d=d.concat(F.slice(0,-1)):c>0&&(d=d.concat(F.slice(0,c),F.slice(c+1))),H(d)},aP=function(a,b){at(b),aQ({limit:am,offset:0,status:b})},aQ=(0,e.useCallback)((q=(0,m.Z)(r().mark(function a(b){var c,d;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=4,aF.Q.getSessions((0,o.Z)({studentId:(null==B?void 0:null===(c=B.query)|| void 0===c?void 0:c.student)||null},Q,b));case 4:d=a.sent,A()&&(U(d.rows),$(d.count),ad(d.statusCount),ag(d.typesCount),ak(d.totalCount)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(a){return q.apply(this,arguments)}),[A,Q]),aR=(y=(0,m.Z)(r().mark(function a(){var b,c;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=ah.ZP.loading("delete"),a.prev=1,a.next=4,aF.Q.deleteSession(F);case 4:if(!(c=a.sent)){a.next=13;break}return ah.ZP.dismiss(b),ah.ZP.success("deleteSessionSuccess"),aQ({limit:am,offset:W,status:as}),H([]),a.abrupt("return",{success:!0});case 13:return ah.ZP.dismiss(b),ah.ZP.error("deleteSessionFailed"),a.abrupt("return",{success:!1});case 16:a.next=23;break;case 18:return a.prev=18,a.t0=a.catch(1),ah.ZP.dismiss(b),ah.ZP.error(a.t0.message||"deleteSessionsFailed"),a.abrupt("return",{success:!1});case 23:case"end":return a.stop()}},a,null,[[1,18]])})),function(){return y.apply(this,arguments)}),aS=(z=(0,m.Z)(r().mark(function a(b,c){var d,e;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=ah.ZP.loading("update"),a.prev=1,a.next=4,aF.Q.updateSession(b,c);case 4:if(!(e=a.sent)){a.next=12;break}return ah.ZP.dismiss(d),ah.ZP.success("updateSessionSuccess"),aQ({limit:am,offset:W,status:as}),a.abrupt("return",{success:!0});case 12:return ah.ZP.dismiss(d),ah.ZP.error("updateSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),ah.ZP.dismiss(d),ah.ZP.error(a.t0.message||"updateSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a,b){return z.apply(this,arguments)}),aT=(0,e.useCallback)((0,m.Z)(r().mark(function a(){var b;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aF.Q.getSessionTypes();case 3:b=a.sent,A()&&aq(b.resp),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[A]);(0,e.useEffect)(function(){aT()},[]),(0,e.useEffect)(function(){var a;aQ({limit:am,offset:W,status:as,studentId:(null==B?void 0:null===(a=B.query)|| void 0===a?void 0:a.student)||null})},[aB]),(0,e.useEffect)(function(){var a;(null==B?void 0:null===(a=B.query)|| void 0===a?void 0:a.code)&&aX(B.query.code,B.query.sessionId)},[B.query]);var aU,aV=function(a,b){X(b),aQ({limit:am,offset:b*am,status:as})},aW=function(a){an(parseInt(a.target.value,10)),X(0),aQ({limit:parseInt(a.target.value,10),offset:0,status:as})},aX=(0,e.useCallback)((aU=(0,m.Z)(r().mark(function a(b,c){var d;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aF.Q.startMeeting(b,c);case 3:(d=a.sent).success&&(window.history.replaceState(null,"","/sessions"),window.open(d.meetingUrl,"_blank"),aQ({limit:am,offset:W,status:as})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),window.history.replaceState(null,"","/sessions"),ah.ZP.error((null===a.t0|| void 0===a.t0?void 0:a.t0.message)||"failed to start session");case 11:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return aU.apply(this,arguments)}),[A]),aY=function(a){R(a),aQ((0,o.Z)({status:as,limit:am,offset:0},a))},aZ=function(){aY(O)},a$=function(){ax(function(a){return!a})},a_=function(){ax(!1)},a0=(0,e.useRef)(null),a1=(0,ay.useReactToPrint)({contentRef:a0,ignoreGlobalStyles:!1,pageStyle:"\n                @media print {\n                    @page {\n                        size: A4;\n                        margin: 5mm 2mm;\n                    }\n                    html, body {\n                        -webkit-print-color-adjust: exact;\n                        margin: 0px !important;\n                        padding: 0px  !important;\n                        overflow: hidden !important;\n                    }\n                    table th {\n                        font-size: 12px !important;\n                        padding: 7px !important;\n                    }\n                    table td {\n                        font-size: 11px !important;\n                        padding: 7px !important;\n                    }\n                    .no-print {\n                        display: none !important;\n                    }\n                    .print-only {\n                        display: flex !important;\n                    }\n                }\n            "});return(0,d.jsxs)(g.Z,{sx:{width:"100%",scrollBehavior:"auto"},children:[["super_admin","admin"].includes(null==C?void 0:null===(n=C.role)|| void 0===n?void 0:n.name)&&(0,d.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)(J.Z,{endIcon:(0,d.jsx)(aI,{fontSize:"small"}),onClick:a$,sx:{ml:1,mt:1},variant:"outlined",children:"Filters"}),(0,d.jsx)(J.Z,{endIcon:(0,d.jsx)(I.Z,{fontSize:"small"}),onClick:function(){return a1()},sx:{ml:1,mt:1},variant:"outlined",children:"Save as pdf"})]}),(0,d.jsx)(x.Z,{elevation:12,sx:(0,o.Z)({mt:.5},{bgcolor:function(a){return(0,s.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,d.jsxs)(K.Z,{sx:{backgroundColor:"white"},children:[(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(L.Z,{TabIndicatorProps:{style:{display:"none"}},onChange:aP,scrollButtons:"auto",sx:{px:2},textColor:"primary",value:as,variant:"scrollable",children:aL.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"50px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},icon:(0,d.jsx)(M.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"neutral.600"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(N.Z,{}),(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(L.Z,{TabIndicatorProps:{style:{display:"none"}},scrollButtons:"auto",sx:{px:2},textColor:"primary",value:as,variant:"scrollable",children:null==aM?void 0:aM.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"60px",mt:"auto",mb:"auto",cursor:"unset",color:"primary.dark"},icon:(0,d.jsx)(M.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"text.primary"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(N.Z,{}),(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(0,d.jsx)(aH.H,{containerRef:au,onClose:a_,open:aw,applyFilters:function(a){return aY(a)},clearFilters:aZ}),(0,d.jsx)(aK,{open:aw}),(0,d.jsx)(g.Z,{sx:{width:"100%"},children:(0,d.jsx)(g.Z,{children:(0,d.jsxs)(v.Z,{ref:a0,children:[(0,d.jsxs)(g.Z,{className:"print-only",sx:{display:"none",justifyContent:"space-between",alignItems:"center",flexDirection:"row",p:2},children:[(0,d.jsx)(g.Z,{children:(0,d.jsx)(aA.G,{loading:"eager"})}),(0,d.jsx)(g.Z,{children:(0,d.jsx)(D.Z,{variant:"h4",color:"primary",children:"Zadul Quran"})})]}),(0,d.jsxs)(t.Z,{"aria-labelledby":"tableTitle",size:"small",children:[(0,d.jsx)(G,{headCells:[{id:"teacher",numeric:!1,disablePadding:!0,label:"Teacher"},{id:"student",numeric:!1,disablePadding:!0,label:"Student"},{id:"status",numeric:!1,disablePadding:!0,label:"Status"},{id:"startedAt",numeric:!1,disablePadding:!0,label:"Started At"},{id:"endedAt",numeric:!1,disablePadding:!0,label:"Ended At"},{id:"subject",numeric:!0,disablePadding:!1,label:"Subject"},{id:"date",numeric:!0,disablePadding:!1,label:"Date"},{id:"startTime",numeric:!0,disablePadding:!1,label:"Start Time"},{id:"endTime",numeric:!0,disablePadding:!1,label:"End Time"},],numSelected:F.length,onSelectAllClick:aN,deleteSession:aR,rowCount:T.length}),(0,d.jsx)(u.Z,{children:T.map(function(a,b){var c=F.includes(a.id),e="enhanced-table-checkbox-".concat(b);return(0,d.jsx)(aE,{row:a,handleClick:aO,isItemSelected:c,labelId:e,updateSession:aS,statuses:aD,setReoprtFlag:aC,reportFlag:aB},null==a?void 0:a.id)})})]})]})})})]}),(0,d.jsx)(w.Z,{component:"div",count:Z,rowsPerPageOptions:[10,50,100,200,500],page:W,rowsPerPage:am,onPageChange:aV,onRowsPerPageChange:aW})]})})]})},aM=c(4669),aN=function(a){var b,c,f=a.sessions,h=a.contentRef,i=a.handleGetSessions,j=a.reportFlag,k=a.setReoprtFlag,l=(0,e.useState)(""),n=l[0],o=l[1],p=null==f?void 0:f.reduce(function(a,b){var c=av()(b.date).format("YYYY-MM");return a[c]=a[c]||[],a[c].push(b),a},{}),q=(0,e.useState)([]),s=q[0],w=q[1],y=["waiting","expired","running","done","cancelled","absent","rescheduled",],z=function(a){if(a.target.checked){w(f.map(function(a){return a.id}));return}w([])},A=function(a,b){var c=s.indexOf(b),d=[];-1===c?d=d.concat(s,b):0===c?d=d.concat(s.slice(1)):c===s.length-1?d=d.concat(s.slice(0,-1)):c>0&&(d=d.concat(s.slice(0,c),s.slice(c+1))),w(d)},B=(b=(0,m.Z)(r().mark(function a(){var b,c;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=ah.ZP.loading("delete"),a.prev=1,a.next=4,aF.Q.deleteSession(s);case 4:if(!(c=a.sent)){a.next=13;break}return ah.ZP.dismiss(b),ah.ZP.success("deleteSessionSuccess"),i(),w([]),a.abrupt("return",{success:!0});case 13:return ah.ZP.dismiss(b),ah.ZP.error("deleteSessionFailed"),a.abrupt("return",{success:!1});case 16:a.next=23;break;case 18:return a.prev=18,a.t0=a.catch(1),ah.ZP.dismiss(b),ah.ZP.error(a.t0.message||"deleteSessionsFailed"),a.abrupt("return",{success:!1});case 23:case"end":return a.stop()}},a,null,[[1,18]])})),function(){return b.apply(this,arguments)}),C=(c=(0,m.Z)(r().mark(function a(b,c){var d,e;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=ah.ZP.loading("update"),a.prev=1,a.next=4,aF.Q.updateSession(b,c);case 4:if(!(e=a.sent)){a.next=12;break}return ah.ZP.dismiss(d),ah.ZP.success("updateSessionSuccess"),i(),a.abrupt("return",{success:!0});case 12:return ah.ZP.dismiss(d),ah.ZP.error("updateSessionFailed"),a.abrupt("return",{success:!1});case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),ah.ZP.dismiss(d),ah.ZP.error(a.t0.message||"updateSessionsFailed"),a.abrupt("return",{success:!1});case 22:case"end":return a.stop()}},a,null,[[1,17]])})),function(a,b){return c.apply(this,arguments)}),D=p[n];return(0,d.jsx)(g.Z,{sx:{p:2},children:n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.Z,{sx:{display:"flex",justifyContent:"flex-end",width:"100%"},children:(0,d.jsxs)(J.Z,{onClick:function(){return o("")},sx:{m:2,gap:1},variant:"outlined",children:[(0,d.jsx)(aM.Z,{fontSize:"small",className:"no-print"}),"Back"]})}),(0,d.jsx)(v.Z,{children:(0,d.jsxs)(t.Z,{ref:h,"aria-labelledby":"tableTitle",size:"small",children:[(0,d.jsx)("style",{children:"\n													@media print {\n															body {\n																	-webkit-print-color-adjust: exact;\n															}\n															table {\n																	padding:10px;\n															}\n															.no-print {\n																	display: none !important;\n															}\n													}\n											"}),(0,d.jsx)(G,{headCells:[{id:"teacher",numeric:!1,disablePadding:!0,label:"Teacher"},{id:"student",numeric:!1,disablePadding:!0,label:"Student"},{id:"status",numeric:!1,disablePadding:!0,label:"Status"},{id:"startedAt",numeric:!1,disablePadding:!0,label:"Started At"},{id:"endedAt",numeric:!1,disablePadding:!0,label:"Ended At"},{id:"subject",numeric:!0,disablePadding:!1,label:"Subject"},{id:"date",numeric:!0,disablePadding:!1,label:"Date"},{id:"startTime",numeric:!0,disablePadding:!1,label:"Start Time"},{id:"endTime",numeric:!0,disablePadding:!1,label:"End Time"},],numSelected:s.length,onSelectAllClick:z,deleteSession:B,rowCount:null==D?void 0:D.length}),(0,d.jsx)(u.Z,{children:null==D?void 0:D.map(function(a,b){var c=s.includes(a.id);return(0,d.jsx)(aE,{row:a,handleClick:A,isItemSelected:c,labelId:"enhanced-table-checkbox-".concat(b),updateSession:C,statuses:y,setReoprtFlag:k,reportFlag:j},a.id)})})]})})]}):(0,d.jsx)(ae.ZP,{container:!0,spacing:3,children:Object.keys(p).map(function(a){var b;return(0,d.jsx)(ae.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,d.jsxs)(x.Z,{onClick:function(){return o(a)},elevation:3,sx:{backgroundColor:"primary.main",color:"white",fontWeight:"bold",fontSize:"20px",textAlign:"center",padding:"16px",borderRadius:"8px",cursor:"pointer",transition:"0.3s","&:hover":{backgroundColor:"primary.dark"}},children:[av()(a,"YYYY-MM").format("MMMM YYYY")," (",(null===(b=p[a])|| void 0===b?void 0:b.length)||0,")"]})},a)})})})},aO=aN,aP=(0,H.ZP)("div",{shouldForwardProp:function(a){return"open"!==a}})(function(a){var b,c,d=a.theme,e=a.open;return(0,o.Z)((b={flexGrow:1,overflow:"hidden",zIndex:1},(0,n.Z)(b,d.breakpoints.up("lg"),{marginLeft:-380}),(0,n.Z)(b,"transition",d.transitions.create("margin",{easing:d.transitions.easing.sharp,duration:d.transitions.duration.leavingScreen})),b),e&&(c={},(0,n.Z)(c,d.breakpoints.up("lg"),{marginLeft:0}),(0,n.Z)(c,"transition",d.transitions.create("margin",{easing:d.transitions.easing.easeOut,duration:d.transitions.duration.enteringScreen})),c))}),aQ=function(){var a,b,c,f,i,j,k,l,n,q=(0,aa.s)(),t=(0,aG.useRouter)(),u=(0,ab.a)().user,v={date:{from:null,to:null},teacherId:null,departmentId:null,studentId:null},y=(0,e.useState)({}),z=y[0],A=y[1],B=(0,e.useState)([]),C=B[0],D=B[1],E=(0,e.useState)(0),F=E[0],G=E[1],H=(0,e.useState)(0),O=H[0],P=H[1],Q=(0,e.useState)([]),R=Q[0],S=Q[1],T=(0,e.useState)([]),U=T[0],V=T[1],W=(0,e.useState)(0),X=W[0],Y=W[1],Z=(0,e.useState)(100),$=Z[0],_=Z[1],ac=(0,e.useState)([]),ad=ac[0],ae=ac[1],af=(0,p.Z)((0,aJ.Z)("waiting","sessions-selected-tab"),2),ag=af[0],ai=af[1],aj=(0,e.useRef)(null),ak=(0,e.useState)(!1),al=ak[0],am=ak[1],an=(0,e.useState)(!1),ao=an[0],ap=an[1],aq=[{label:"all",value:"",count:X},{label:"waiting",value:"waiting",count:null===(a=R.find(function(a){return a.status.match("waiting")}))|| void 0===a?void 0:a.count},{label:"running",value:"running",count:null===(b=R.find(function(a){return a.status.match("running")}))|| void 0===b?void 0:b.count},{label:"done",value:"done",count:null===(c=R.find(function(a){return a.status.match("done")}))|| void 0===c?void 0:c.count},{label:"cancelled",value:"cancelled",count:null===(f=R.find(function(a){return a.status.match("cancelled")}))|| void 0===f?void 0:f.count},{label:"expired",value:"expired",count:null===(i=R.find(function(a){return a.status.match("expired")}))|| void 0===i?void 0:i.count},{label:"absent",value:"absent",count:null===(j=R.find(function(a){return a.status.match("absent")}))|| void 0===j?void 0:j.count},{label:"rescheduled",value:"rescheduled",count:null===(k=R.find(function(a){return a.status.match("rescheduled")}))|| void 0===k?void 0:k.count},],ar=null==ad?void 0:ad.map(function(a){var b;return{label:a.name,value:a.duration,count:null===(b=U.find(function(b){return(null==b?void 0:b.sessionTypeId)===a.id}))|| void 0===b?void 0:b.count}}),as=function(a,b){ai(b),au({limit:$,offset:0,status:b})},at=function(){au({limit:$,offset:F,status:ag})},au=(0,e.useCallback)((n=(0,m.Z)(r().mark(function a(b){var c,d;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=4,aF.Q.getSessions((0,o.Z)({studentId:(null==t?void 0:null===(c=t.query)|| void 0===c?void 0:c.student)||null},z,b));case 4:d=a.sent,q()&&(D(d.rows),P(d.count),S(d.statusCount),V(d.typesCount),Y(d.totalCount)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(a){return n.apply(this,arguments)}),[q,z]),av=(0,e.useCallback)((0,m.Z)(r().mark(function a(){var b;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aF.Q.getSessionTypes();case 3:b=a.sent,q()&&ae(b.resp),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),[q]);(0,e.useEffect)(function(){av()},[]),(0,e.useEffect)(function(){var a;au({limit:$,offset:F,status:ag,studentId:(null==t?void 0:null===(a=t.query)|| void 0===a?void 0:a.student)||null})},[ao]),(0,e.useEffect)(function(){var a;(null==t?void 0:null===(a=t.query)|| void 0===a?void 0:a.code)&&aA(t.query.code,t.query.sessionId)},[t.query]);var aw,ax=function(a,b){G(b),au({limit:$,offset:b*$,status:ag})},az=function(a){_(parseInt(a.target.value,10)),G(0),au({limit:parseInt(a.target.value,10),offset:0,status:ag})},aA=(0,e.useCallback)((aw=(0,m.Z)(r().mark(function a(b,c){var d;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,aF.Q.startMeeting(b,c);case 3:(d=a.sent).success&&(window.history.replaceState(null,"","/sessions"),window.open(d.meetingUrl,"_blank"),au({limit:$,offset:F,status:ag})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),window.history.replaceState(null,"","/sessions"),ah.ZP.error((null===a.t0|| void 0===a.t0?void 0:a.t0.message)||"failed to start session");case 11:case"end":return a.stop()}},a,null,[[0,7]])})),function(a,b){return aw.apply(this,arguments)}),[q]),aB=function(a){A(a),au((0,o.Z)({status:ag,limit:$,offset:0},a))},aC=function(){aB(v)},aD=function(){am(function(a){return!a})},aE=function(){am(!1)},aK=(0,e.useRef)(null),aL=(0,ay.useReactToPrint)({contentRef:aK,ignoreGlobalStyles:!1});return(0,d.jsxs)(g.Z,{sx:{width:"100%",scrollBehavior:"auto"},children:[["super_admin","admin"].includes(null==u?void 0:null===(l=u.role)|| void 0===l?void 0:l.name)&&(0,d.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)(J.Z,{endIcon:(0,d.jsx)(aI,{fontSize:"small"}),onClick:aD,sx:{ml:1,mt:1},variant:"outlined",children:"Filters"}),(0,d.jsx)(J.Z,{endIcon:(0,d.jsx)(I.Z,{fontSize:"small"}),onClick:function(){return aL()},sx:{ml:1,mt:1},variant:"outlined",children:"Save as pdf"})]}),(0,d.jsx)(x.Z,{elevation:12,sx:(0,o.Z)({mt:.5},{bgcolor:function(a){return(0,s.Fq)(a.palette.info.contrastText,a.palette.action.activatedOpacity)}}),children:(0,d.jsxs)(K.Z,{sx:{backgroundColor:"white"},children:[(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(L.Z,{TabIndicatorProps:{style:{display:"none"}},onChange:as,scrollButtons:"auto",sx:{px:2},textColor:"primary",value:ag,variant:"scrollable",children:aq.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"50px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},icon:(0,d.jsx)(M.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"neutral.600"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(N.Z,{}),(0,d.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",children:(0,d.jsx)(L.Z,{TabIndicatorProps:{style:{display:"none"}},scrollButtons:"auto",sx:{px:2},textColor:"primary",value:ag,variant:"scrollable",children:null==ar?void 0:ar.map(function(a){return(0,d.jsx)(h.Z,{sx:{minHeight:"60px",mt:"auto",mb:"auto",cursor:"unset",color:"primary.dark"},icon:(0,d.jsx)(M.Z,{label:a.count||0,size:"small",sx:{fontSize:"12px !important",color:"text.primary"}}),iconPosition:"end",label:a.label,value:a.value},a.value)})})}),(0,d.jsx)(N.Z,{}),(0,d.jsxs)(g.Z,{sx:{display:"flex"},children:[(0,d.jsx)(aH.H,{containerRef:aj,onClose:aE,open:al,applyFilters:function(a){return aB(a)},clearFilters:aC}),(0,d.jsx)(aP,{open:al}),(0,d.jsx)(g.Z,{sx:{width:"100%"},children:(0,d.jsx)(aO,{sessions:C,contentRef:aK,handleGetSessions:at,reportFlag:ao,setReoprtFlag:ap})})]}),(0,d.jsx)(w.Z,{component:"div",count:O,rowsPerPageOptions:[10,50,100,200,500],page:F,rowsPerPage:$,onPageChange:ax,onRowsPerPageChange:az})]})})]})},aR=c(1132),aS=function(){var a=(0,e.useState)("1"),b=a[0],c=a[1],f=function(a,b){c(b)};return(0,d.jsx)(g.Z,{sx:{width:"100%",typography:"body1",zoom:"77%"},children:(0,d.jsxs)(i.ZP,{value:b,children:[(0,d.jsx)(g.Z,{sx:{borderBottom:1,borderColor:"divider",p:"10px 30px"},children:(0,d.jsxs)(j.Z,{TabIndicatorProps:{style:{display:"none"}},variant:"scrollable",scrollButtons:"auto",onChange:f,"aria-label":"Session options",children:[(0,d.jsx)(h.Z,{sx:{minHeight:"45px",fontSize:"16px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},label:"List Session",value:"1"}),(0,d.jsx)(h.Z,{sx:{minHeight:"45px",fontSize:"16px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},label:"Group Session",value:"2"}),(0,d.jsx)(h.Z,{sx:{minHeight:"45px",fontSize:"16px",mt:"auto",mb:"auto","&.Mui-selected":{color:"text.context",fontWeight:"bold",backgroundColor:"secondary.main",borderRadius:"10%",p:"0 4px"}},label:"Add Session",value:"3"})]})}),(0,d.jsx)(k.Z,{value:"1",sx:{p:.5},children:(0,d.jsx)(aL,{roleId:4})}),(0,d.jsx)(k.Z,{value:"2",sx:{p:.5},children:(0,d.jsx)(aQ,{})}),(0,d.jsx)(k.Z,{value:"3",children:(0,d.jsx)(l.Z,{})})]})})};aS.getLayout=function(a){return(0,d.jsx)(aR.a,{children:(0,d.jsx)(f.c,{children:a})})};var aT=aS}},function(a){a.O(0,[69,805,574,307,659,661,266,886,918,421,178,207,472,723,286,774,888,179],function(){var b;return a(a.s=4587)}),_N_E=a.O()}])